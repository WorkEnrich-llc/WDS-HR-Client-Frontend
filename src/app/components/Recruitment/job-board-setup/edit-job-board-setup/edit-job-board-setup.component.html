<!-- page header -->
<app-page-header
  [breadcrumbs]="[
    { label: 'Admin Settings', link: '/admin-settings' },
    { label: 'Job Board Setup', link: '/job-board-setup' },
    { label: 'Edit Job Board' }
  ]"
  title="Edit Job board"
  [create]="createdAt"
  [update]="updatedAt"
>
  <button
    class="btn btn-lg btn-success w-auto"
    [disabled]="isSaving || !hasChanges"
    (click)="onSaveClick()"
  >
    @if (isSaving) {
    <span
      class="spinner-grow spinner-grow-sm me-2"
      role="status"
      aria-hidden="true"
    ></span>
    } @if (!isSaving) {
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="22"
      height="22"
      viewBox="0 0 24 24"
    >
      <g fill="none" stroke="currentColor" stroke-width="1.5">
        <circle cx="12" cy="12" r="10" />
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="m8.5 12.5l2 2l5-5"
        />
      </g>
    </svg>
    }
    <span>Save Changes</span>
  </button>

  <button class="btn btn-lg btn-outline-dark w-auto" (click)="openModal()">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="22"
      height="22"
      viewBox="0 0 24 24"
    >
      <g fill="none" stroke="currentColor" stroke-width="1.5">
        <circle cx="12" cy="12" r="10" />
        <path stroke-linecap="round" d="m14.5 9.5l-5 5m0-5l5 5" />
      </g>
    </svg>
    <span>Discard Changes</span>
  </button>
</app-page-header>

<!-- Loading state - Skeleton Loader -->
@if (isLoading) {
<div class="content-hug">
  <!-- Tabs navigation skeleton -->
  <ul class="nav d-flex align-items-center nav-tabs bg-white">
    <li class="nav-item d-flex align-items-center">
      <div class="placeholder-glow d-flex align-items-center">
        <span class="placeholder skeleton-icon"></span>
        <span class="placeholder col-4 skeleton-text ms-2"></span>
      </div>
    </li>
    <div class="placeholder-glow">
      <span class="placeholder skeleton-arrow"></span>
    </div>
    <li class="nav-item d-flex align-items-center">
      <div class="placeholder-glow d-flex align-items-center">
        <span class="placeholder skeleton-icon"></span>
        <span class="placeholder col-5 skeleton-text ms-2"></span>
      </div>
    </li>
    <div class="placeholder-glow">
      <span class="placeholder skeleton-arrow"></span>
    </div>
    <li class="nav-item d-flex align-items-center">
      <div class="placeholder-glow d-flex align-items-center">
        <span class="placeholder skeleton-icon"></span>
        <span class="placeholder col-4 skeleton-text ms-2"></span>
      </div>
    </li>
  </ul>

  <!-- Form content skeleton -->
  <div class="content-box d-flex flex-column gap-3">
    <!-- Title field skeleton -->
    <div class="d-flex flex-column gap-2">
      <div class="placeholder-glow">
        <span class="placeholder skeleton-label"></span>
      </div>
      <div class="placeholder-glow">
        <span class="placeholder col-12 skeleton-form-input"></span>
      </div>
    </div>

    <!-- Description field skeleton -->
    <div class="d-flex flex-column gap-2">
      <div class="placeholder-glow">
        <span class="placeholder skeleton-label"></span>
      </div>
      <div class="placeholder-glow">
        <span class="placeholder col-12 skeleton-textarea"></span>
      </div>
    </div>
  </div>
</div>
}

<!-- Tabs navigation -->
@if (!isLoading) {
<ul class="nav d-flex align-items-center nav-tabs bg-white">
  <li
    class="nav-item"
    [ngClass]="{
      active: isActive('about-company')
    }"
  >
    <span class="nav-link" (click)="handleTabClick('about-company')">
      <svg
        width="18"
        height="18"
        viewBox="0 0 18 18"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          opacity="0.3"
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M2.4375 16.5C2.4375 16.1893 2.68934 15.9375 3 15.9375H15C15.3107 15.9375 15.5625 16.1893 15.5625 16.5C15.5625 16.8107 15.3107 17.0625 15 17.0625H3C2.68934 17.0625 2.4375 16.8107 2.4375 16.5Z"
        />
        <path
          opacity="0.3"
          d="M14.3105 5.52872C15.2321 4.60709 15.2321 3.11284 14.3105 2.19122C13.3889 1.26959 11.8946 1.26959 10.973 2.19122L10.4407 2.72356C10.448 2.74557 10.4555 2.76789 10.4634 2.7905C10.6585 3.3529 11.0266 4.09017 11.7192 4.78273C12.4118 5.47529 13.149 5.84345 13.7114 6.03857C13.7339 6.04637 13.7562 6.0539 13.7781 6.06116L14.3105 5.52872Z"
        />
        <path
          d="M10.4633 2.69971L10.4404 2.72263C10.4477 2.74464 10.4553 2.76696 10.4631 2.78957C10.6582 3.35197 11.0264 4.08924 11.7189 4.7818C12.4115 5.47436 13.1488 5.84251 13.7112 6.03764C13.7335 6.04538 13.7555 6.05284 13.7772 6.06004L8.63984 11.1974C8.29348 11.5438 8.12027 11.717 7.92932 11.8659C7.70406 12.0416 7.46033 12.1923 7.20244 12.3152C6.98383 12.4194 6.75147 12.4968 6.28677 12.6517L3.83622 13.4686C3.60754 13.5448 3.35541 13.4853 3.18495 13.3148C3.0145 13.1444 2.95498 12.8922 3.03121 12.6636L3.84806 10.213C4.00296 9.7483 4.08041 9.51595 4.1846 9.29733C4.3075 9.03945 4.45814 8.79572 4.63383 8.57046C4.78277 8.37951 4.95595 8.20632 5.30229 7.85999L10.4633 2.69971Z"
        />
      </svg>

      About company
    </span>
  </li>

  <li
    class="nav-item"
    [ngClass]="{
      active: isActive('social-media')
    }"
  >
    <span class="nav-link" (click)="handleTabClick('social-media')">
      <svg
        width="18"
        height="18"
        viewBox="0 0 18 18"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M1.52087 8.4375C1.80852 4.55809 5.04718 1.5 9.0001 1.5C8.37695 1.5 7.82213 1.77316 7.3657 2.19085C6.91156 2.60644 6.52778 3.18658 6.21737 3.87236C5.90514 4.56219 5.6626 5.36901 5.49844 6.24459C5.36685 6.94646 5.28677 7.68639 5.26008 8.4375H1.52087ZM1.52087 9.5625H5.26008C5.28677 10.3136 5.36685 11.0535 5.49844 11.7554C5.6626 12.631 5.90514 13.4378 6.21737 14.1276C6.52778 14.8134 6.91156 15.3936 7.3657 15.8092C7.82213 16.2268 8.37695 16.5 9.0001 16.5C5.04718 16.5 1.80852 13.4419 1.52087 9.5625Z"
        />
        <path
          d="M9.0001 1.5C9.62324 1.5 10.1781 1.77316 10.6345 2.19085C11.0886 2.60644 11.4724 3.18658 11.7828 3.87237C12.0951 4.56219 12.3376 5.36901 12.5018 6.24459C12.6333 6.94646 12.7134 7.68639 12.7401 8.4375H16.4793C16.1917 4.55809 12.953 1.5 9.0001 1.5Z"
        />
        <path
          d="M12.5018 11.7554C12.3376 12.631 12.0951 13.4378 11.7828 14.1276C11.4724 14.8134 11.0886 15.3936 10.6345 15.8092C10.1781 16.2268 9.62324 16.5 9.0001 16.5C12.953 16.5 16.1917 13.4419 16.4793 9.5625H12.7401C12.7134 10.3136 12.6333 11.0535 12.5018 11.7554Z"
        />
        <g opacity="0.3">
          <path
            d="M9.00014 2.54663C8.79388 2.54663 8.52743 2.63439 8.21759 2.91793C7.90546 3.20356 7.59299 3.65123 7.31692 4.26115C7.04269 4.86702 6.82 5.59842 6.66676 6.41576C6.54608 7.05943 6.47122 7.74176 6.44495 8.43762H11.5553C11.5291 7.74176 11.4542 7.05943 11.3335 6.41577C11.1803 5.59842 10.9576 4.86702 10.6833 4.26115C10.4073 3.65123 10.0948 3.20357 9.78269 2.91793C9.47285 2.63439 9.20639 2.54663 9.00014 2.54663Z"
          />
          <path
            d="M6.66676 11.5845C6.82 12.4018 7.04269 13.1332 7.31692 13.7391C7.59299 14.349 7.90546 14.7967 8.21759 15.0823C8.52743 15.3658 8.79388 15.4536 9.00014 15.4536C9.20639 15.4536 9.47285 15.3658 9.78268 15.0823C10.0948 14.7967 10.4073 14.349 10.6833 13.7391C10.9576 13.1332 11.1803 12.4018 11.3335 11.5845C11.4542 10.9408 11.5291 10.2585 11.5553 9.56262H6.44495C6.47122 10.2585 6.54608 10.9408 6.66676 11.5845Z"
          />
        </g>
      </svg>

      Social media links
    </span>
  </li>

  <li
    class="nav-item"
    [ngClass]="{
      active: isActive('theme-selection')
    }"
  >
    <span class="nav-link" (click)="handleTabClick('theme-selection')">
      <svg
        width="18"
        height="18"
        viewBox="0 0 18 18"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M5.25 13.5C5.25 13.9142 4.91421 14.25 4.5 14.25C4.08579 14.25 3.75 13.9142 3.75 13.5C3.75 13.0858 4.08579 12.75 4.5 12.75C4.91421 12.75 5.25 13.0858 5.25 13.5Z"
        />
        <path
          opacity="0.4"
          d="M7.5 4.5V13.5C7.5 15.1569 6.15685 16.5 4.5 16.5C2.84315 16.5 1.5 15.1569 1.5 13.5V4.5C1.5 2.84315 2.84315 1.5 4.5 1.5C6.15685 1.5 7.5 2.84315 7.5 4.5Z"
        />
        <path
          opacity="0.7"
          d="M6.93567 15.2518L9.91639 12.2711L14.295 7.70393C15.4364 6.51329 15.4166 4.62854 14.2502 3.46223C13.0663 2.27831 11.1468 2.27831 9.96288 3.46223L7.5 5.92512V13.5C7.5 14.1539 7.2908 14.7589 6.93567 15.2518Z"
        />
        <path
          d="M9.91639 12.2713L6.93567 15.252C7.2901 14.7601 7.49918 14.1564 7.5 13.504C7.49784 15.159 6.15552 16.5 4.5 16.5H13.4246C15.0814 16.5 16.4246 15.1569 16.4246 13.5C16.4246 11.8431 15.0814 10.5 13.4246 10.5H11.6145L9.91639 12.2713Z"
        />
      </svg>

      Theme Selection
    </span>
  </li>
</ul>
}

<!-- Content -->
@if (!isLoading && activeTab === 'about-company') {
<div class="content-hug">
  <div class="content-box d-flex flex-column gap-3">
    <div class="d-flex flex-column gap-2">
      <label class="form-label">Title</label>
      <input
        type="text"
        class="form-control"
        [class.is-invalid]="isFieldInvalid('title')"
        [(ngModel)]="jobBoardSetup.title"
        (blur)="onFieldBlur('title')"
        (input)="onFieldInput('title')"
        placeholder="Enter job board title"
      />
      @if (isFieldInvalid('title')) {
      <div class="text-danger small mt-1">
        {{ getValidationError("title") }}
      </div>
      }
    </div>

    <div class="d-flex flex-column gap-2">
      <label class="form-label">Description</label>
      <textarea
        class="form-control"
        [class.is-invalid]="isFieldInvalid('description')"
        rows="10"
        [(ngModel)]="jobBoardSetup.description"
        (blur)="onFieldBlur('description')"
        (input)="onFieldInput('description')"
        placeholder="Enter company description"
      ></textarea>
      @if (isFieldInvalid('description')) {
      <div class="text-danger small mt-1">
        {{ getValidationError("description") }}
      </div>
      }
    </div>

    <!-- Logo Upload Section -->
    <div class="d-flex flex-column gap-2">
      <label class="form-label">Logo</label>
      <div class="image-upload-container">
        <input
          type="file"
          id="logoInput"
          accept="image/jpeg,image/jpg,image/png,image/webp"
          (change)="onLogoFileSelected($event)"
          class="image-input"
          #logoInput
        />
        <div
          class="image-upload-area"
          (click)="openLogoPicker($event)"
          [class.has-image]="logoPreviewUrl || companyLogoUrl"
        >
          @if (!logoPreviewUrl && !companyLogoUrl) {
          <div class="upload-placeholder">
            <div class="upload-icon-wrapper">
              <div class="upload-cloud">
                <!-- Cloud base -->
                <svg
                  width="40"
                  height="40"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M6.5 18H17.5C19.433 18 21 16.433 21 14.5C21 12.744 19.764 11.291 18.074 11.038C17.613 8.718 15.612 7 13.25 7C11.903 7 10.676 7.57 9.806 8.5C9.531 8.462 9.258 8.444 8.98 8.444C6.78 8.444 5 10.224 5 12.424C5 14.459 6.507 16.154 8.5 16.39"
                    stroke="#9CA3AF"
                    stroke-width="1.7"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <!-- Small upload badge -->
                <div class="upload-cloud-badge">
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <rect
                      x="3"
                      y="3"
                      width="18"
                      height="18"
                      rx="5"
                      fill="white"
                    />
                    <path
                      d="M12 16V8"
                      stroke="#2563EB"
                      stroke-width="1.8"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M9 11L12 8L15 11"
                      stroke="#2563EB"
                      stroke-width="1.8"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </div>
              </div>
            </div>
            <div class="upload-text">
              <h4>Upload logo</h4>
              <p>Click to upload or drag & drop here</p>
              <span class="file-types">PNG, JPG or JPEG â€” up to 5MB</span>
            </div>
          </div>
          } @else {
          <div class="image-preview">
            <img
              [src]="logoPreviewUrl || companyLogoUrl"
              alt="Logo preview"
              class="preview-image"
            />
            <div class="image-overlay">
              <button
                type="button"
                class="remove-image-btn"
                (click)="removeLogo($event)"
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M18 6L6 18M6 6L18 18"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </button>
              <button
                type="button"
                class="change-image-btn"
                (click)="openLogoPicker($event)"
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M17 8L12 3L7 8"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M12 3V15"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </button>
            </div>
          </div>
          }
        </div>
        @if (logoError) {
        <p class="error-msg">{{ logoError }}</p>
        }
      </div>
      <div class="d-flex align-items-center gap-3 mt-3">
        <button
          type="button"
          class="btn btn-primary"
          (click)="saveLogo()"
          [disabled]="!selectedLogoFile || isSavingLogo"
        >
          @if (isSavingLogo) {
          <span
            class="spinner-grow spinner-grow-sm me-2"
            role="status"
            aria-hidden="true"
          ></span>
          }
          <span>Save Logo</span>
        </button>
        <button
          type="button"
          class="btn btn-outline-danger"
          (click)="openDeleteLogoModal()"
          [disabled]="(!companyLogoUrl && !selectedLogoFile) || isDeletingLogo"
        >
          @if (isDeletingLogo) {
          <span
            class="spinner-grow spinner-grow-sm me-2"
            role="status"
            aria-hidden="true"
          ></span>
          }
          <span>Delete</span>
        </button>
      </div>
    </div>

    <!-- Next button -->
    <div class="btn-fixed">
      <button
        type="button"
        class="btn btn-lg btn-primary"
        (click)="goToNextTab()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="18"
          height="18"
          viewBox="0 0 24 24"
        >
          <path
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="1.5"
            d="M4 12h16m0 0l-6-6m6 6l-6 6"
          />
        </svg>
        <span>Next (1/3)</span>
      </button>
    </div>
  </div>
</div>
} @if (!isLoading && activeTab === 'social-media') {
<div class="content-hug">
  <div class="content-box social-media-content">
    <h3 class="section-title">Social media links</h3>

    <!-- Website -->
    <div class="social-media-row">
      <div class="social-media-label-group">
        <label class="social-media-checkbox">
          <input
            type="checkbox"
            [checked]="isSocialMediaEnabled('website')"
            (change)="toggleSocialMedia('website')"
          />
          <span class="checkmark"></span>
        </label>
        <span class="social-media-label">Website</span>
      </div>
      <div class="social-media-input-wrapper">
        <input
          type="url"
          class="form-control social-media-input"
          [class.is-invalid]="isSocialMediaFieldInvalid('website')"
          [disabled]="!isSocialMediaEnabled('website')"
          [(ngModel)]="jobBoardSetup.social_links.website"
          (blur)="onSocialMediaFieldBlur('website')"
          (input)="onSocialMediaFieldInput('website')"
          placeholder="https://www.companyname.com"
        />
        @if (isSocialMediaFieldInvalid('website')) {
        <div class="text-danger small mt-1">
          {{ getSocialMediaValidationError("website") }}
        </div>
        }
      </div>
    </div>

    <!-- LinkedIn -->
    <div class="social-media-row">
      <div class="social-media-label-group">
        <label class="social-media-checkbox">
          <input
            type="checkbox"
            [checked]="isSocialMediaEnabled('linkedin')"
            (change)="toggleSocialMedia('linkedin')"
          />
          <span class="checkmark"></span>
        </label>
        <span class="social-media-label">LinkedIn</span>
      </div>
      <div class="social-media-input-wrapper">
        <input
          type="url"
          class="form-control social-media-input"
          [class.is-invalid]="isSocialMediaFieldInvalid('linkedin')"
          [disabled]="!isSocialMediaEnabled('linkedin')"
          [(ngModel)]="jobBoardSetup.social_links.linkedin"
          (blur)="onSocialMediaFieldBlur('linkedin')"
          (input)="onSocialMediaFieldInput('linkedin')"
          placeholder="https://www.linkedin.com/company..."
        />
        @if (isSocialMediaFieldInvalid('linkedin')) {
        <div class="text-danger small mt-1">
          {{ getSocialMediaValidationError("linkedin") }}
        </div>
        }
      </div>
    </div>

    <!-- Facebook -->
    <div class="social-media-row">
      <div class="social-media-label-group">
        <label class="social-media-checkbox">
          <input
            type="checkbox"
            [checked]="isSocialMediaEnabled('facebook')"
            (change)="toggleSocialMedia('facebook')"
          />
          <span class="checkmark"></span>
        </label>
        <span class="social-media-label">Facebook</span>
      </div>
      <div class="social-media-input-wrapper">
        <input
          type="url"
          class="form-control social-media-input"
          [class.is-invalid]="isSocialMediaFieldInvalid('facebook')"
          [disabled]="!isSocialMediaEnabled('facebook')"
          [(ngModel)]="jobBoardSetup.social_links.facebook"
          (blur)="onSocialMediaFieldBlur('facebook')"
          (input)="onSocialMediaFieldInput('facebook')"
          placeholder="https://www.facebook.com/company..."
        />
        @if (isSocialMediaFieldInvalid('facebook')) {
        <div class="text-danger small mt-1">
          {{ getSocialMediaValidationError("facebook") }}
        </div>
        }
      </div>
    </div>

    <!-- Instagram -->
    <div class="social-media-row">
      <div class="social-media-label-group">
        <label class="social-media-checkbox">
          <input
            type="checkbox"
            [checked]="isSocialMediaEnabled('instagram')"
            (change)="toggleSocialMedia('instagram')"
          />
          <span class="checkmark"></span>
        </label>
        <span class="social-media-label">Instagram</span>
      </div>
      <div class="social-media-input-wrapper">
        <input
          type="url"
          class="form-control social-media-input"
          [class.is-invalid]="isSocialMediaFieldInvalid('instagram')"
          [disabled]="!isSocialMediaEnabled('instagram')"
          [(ngModel)]="jobBoardSetup.social_links.instagram"
          (blur)="onSocialMediaFieldBlur('instagram')"
          (input)="onSocialMediaFieldInput('instagram')"
          placeholder="https://www.Instagram.com/company..."
        />
        @if (isSocialMediaFieldInvalid('instagram')) {
        <div class="text-danger small mt-1">
          {{ getSocialMediaValidationError("instagram") }}
        </div>
        }
      </div>
    </div>

    <!-- X (Twitter) -->
    <div class="social-media-row">
      <div class="social-media-label-group">
        <label class="social-media-checkbox">
          <input
            type="checkbox"
            [checked]="isSocialMediaEnabled('x')"
            (change)="toggleSocialMedia('x')"
          />
          <span class="checkmark"></span>
        </label>
        <span class="social-media-label">X (Twitter)</span>
      </div>
      <div class="social-media-input-wrapper">
        <input
          type="url"
          class="form-control social-media-input"
          [class.is-invalid]="isSocialMediaFieldInvalid('x')"
          [disabled]="!isSocialMediaEnabled('x')"
          [(ngModel)]="jobBoardSetup.social_links.x"
          (blur)="onSocialMediaFieldBlur('x')"
          (input)="onSocialMediaFieldInput('x')"
          placeholder="https://www.Twitter.com/company..."
        />
        @if (isSocialMediaFieldInvalid('x')) {
        <div class="text-danger small mt-1">
          {{ getSocialMediaValidationError("x") }}
        </div>
        }
      </div>
    </div>

    <!-- Back and Next buttons -->
    <div class="btn-fixed d-flex align-items-stretch gap-2">
      <button
        type="button"
        class="btn btn-outline-success bg-white d-flex justify-content-center align-items-center"
        (click)="goToPrevTab()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="22"
          height="22"
          viewBox="0 0 24 24"
        >
          <path
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="1.5"
            d="M20 12H4m0 0l6-6m-6 6l6 6"
          />
        </svg>
      </button>
      <button
        type="button"
        class="btn btn-lg btn-primary"
        (click)="goToNextTab()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="18"
          height="18"
          viewBox="0 0 24 24"
        >
          <path
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="1.5"
            d="M4 12h16m0 0l-6-6m6 6l-6 6"
          />
        </svg>
        <span>Next (2/3)</span>
      </button>
    </div>
  </div>
</div>
} @if (!isLoading && activeTab === 'theme-selection') {
<div class="content-hug">
  <div class="content-box theme-selector-content">
    <h3 class="section-title">Theme Selector</h3>

    <div class="theme-buttons-container">
      @for (theme of themes; track theme.id) {
      <button
        type="button"
        class="theme-button"
        [class.selected]="isThemeSelected(theme.id)"
        [style.--theme-color]="getThemeColor(theme)"
        [style.--theme-color-rgb]="getThemeColorRgb(theme)"
        (click)="selectTheme(theme.id)"
      >
        <span
          class="theme-color-circle"
          [style.background-color]="getThemeColor(theme)"
        ></span>
        <span class="theme-name">{{ theme.name }}</span>
      </button>
      }
    </div>

    <div class="theme-preview">
      <img
        src="assets/images/jop-board.png"
        alt="Theme Preview"
        class="preview-image"
        [style.filter]="getImageFilter()"
      />
    </div>

    <!-- Back button -->
    <div class="btn-fixed d-flex align-items-stretch gap-2">
      <button
        type="button"
        class="btn btn-outline-success bg-white d-flex justify-content-center align-items-center"
        (click)="goToPrevTab()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="22"
          height="22"
          viewBox="0 0 24 24"
        >
          <path
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="1.5"
            d="M20 12H4m0 0l6-6m-6 6l6 6"
          />
        </svg>
      </button>
    </div>
  </div>
</div>
}

<!-- Save confirmation popup -->
<app-popup
  [title]="'Confirm Save'"
  [paragraph1]="'Are you sure you want to save the changes to Job Board Setup?'"
  [paragraph2]="'This action will update all your changes.'"
  [isOpen]="isSaveConfirmModalOpen"
  (close)="closeSaveConfirmModal()"
>
  <button
    modal-btn-left
    class="btn btn-lg btn-success w-100"
    (click)="confirmSave()"
  >
    Save Changes
  </button>
  <button
    modal-btn-right
    class="btn btn-lg btn-outline-dark border-0 w-100"
    (click)="closeSaveConfirmModal()"
  >
    Cancel
  </button>
</app-popup>

<!-- Cancel confirmation popup -->
<app-popup
  [title]="'Discard Changes'"
  [paragraph1]="
    'Are you sure you want to discard all changes done to the Job Board Setup?'
  "
  [paragraph2]="'This action cannot be undone!'"
  [isOpen]="isModalOpen"
  (close)="closeModal()"
>
  <button
    modal-btn-left
    class="btn btn-lg btn-dark w-100"
    (click)="confirmAction()"
  >
    Discard Changes
  </button>
  <button
    modal-btn-right
    class="btn btn-lg btn-outline-dark border-0 w-100"
    (click)="closeModal()"
  >
    Continue Editing
  </button>
</app-popup>

<!-- Delete Logo confirmation popup -->
<app-popup
  [title]="'Delete Logo'"
  [paragraph1]="'Are you sure you want to delete the company logo?'"
  [paragraph2]="'This action cannot be undone!'"
  [isOpen]="isDeleteLogoModalOpen"
  (close)="closeDeleteLogoModal()"
>
  <button
    modal-btn-left
    class="btn btn-lg btn-danger w-100"
    (click)="confirmDeleteLogo()"
  >
    Delete Logo
  </button>
  <button
    modal-btn-right
    class="btn btn-lg btn-outline-dark border-0 w-100"
    (click)="closeDeleteLogoModal()"
  >
    Cancel
  </button>
</app-popup>
