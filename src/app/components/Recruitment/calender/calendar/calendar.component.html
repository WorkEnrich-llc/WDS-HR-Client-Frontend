<!-- start page header -->
<app-page-header [breadcrumbs]="[
    { label: 'Recruitment', link: '/calendar' },
    { label: 'Calendar' }
  ]" title="Calendar">
</app-page-header>
<!-- end page header -->

<!-- start content -->
<div class="content-hug">
  <div class="row align-items-stretch">
    <!-- calendar -->
    <div class="col-lg-8">
      <div class="content-box h-100">
        <!-- calendar with shared component -->
        <app-calendar 
          [isLoading]="isLoading" 
          [calendarDays]="calendarDays" 
          [currentDate]="currentDate" 
          [events]="events"
          (monthChanged)="onMonthChanged($event)"
          (daySelected)="onDaySelected($event)"
          (todayClicked)="onTodayClicked()">
        </app-calendar>
      </div>
    </div>

    <!-- day details -->
    <div class="col-lg-4">
      @if (selectedDateFormatted) {
      <div class="content-box position-sticky" style="top: 9.8rem;">
        @if (selectedDateFormatted) {
        <div class="selected-day mb-4">
          {{ selectedDateFormatted }}
        </div>
        }
        @for (event of eventsDay; track eventTrackBy($index, event)) {
        <div class="event-card d-flex gap-3 align-items-stretch p-3 mb-3 shadow-sm"
          [ngClass]="event.type ? event.type.toLowerCase() : 'default'">
          <div class="event-badge me-2" [ngClass]="'badge-' + (event.type.toLowerCase() || 'default')">
            {{ event.type | titlecase }}
          </div>
          <div class="contain d-flex flex-column flex-grow-1">
            <div class="event-title-row d-flex align-items-center mb-1">
              <h3 class="font-semi-bold mb-0 event-title-text">{{ event.title }}</h3>
            </div>
            @if (event.interviewer || event.interviewee || event.location || event.start || event.end) {
            <div class="event-details mt-2">
              @if (event.interviewer) {
              <div class="event-detail-row">
                <span class="event-detail-label">Interviewer:</span>
                <span class="event-detail-value">{{ event.interviewer }}</span>
              </div>
              }
              @if (event.interviewee) {
              <div class="event-detail-row">
                <span class="event-detail-label">Interviewee:</span>
                <span class="event-detail-value">{{ event.interviewee }}</span>
              </div>
              }
              @if (event.location) {
              <div class="event-detail-row">
                <span class="event-detail-label">Location:</span>
                <span class="event-detail-value">{{ event.location }}</span>
              </div>
              }
              @if (event.start && event.end) {
              <div class="event-detail-row">
                <span class="event-detail-label">Time:</span>
                <span class="event-detail-value">{{ event.start | date:'shortTime' }} - {{ event.end | date:'shortTime'
                  }}</span>
              </div>
              }
            </div>
            }
          </div>
        </div>
        }
        @if (eventsDay.length<1 && selectedDateFormatted) { <div class="noevents">No events In this Day
      </div>
      }
    </div>
    }
  </div>
</div>
</div>