<!-- start page header -->
<app-page-header
  [breadcrumbs]="[
    { label: 'Recruitment', link: '/calendar' },
    { label: 'Job Openings', link: '/job-openings' },
    { label: 'Applicants' }
  ]"
  title="Opening {{ jobOpening?.id || 'Loading...' }} - Applicants"
  create="{{ jobOpening?.created_at | date : 'dd/MM/yyyy' }}"
  update="{{ jobOpening?.updated_at | date : 'dd/MM/yyyy' }}"
>
  <button
    class="btn btn-lg btn-primary"
    [routerLink]="['/job-openings/update-job-openings', jobOpening?.id]"
  >
    <svg
      width="18"
      height="18"
      viewBox="0 0 18 18"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g clip-path="url(#clip0_1271_19665)">
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M8.95697 0.9375L10.125 0.9375C10.4357 0.9375 10.6875 1.18934 10.6875 1.5C10.6875 1.81066 10.4357 2.0625 10.125 2.0625H9C7.21633 2.0625 5.93517 2.06369 4.96018 2.19478C4.00138 2.32369 3.42334 2.56886 2.9961 2.9961C2.56886 3.42334 2.32369 4.00138 2.19478 4.96018C2.06369 5.93517 2.0625 7.21633 2.0625 9C2.0625 10.7837 2.06369 12.0648 2.19478 13.0398C2.32369 13.9986 2.56886 14.5767 2.9961 15.0039C3.42334 15.4311 4.00138 15.6763 4.96018 15.8052C5.93517 15.9363 7.21633 15.9375 9 15.9375C10.7837 15.9375 12.0648 15.9363 13.0398 15.8052C13.9986 15.6763 14.5767 15.4311 15.0039 15.0039C15.4311 14.5767 15.6763 13.9986 15.8052 13.0398C15.9363 12.0648 15.9375 10.7837 15.9375 9V7.875C15.9375 7.56434 16.1893 7.3125 16.5 7.3125C16.8107 7.3125 17.0625 7.56434 17.0625 7.875V9.04303C17.0625 10.7743 17.0625 12.1311 16.9202 13.1897C16.7745 14.2733 16.4705 15.1283 15.7994 15.7994C15.1283 16.4705 14.2733 16.7745 13.1897 16.9202C12.1311 17.0625 10.7743 17.0625 9.04303 17.0625H8.95697C7.22567 17.0625 5.8689 17.0625 4.81028 16.9202C3.72673 16.7745 2.87171 16.4705 2.2006 15.7994C1.5295 15.1283 1.22549 14.2733 1.07981 13.1897C0.937483 12.1311 0.937491 10.7743 0.9375 9.04303V8.95697C0.937491 7.22567 0.937483 5.86889 1.07981 4.81028C1.22549 3.72673 1.5295 2.87171 2.2006 2.2006C2.87171 1.5295 3.72673 1.22549 4.81028 1.07981C5.86889 0.937483 7.22567 0.937491 8.95697 0.9375ZM12.5779 1.70694C13.6038 0.681022 15.2671 0.681022 16.2931 1.70694C17.319 2.73285 17.319 4.39619 16.2931 5.4221L11.307 10.4082C11.0285 10.6867 10.8541 10.8611 10.6594 11.013C10.4302 11.1918 10.1821 11.3451 9.91961 11.4702C9.69676 11.5764 9.46271 11.6544 9.08909 11.7789L6.9107 12.505C6.50851 12.6391 6.0651 12.5344 5.76533 12.2347C5.46556 11.9349 5.36089 11.4915 5.49495 11.0893L6.22108 8.91092C6.34559 8.53729 6.42359 8.30324 6.5298 8.08039C6.65489 7.81791 6.80821 7.56984 6.98703 7.34056C7.13887 7.1459 7.31333 6.97147 7.59183 6.693L12.5779 1.70694ZM15.4976 2.50243C14.911 1.91586 13.96 1.91586 13.3734 2.50243L13.0909 2.7849C13.108 2.85679 13.1318 2.94245 13.1649 3.038C13.2724 3.34779 13.4758 3.75579 13.86 4.14C14.2442 4.5242 14.6522 4.7276 14.962 4.83508C15.0575 4.86823 15.1432 4.89205 15.2151 4.90907L15.4976 4.62661C16.0841 4.04003 16.0841 3.08901 15.4976 2.50243ZM14.3289 5.79532C13.9419 5.6289 13.4911 5.36209 13.0645 4.93549C12.6379 4.50889 12.3711 4.05812 12.2047 3.67114L8.41313 7.46269C8.10075 7.77508 7.97823 7.89897 7.87411 8.03246C7.74553 8.19731 7.6353 8.37567 7.54536 8.56439C7.47252 8.71722 7.41651 8.8822 7.2768 9.30131L6.95288 10.2731L7.72693 11.0471L8.69869 10.7232C9.1178 10.5835 9.28278 10.5275 9.43561 10.4546C9.62433 10.3647 9.80269 10.2545 9.96754 10.1259C10.101 10.0218 10.2249 9.89926 10.5373 9.58687L14.3289 5.79532Z"
          fill="#E0EBFF"
        />
      </g>
      <defs>
        <clipPath id="clip0_1271_19665">
          <rect width="18" height="18" fill="white" />
        </clipPath>
      </defs>
    </svg>

    <span>Edit</span>
  </button>

  <!-- Pause button - shown when job is Live -->
  @if (isJobLive()) {
  <button (click)="openPauseModal()" class="btn btn-lg btn-outline-warning">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="22"
      height="22"
      viewBox="0 0 24 24"
    >
      <path
        fill="currentColor"
        fill-rule="evenodd"
        d="M12 2.75a9.25 9.25 0 1 0 0 18.5a9.25 9.25 0 0 0 0-18.5M1.25 12C1.25 6.063 6.063 1.25 12 1.25S22.75 6.063 22.75 12S17.937 22.75 12 22.75S1.25 17.937 1.25 12m8.228-4.75h.044c.214 0 .41 0 .576.011c.178.012.373.04.572.122c.428.178.77.519.947.947c.082.199.11.394.122.572c.011.165.011.362.011.576v5.044c0 .214 0 .41-.011.576c-.012.178-.04.373-.122.572a1.75 1.75 0 0 1-.947.947c-.199.082-.394.11-.572.122c-.165.011-.362.011-.576.011h-.044c-.214 0-.41 0-.576-.011a1.8 1.8 0 0 1-.572-.122a1.75 1.75 0 0 1-.947-.947a1.8 1.8 0 0 1-.122-.572c-.011-.165-.011-.362-.011-.576V9.478c0-.214 0-.41.011-.576c.012-.178.04-.373.122-.572a1.75 1.75 0 0 1 .947-.947c.199-.082.394-.11.572-.122c.165-.011.362-.011.576-.011m-.577 1.52a.25.25 0 0 0-.13.131a1 1 0 0 0-.013.103a8 8 0 0 0-.008.496v5c0 .243 0 .388.008.496c.004.067.01.095.012.103a.25.25 0 0 0 .131.13a1 1 0 0 0 .103.013c.108.008.253.008.496.008s.388 0 .496-.008a1 1 0 0 0 .103-.012a.25.25 0 0 0 .13-.131a1 1 0 0 0 .013-.103c.008-.108.008-.253.008-.496v-5c0-.243 0-.388-.008-.496a1 1 0 0 0-.012-.103a.25.25 0 0 0-.131-.13a1 1 0 0 0-.103-.013A8 8 0 0 0 9.5 8.75c-.243 0-.388 0-.496.008a1 1 0 0 0-.103.012m5.577-1.52h.044c.214 0 .41 0 .576.011c.178.012.373.04.572.122c.429.178.77.519.947.947c.082.199.11.394.122.572c.011.165.011.362.011.576v5.044c0 .214 0 .41-.011.576c-.012.178-.04.373-.122.572a1.75 1.75 0 0 1-.947.947c-.199.082-.394.11-.572.122c-.165.011-.362.011-.576.011h-.044c-.214 0-.41 0-.576-.011a1.8 1.8 0 0 1-.572-.122a1.75 1.75 0 0 1-.947-.947a1.8 1.8 0 0 1-.122-.572c-.011-.165-.011-.362-.011-.576V9.478c0-.214 0-.41.011-.576c.012-.178.04-.373.122-.572a1.75 1.75 0 0 1 .947-.947c.199-.082.394-.11.572-.122c.165-.011.362-.011.576-.011m-.577 1.52a.25.25 0 0 0-.13.131a1 1 0 0 0-.013.103a8 8 0 0 0-.008.496v5c0 .243 0 .388.008.496c.004.067.01.095.012.103a.25.25 0 0 0 .131.13a1 1 0 0 0 .103.013c.108.008.253.008.496.008s.388 0 .496-.008a1 1 0 0 0 .103-.012a.25.25 0 0 0 .13-.131a1 1 0 0 0 .013-.103c.008-.108.008-.253.008-.496v-5c0-.243 0-.388-.008-.496a1 1 0 0 0-.012-.103a.25.25 0 0 0-.131-.13a1 1 0 0 0-.103-.013a8 8 0 0 0-.496-.008c-.243 0-.388 0-.496.008a1 1 0 0 0-.103.012"
        clip-rule="evenodd"
      />
    </svg>
    <span>Pause</span>
  </button>
  }

  <!-- Play/Live button - shown when job is Paused or other status -->
  @if (!isJobLive()) {
  <button (click)="openMakeLiveModal()" class="btn btn-lg btn-outline-success">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="22"
      height="22"
      viewBox="0 0 24 24"
    >
      <path
        fill="currentColor"
        fill-rule="evenodd"
        d="M12 2.75a9.25 9.25 0 1 0 0 18.5a9.25 9.25 0 0 0 0-18.5M1.25 12C1.25 6.063 6.063 1.25 12 1.25S22.75 6.063 22.75 12S17.937 22.75 12 22.75S1.25 17.937 1.25 12m9.44-4.44c-.347-.201-.737-.31-1.135-.31c-1.286 0-2.305 1.04-2.305 2.313v4.874c0 1.272 1.019 2.313 2.305 2.313c.398 0 .788-.109 1.134-.31l3.97-2.31c.72-.418 1.091-1.262 1.091-2.127s-.371-1.71-1.09-2.127z"
        clip-rule="evenodd"
      />
    </svg>
    <span>Make Live</span>
  </button>
  }
</app-page-header>
<!-- page content -->
<div class="content-hug d-flex flex-column gap-4">
  <!-- 2 cards -->
  <div class="row">
    <div class="col-lg-8">
      <!-- Main Information Section -->
      <div class="content-box d-flex flex-column gap-3 w-100">
        <div class="d-flex align-items-center justify-content-between">
          <h2>Main Information</h2>
          <button
            (click)="toggleText()"
            class="edit-btn d-flex align-items-center justify-content-center gap-1"
          >
            @if (isExpanded) {
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              viewBox="0 0 24 24"
            >
              <path
                fill="currentColor"
                fill-rule="evenodd"
                d="M4.43 8.512a.75.75 0 0 1 1.058-.081L12 14.012l6.512-5.581a.75.75 0 0 1 .976 1.138l-7 6a.75.75 0 0 1-.976 0l-7-6a.75.75 0 0 1-.081-1.057"
                clip-rule="evenodd"
              />
            </svg>
            } @if (!isExpanded) {
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              viewBox="0 0 24 24"
            >
              <path
                fill="none"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.5"
                d="m19 15l-7-6l-7 6"
              />
            </svg>
            }
            <span>{{ isExpanded ? "Show" : "Hide" }}</span>
          </button>
        </div>

        <!-- Loading skeleton for Main Information -->
        @if (mainInfoLoading) {
        <div class="d-flex flex-column gap-3">
          @for (item of [1,2,3,4,5,6,7,8,9]; track item) {
          <div class="placeholder-glow">
            <div class="info">
              <h6 class="placeholder col-4"></h6>
              <span class="placeholder col-6"></span>
            </div>
          </div>
          }
        </div>
        } @if (!mainInfoLoading && !isExpanded) {
        <div class="d-flex flex-column gap-3">
          <div class="info">
            <h6>Opening ID</h6>
            <span>{{
              jobOpening.id?.toString().padStart(4, "0") || "N/A"
            }}</span>
          </div>
          <div class="info">
            <h6>Opening Name</h6>
            <span>{{ jobOpening.job_title?.name || "N/A" }}</span>
          </div>
          <div class="info">
            <h6>Branch</h6>
            <span>{{ jobOpening.branch?.name || "N/A" }}</span>
          </div>
          <div class="info">
            <h6>CV Limit</h6>
            <span>{{ jobOpening.cv_limit || "N/A" }}</span>
          </div>
          <div class="info">
            <h6>Time Limit</h6>
            <span>{{ jobOpening.time_limit || "N/A" }} Days</span>
          </div>
          <div class="info">
            <h6>Work Schedule</h6>
            <span>{{ jobOpening.work_schedule?.name || "N/A" }}</span>
          </div>
          <div class="info">
            <h6>Days on Site</h6>
            <span>{{ jobOpening.days_on_site || "N/A" }}</span>
          </div>
          <div class="info">
            <h6>Employment Type</h6>
            <span>{{ jobOpening.employment_type?.name || "N/A" }}</span>
          </div>
          <div class="info">
            <h6>Status</h6>
            <span
              class="badge"
              [ngClass]="{
                'bg-success': jobOpening.status === 'Live',
                'bg-warning': jobOpening.status === 'Draft',
                'bg-secondary': jobOpening.status === 'Closed'
              }"
              >{{ jobOpening.status || "N/A" }}</span
            >
          </div>
          <div class="info">
            <h6>Created By</h6>
            <span>{{ jobOpening.created_by?.name || "N/A" }}</span>
          </div>
          <div class="info">
            <h6>Updated By</h6>
            <span>{{ jobOpening.updated_by?.name || "N/A" }}</span>
          </div>
        </div>
        }
      </div>
    </div>
    <div class="col-lg-4">
      <div class="content-box d-flex flex-column gap-3 w-100">
        <div class="d-flex align-items-center justify-content-between">
          <h2>Job details</h2>
          <a class="view-btn h-100 d-flex align-items-center gap-1">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              viewBox="0 0 24 24"
            >
              <g
                fill="none"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-width="1.5"
              >
                <path
                  stroke-linejoin="round"
                  d="m13 11l9-9m0 0h-5.344M22 2v5.344"
                />
                <path
                  d="M22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12s0-7.071 1.464-8.536C4.93 2 7.286 2 12 2"
                />
              </g>
            </svg>
            <span>View</span>
          </a>
        </div>

        <!-- Loading skeleton for Job Details -->
        @if (jobDetailsInfoLoading) {
        <div class="d-flex flex-column gap-3">
          @for (item of [1,2,3,4,5,6,7]; track item) {
          <div class="placeholder-glow">
            <div class="info">
              <h6 class="placeholder col-4"></h6>
              <span class="placeholder col-7"></span>
            </div>
          </div>
          }
        </div>
        } @if (!jobDetailsInfoLoading && !isExpanded) {
        <div class="d-flex flex-column gap-3">
          <div class="info">
            <h6>Job ID</h6>
            <span>{{
              jobOpening.job_title?.id?.toString().padStart(4, "0") || "N/A"
            }}</span>
          </div>
          <div class="info">
            <h6>Job title</h6>
            <span>{{ jobOpening.job_title?.name || "N/A" }}</span>
          </div>
          <div class="info">
            <h6>Company</h6>
            <span>{{ jobOpening.company?.name || "N/A" }}</span>
          </div>
          <div class="info">
            <h6>Employment Type</h6>
            <span>{{ jobOpening.employment_type?.name || "N/A" }}</span>
          </div>
          <div class="info">
            <h6>Work Schedule</h6>
            <span>{{ jobOpening.work_schedule?.name || "N/A" }}</span>
          </div>
          <div class="info">
            <h6>Job type</h6>
            <span>Full time</span>
          </div>
          <div class="info">
            <h6>Average Salary</h6>
            <span>14.000-18.000</span>
          </div>
        </div>
        }
      </div>
    </div>
  </div>

  <div class="content-box">
    <!-- Applicants Section Header -->
    <h2 class="mb-3">Applicants</h2>

    <!-- Search Bar -->
    <div class="mb-3">
      <div data-mdb-input-init class="form-outline w-25">
        <input
          type="text"
          class="form-control"
          placeholder="Search for an employee"
          [(ngModel)]="searchTerm"
          (input)="onSearchChange()"
        />
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
        >
          <g fill="none" stroke-width="1.5">
            <circle cx="11.5" cy="11.5" r="9.5" />
            <path stroke-linecap="round" d="M18.5 18.5L22 22" />
          </g>
        </svg>
      </div>
    </div>

    <!-- Tab Navigation -->
    <ul class="nav d-flex align-items-center nav-tabs bg-white p-0 px-3 mb-3">
      <li
        class="nav-item"
        [class.active]="activeTab === 'all'"
        (click)="setActiveTab('all')"
      >
        <svg
          width="19"
          height="18"
          viewBox="0 0 19 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clip-path="url(#clip0_1087_19391)">
            <circle cx="9.16699" cy="4.5" r="3" fill="currentColor" />
            <path
              opacity="0.3"
              d="M15.167 13.125C15.167 14.989 15.167 16.5 9.16699 16.5C3.16699 16.5 3.16699 14.989 3.16699 13.125C3.16699 11.261 5.85328 9.75 9.16699 9.75C12.4807 9.75 15.167 11.261 15.167 13.125Z"
              fill="currentColor"
            />
          </g>
          <defs>
            <clipPath id="clip0_1087_19391">
              <rect
                width="18"
                height="18"
                fill="white"
                transform="translate(0.166992)"
              />
            </clipPath>
          </defs>
        </svg>

        <span class="nav-link">All Applicants</span>
      </li>

      <li
        class="nav-item"
        [class.active]="activeTab === 'candidates'"
        (click)="setActiveTab('candidates')"
      >
        <svg
          width="18"
          height="18"
          viewBox="0 0 18 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M12 4.5C12 6.15685 10.6569 7.5 9 7.5C7.34315 7.5 6 6.15685 6 4.5C6 2.84315 7.34315 1.5 9 1.5C10.6569 1.5 12 2.84315 12 4.5Z"
            fill="currentColor"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M12.375 16.5C11.1376 16.5 10.5188 16.5 10.1344 16.1156C9.75 15.7312 9.75 15.1124 9.75 13.875C9.75 12.6376 9.75 12.0188 10.1344 11.6344C10.5188 11.25 11.1376 11.25 12.375 11.25C13.6124 11.25 14.2312 11.25 14.6156 11.6344C15 12.0188 15 12.6376 15 13.875C15 15.1124 15 15.7312 14.6156 16.1156C14.2312 16.5 13.6124 16.5 12.375 16.5ZM13.851 13.3094C14.0219 13.1385 14.0219 12.8615 13.851 12.6906C13.6802 12.5198 13.4032 12.5198 13.2323 12.6906L11.7917 14.1313L11.5177 13.8573C11.3468 13.6865 11.0698 13.6865 10.899 13.8573C10.7281 14.0282 10.7281 14.3052 10.899 14.476L11.4823 15.0594C11.6532 15.2302 11.9302 15.2302 12.101 15.0594L13.851 13.3094Z"
            fill="currentColor"
          />
          <path
            opacity="0.3"
            d="M10.858 16.4406C10.3134 16.4796 9.69723 16.5 9 16.5C3 16.5 3 14.989 3 13.125C3 11.261 5.68629 9.75 9 9.75C11.1604 9.75 13.0542 10.3923 14.1107 11.3559C13.7235 11.25 13.1803 11.25 12.375 11.25C11.1376 11.25 10.5188 11.25 10.1344 11.6344C9.75 12.0188 9.75 12.6376 9.75 13.875C9.75 15.1124 9.75 15.7312 10.1344 16.1156C10.3126 16.2937 10.541 16.3893 10.858 16.4406Z"
            fill="currentColor"
          />
        </svg>

        <span class="nav-link">Candidates</span>
      </li>

      <li
        class="nav-item"
        [class.active]="activeTab === 'interviewing'"
        (click)="setActiveTab('interviewing')"
      >
        <svg
          width="19"
          height="18"
          viewBox="0 0 19 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clip-path="url(#clip0_1087_19404)">
            <path
              d="M6.05305 1.5C6.36619 1.5 6.62004 1.73247 6.62004 2.01923V3.06662C7.12298 3.05769 7.68672 3.05769 8.32102 3.05769H11.345C11.9793 3.05769 12.543 3.05769 13.046 3.06662V2.01923C13.046 1.73247 13.2998 1.5 13.613 1.5C13.9261 1.5 14.18 1.73247 14.18 2.01923V3.11256C15.2681 3.19236 15.9824 3.38818 16.5072 3.86878C17.032 4.34938 17.2459 5.00354 17.333 6V6.75H2.33301V6C2.42014 5.00354 2.63398 4.34938 3.15879 3.86878C3.6836 3.38818 4.39793 3.19236 5.48606 3.11256V2.01923C5.48606 1.73247 5.73991 1.5 6.05305 1.5Z"
              fill="currentColor"
            />
            <path
              opacity="0.3"
              d="M17.333 10.5V9C17.333 8.37072 17.3235 7.24895 17.3138 6.75H2.3374C2.32773 7.24895 2.33724 8.37072 2.33724 9V10.5C2.33724 13.3284 2.33724 14.7426 3.21567 15.6213C4.0941 16.5 5.50792 16.5 8.33555 16.5H11.3347C14.1623 16.5 15.5761 16.5 16.4546 15.6213C17.333 14.7426 17.333 13.3284 17.333 10.5Z"
              fill="currentColor"
            />
            <path
              d="M14.333 12.375C14.333 12.9963 13.8293 13.5 13.208 13.5C12.5867 13.5 12.083 12.9963 12.083 12.375C12.083 11.7537 12.5867 11.25 13.208 11.25C13.8293 11.25 14.333 11.7537 14.333 12.375Z"
              fill="currentColor"
            />
          </g>
          <defs>
            <clipPath id="clip0_1087_19404">
              <rect
                width="18"
                height="18"
                fill="white"
                transform="translate(0.833008)"
              />
            </clipPath>
          </defs>
        </svg>

        <span class="nav-link">Interviewing</span>
      </li>

      <li
        class="nav-item"
        [class.active]="activeTab === 'qualified'"
        (click)="setActiveTab('qualified')"
      >
        <svg
          width="19"
          height="18"
          viewBox="0 0 19 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            opacity="0.3"
            d="M9.6665 12C5.34654 12 4.58126 7.69466 4.44568 4.27985C4.40797 3.32998 4.38912 2.85505 4.74591 2.41562C5.10269 1.9762 5.52972 1.90415 6.38377 1.76006C7.22681 1.61782 8.32884 1.5 9.6665 1.5C11.0042 1.5 12.1062 1.61782 12.9492 1.76006C13.8033 1.90415 14.2303 1.9762 14.5871 2.41562C14.9439 2.85505 14.925 3.32998 14.8873 4.27985C14.7517 7.69466 13.9865 12 9.6665 12Z"
            fill="currentColor"
          />
          <path
            d="M13.8968 9.31652L16.0092 8.14293C16.5735 7.82942 16.8556 7.67266 17.011 7.40857C17.1664 7.14448 17.1664 6.82171 17.1665 6.17615L17.1665 6.12175C17.1665 5.33905 17.1665 4.94769 16.9541 4.65306C16.7418 4.35843 16.3705 4.23467 15.628 3.98716L14.9165 3.75L14.9038 3.81348C14.9003 3.95543 14.8942 4.11005 14.8874 4.27984C14.8212 5.94813 14.6047 7.82899 13.8968 9.31652Z"
            fill="currentColor"
          />
          <path
            d="M4.44581 4.27985C4.51204 5.94822 4.72859 7.82916 5.43657 9.31672L3.32379 8.14293C2.75948 7.82942 2.47732 7.67266 2.32192 7.40857C2.16653 7.14448 2.16652 6.82171 2.16651 6.17615L2.1665 6.12175C2.16648 5.33905 2.16647 4.94769 2.37883 4.65306C2.59118 4.35843 2.96245 4.23467 3.70499 3.98716L4.41646 3.75L4.42947 3.81503C4.43297 3.95656 4.43909 4.11067 4.44581 4.27985Z"
            fill="currentColor"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M4.604 16.5C4.604 16.1893 4.85584 15.9375 5.1665 15.9375H14.1665C14.4772 15.9375 14.729 16.1893 14.729 16.5C14.729 16.8107 14.4772 17.0625 14.1665 17.0625H5.1665C4.85584 17.0625 4.604 16.8107 4.604 16.5Z"
            fill="currentColor"
          />
          <path
            opacity="0.3"
            d="M12.2596 15.9375H7.07324L7.29585 14.6251C7.36597 14.2746 7.67378 14.0222 8.03129 14.0222H11.3016C11.6591 14.0222 11.9669 14.2746 12.037 14.6251L12.2596 15.9375Z"
            fill="currentColor"
          />
          <path
            d="M9.66662 12.0001C9.47195 12.0001 9.2845 11.9914 9.104 11.9744V14.0222H10.229V11.9744C10.0486 11.9914 9.8612 12.0001 9.66662 12.0001Z"
            fill="currentColor"
          />
        </svg>

        <span class="nav-link">Qualified</span>
      </li>

      <li
        class="nav-item"
        [class.active]="activeTab === 'rejected'"
        (click)="setActiveTab('rejected')"
      >
        <svg
          width="18"
          height="18"
          viewBox="0 0 18 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clip-path="url(#clip0_1087_19421)">
            <path
              opacity="0.3"
              d="M7.92051 1.6875C7.83538 1.68749 7.76912 1.68748 7.70643 1.69128C6.9111 1.73944 6.21466 2.24141 5.91746 2.98069C5.89351 3.04027 5.87222 3.10397 5.84375 3.18938C5.78124 3.35763 5.63779 3.54899 5.43691 3.70189C5.41454 3.71892 5.39209 3.73499 5.36963 3.75013L6.82613 3.75C6.84777 3.70533 6.86773 3.65991 6.88585 3.61381L6.88701 3.61119L6.89013 3.60376L6.89379 3.59467L6.89723 3.5857L6.89995 3.57824L6.90129 3.57448L6.90447 3.5653L6.90734 3.55683L6.90891 3.55213L6.91096 3.54587L6.91264 3.5406L6.91398 3.53626C6.9431 3.44904 6.95261 3.42185 6.96127 3.40032C7.09636 3.06428 7.41292 2.83611 7.77444 2.81422C7.79863 2.81275 7.82829 2.8125 7.93582 2.8125H10.0641C10.1717 2.8125 10.2013 2.81275 10.2255 2.81422C10.587 2.83611 10.9036 3.06428 11.0387 3.40032C11.0472 3.42153 11.0563 3.44773 11.0858 3.53624L11.0871 3.54053L11.0888 3.54584L11.0909 3.5521L11.0924 3.5568L11.0953 3.56525L11.0985 3.57441L11.0998 3.57817L11.1025 3.58561L11.1059 3.59453L11.1096 3.60354L11.1126 3.61087L11.1138 3.61358C11.132 3.65976 11.152 3.70525 11.1736 3.75L12.63 3.75013C12.6076 3.735 12.5852 3.71893 12.5628 3.70192C12.362 3.54904 12.2186 3.35769 12.156 3.18941L12.1538 3.1826C12.1269 3.10185 12.1059 3.03895 12.0825 2.98069C11.7853 2.24141 11.0888 1.73944 10.2935 1.69128C10.2308 1.68748 10.1646 1.68749 10.0794 1.6875H7.92051Z"
              fill="currentColor"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M12.8943 3.75H5.10574C3.84021 3.75 3.20744 3.75 2.72451 3.99729C2.30432 4.21244 1.96244 4.55432 1.74729 4.97451C1.5 5.45744 1.5 6.09021 1.5 7.35574C1.5 7.67747 1.5 7.83833 1.55502 7.97395C1.60307 8.09238 1.68059 8.19657 1.78022 8.27662C1.89431 8.36829 2.04839 8.41452 2.35655 8.50696L6.375 9.7125V10.622C6.375 11.1962 6.71954 11.7256 7.26512 11.9472L7.68519 12.1179C8.52891 12.4607 9.47109 12.4607 10.3148 12.1179L10.7349 11.9472C11.2805 11.7256 11.625 11.1962 11.625 10.622V9.7125L15.6435 8.50696C15.9516 8.41452 16.1057 8.36829 16.2198 8.27662C16.3194 8.19657 16.3969 8.09238 16.445 7.97395C16.5 7.83833 16.5 7.67747 16.5 7.35574C16.5 6.09021 16.5 5.45744 16.2527 4.97451C16.0376 4.55432 15.6957 4.21244 15.2755 3.99729C14.7926 3.75 14.1598 3.75 12.8943 3.75ZM10.2 9H7.8C7.63431 9 7.5 9.13643 7.5 9.30472V10.622C7.5 10.7466 7.57469 10.8587 7.68858 10.905L8.10866 11.0756C8.68085 11.3081 9.31915 11.3081 9.89134 11.0756L10.3114 10.905C10.4253 10.8587 10.5 10.7466 10.5 10.622V9.30472C10.5 9.13643 10.3657 9 10.2 9Z"
              fill="currentColor"
            />
            <path
              opacity="0.3"
              d="M2.25 8.47491C2.28334 8.48502 2.31879 8.49566 2.35655 8.50698L6.375 9.71252V10.6221C6.375 11.1962 6.71954 11.7256 7.26512 11.9472L7.68519 12.1179C8.52891 12.4607 9.47109 12.4607 10.3148 12.1179L10.7349 11.9472C11.2805 11.7256 11.625 11.1962 11.625 10.6221V9.71252L15.6435 8.50698C15.6812 8.49566 15.7166 8.48503 15.75 8.47493V9.22497C15.7493 11.9814 15.7238 14.766 14.7615 15.6214C13.773 16.5001 12.182 16.5001 8.99998 16.5001C5.818 16.5001 4.22701 16.5001 3.2385 15.6214C2.27617 14.766 2.25068 11.9814 2.25 9.22497V8.47491Z"
              fill="currentColor"
            />
          </g>
          <defs>
            <clipPath id="clip0_1087_19421">
              <rect width="18" height="18" fill="white" />
            </clipPath>
          </defs>
        </svg>

        <span class="nav-link">Rejected</span>
      </li>

      <!-- Empty 6th tab for spacing -->
      <li class="nav-item">
        <span class="nav-link" style="visibility: hidden">&nbsp;</span>
      </li>
    </ul>

    <app-table
      [data]="applicant"
      [isLoading]="applicantsLoading"
      [totalItems]="totalItems"
      [itemsPerPage]="itemsPerPage"
      [currentPage]="currentPage"
      (pageChange)="onPageChange($event)"
      (itemsPerPageChange)="onItemsPerPageChange($event)"
      [columnsCount]="5"
      [headerTemplate]="applicantTableHeader"
      [rowTemplate]="applicantTableRow"
      [emptyTemplate]="noApplicants"
    ></app-table>

    <ng-template #applicantTableHeader>
      <th (click)="sortBy('name')" style="cursor: pointer">
        <div class="d-flex align-items-center justify-content-between">
          <span>Name</span>
          @if (sortDirection === 'desc') {
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
          >
            <g
              fill="none"
              stroke="#DDE3EB"
              stroke-linecap="round"
              stroke-width="1.5"
            >
              <path d="M4 8h9m-7 5h7m-5 5h5" />
              <path stroke-linejoin="round" d="M17 20V4l3 4" />
            </g>
          </svg>
          } @if (sortDirection === 'asc') {
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
          >
            <path
              fill="#DDE3EB"
              fill-rule="evenodd"
              d="M17 3.25a.75.75 0 0 1 .75.75v13.75l1.65-2.2a.75.75 0 1 1 1.2.9l-3 4a.75.75 0 0 1-1.35-.45V4a.75.75 0 0 1 .75-.75M7.25 6A.75.75 0 0 1 8 5.25h5a.75.75 0 0 1 0 1.5H8A.75.75 0 0 1 7.25 6m-2 5a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75m-2 5a.75.75 0 0 1 .75-.75h9a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.75-.75"
              clip-rule="evenodd"
            />
          </svg>
          }
        </div>
      </th>

      <th>Phone number</th>
      <th>Email</th>
      <th>Status</th>
      <th>Action</th>
    </ng-template>

    <ng-template #applicantTableRow let-application let-i="index">
      <td>
        <span class="d-block text-gray-sm">{{
          application.id.toString().padStart(4, "0")
        }}</span>
        <span class="d-block text-truncate" style="max-width: 200px">
          {{ application.name }}
        </span>
      </td>
      <td>{{ application.phoneNumber }}</td>
      <td>{{ application.email }}</td>
      <td>
        <span class="d-block text-gray-sm">{{ application.status }}</span>
        <span class="d-block text-truncate" style="max-width: 200px">
          {{ application.statusAt | date : "dd/MM/yyyy h:mm a" }}
        </span>
      </td>
      <td>
        <a
          class="edit-btn h-100 d-flex align-items-center gap-1 w-auto me-2"
          [routerLink]="[
            '/job-openings/view-applicant-details',
            application.applicationId
          ]"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="22"
            height="22"
            viewBox="0 0 24 24"
          >
            <g fill="none" stroke="currentColor" stroke-width="1.5">
              <path
                d="M3.275 15.296C2.425 14.192 2 13.639 2 12c0-1.64.425-2.191 1.275-3.296C4.972 6.5 7.818 4 12 4s7.028 2.5 8.725 4.704C21.575 9.81 22 10.361 22 12c0 1.64-.425 2.191-1.275 3.296C19.028 17.5 16.182 20 12 20s-7.028-2.5-8.725-4.704Z"
              />
              <path d="M15 12a3 3 0 1 1-6 0a3 3 0 0 1 6 0Z" />
            </g>
          </svg>
          <span>View</span>
        </a>
      </td>
    </ng-template>

    <ng-template #noApplicants>
      <tr>
        <td colspan="5" class="text-center py-5">
          <div
            class="d-flex flex-column align-items-center justify-content-center"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="80"
              height="80"
              viewBox="0 0 24 24"
              class="mb-3"
            >
              <g fill="none" stroke="#9CA3AF" stroke-width="1.5">
                <circle cx="12" cy="6" r="4" />
                <path
                  d="M20 17.5c0 2.485 0 4.5-8 4.5s-8-2.015-8-4.5S7.582 13 12 13s8 2.015 8 4.5Z"
                  opacity="0.5"
                />
              </g>
            </svg>
            <h5 class="text-muted mb-2">No Applicants Found</h5>
            <p class="text-muted text-center mb-0">
              There are no applicants in this category yet.
            </p>
          </div>
        </td>
      </tr>
    </ng-template>
  </div>
</div>

<!-- Pause confirmation popup -->
<app-popup
  [title]="'Pause Job Opening'"
  [paragraph1]="'Are you sure you want to pause this job opening?'"
  [paragraph2]="
    'The job opening will no longer be visible to applicants until you make it live again.'
  "
  [isOpen]="isPauseModalOpen"
  (close)="closePauseModal()"
>
  <button
    modal-btn-left
    class="btn btn-lg btn-warning w-100"
    (click)="confirmPause()"
  >
    Confirm Pause
  </button>
  <button
    modal-btn-right
    class="btn btn-lg btn-outline-dark border-0 w-100"
    (click)="closePauseModal()"
  >
    Cancel
  </button>
</app-popup>

<!-- Make Live confirmation popup -->
<app-popup
  [title]="'Make Job Opening Live'"
  [paragraph1]="'Are you sure you want to make this job opening live?'"
  [paragraph2]="
    'The job opening will be visible to applicants and they will be able to apply.'
  "
  [isOpen]="isMakeLiveModalOpen"
  (close)="closeMakeLiveModal()"
>
  <button
    modal-btn-left
    class="btn btn-lg btn-success w-100"
    (click)="confirmMakeLive()"
  >
    Confirm Make Live
  </button>
  <button
    modal-btn-right
    class="btn btn-lg btn-outline-dark border-0 w-100"
    (click)="closeMakeLiveModal()"
  >
    Cancel
  </button>
</app-popup>
