<!-- start page header -->
<app-page-header [breadcrumbs]="[
    { label: 'Recruitment', link: '/calendar' },
    { label: 'Job Openings', link: '/job-openings' },
    {  label: 'Applicants'}
  ]" title="Opening 231123 - Applicants" create="16/07/2025" update="16/07/2025">
  <button class="btn btn-lg btn-primary">
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
      <g fill="none" stroke="currentColor" stroke-width="1.5">
        <path
          d="M6 11c0-2.828 0-4.243.879-5.121C7.757 5 9.172 5 12 5h3c2.828 0 4.243 0 5.121.879C21 6.757 21 8.172 21 11v5c0 2.828 0 4.243-.879 5.121C19.243 22 17.828 22 15 22h-3c-2.828 0-4.243 0-5.121-.879C6 20.243 6 18.828 6 16z" />
          <path d="M6 19a3 3 0 0 1-3-3v-6c0-3.771 0-5.657 1.172-6.828S7.229 2 11 2h4a3 3 0 0 1 3 3" />
        </g>
      </svg>
      <span>Duplicate</span>
    </button>

    <button class="btn btn-lg btn-outline-warning">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22"
        viewBox="0 0 24 24">
        <path fill="currentColor" fill-rule="evenodd"
          d="M12 2.75a9.25 9.25 0 1 0 0 18.5a9.25 9.25 0 0 0 0-18.5M1.25 12C1.25 6.063 6.063 1.25 12 1.25S22.75 6.063 22.75 12S17.937 22.75 12 22.75S1.25 17.937 1.25 12m8.228-4.75h.044c.214 0 .41 0 .576.011c.178.012.373.04.572.122c.428.178.77.519.947.947c.082.199.11.394.122.572c.011.165.011.362.011.576v5.044c0 .214 0 .41-.011.576c-.012.178-.04.373-.122.572a1.75 1.75 0 0 1-.947.947c-.199.082-.394.11-.572.122c-.165.011-.362.011-.576.011h-.044c-.214 0-.41 0-.576-.011a1.8 1.8 0 0 1-.572-.122a1.75 1.75 0 0 1-.947-.947a1.8 1.8 0 0 1-.122-.572c-.011-.165-.011-.362-.011-.576V9.478c0-.214 0-.41.011-.576c.012-.178.04-.373.122-.572a1.75 1.75 0 0 1 .947-.947c.199-.082.394-.11.572-.122c.165-.011.362-.011.576-.011m-.577 1.52a.25.25 0 0 0-.13.131a1 1 0 0 0-.013.103a8 8 0 0 0-.008.496v5c0 .243 0 .388.008.496c.004.067.01.095.012.103a.25.25 0 0 0 .131.13a1 1 0 0 0 .103.013c.108.008.253.008.496.008s.388 0 .496-.008a1 1 0 0 0 .103-.012a.25.25 0 0 0 .13-.131a1 1 0 0 0 .013-.103c.008-.108.008-.253.008-.496v-5c0-.243 0-.388-.008-.496a1 1 0 0 0-.012-.103a.25.25 0 0 0-.131-.13a1 1 0 0 0-.103-.013A8 8 0 0 0 9.5 8.75c-.243 0-.388 0-.496.008a1 1 0 0 0-.103.012m5.577-1.52h.044c.214 0 .41 0 .576.011c.178.012.373.04.572.122c.429.178.77.519.947.947c.082.199.11.394.122.572c.011.165.011.362.011.576v5.044c0 .214 0 .41-.011.576c-.012.178-.04.373-.122.572a1.75 1.75 0 0 1-.947.947c-.199.082-.394.11-.572.122c-.165.011-.362.011-.576.011h-.044c-.214 0-.41 0-.576-.011a1.8 1.8 0 0 1-.572-.122a1.75 1.75 0 0 1-.947-.947a1.8 1.8 0 0 1-.122-.572c-.011-.165-.011-.362-.011-.576V9.478c0-.214 0-.41.011-.576c.012-.178.04-.373.122-.572a1.75 1.75 0 0 1 .947-.947c.199-.082.394-.11.572-.122c.165-.011.362-.011.576-.011m-.577 1.52a.25.25 0 0 0-.13.131a1 1 0 0 0-.013.103a8 8 0 0 0-.008.496v5c0 .243 0 .388.008.496c.004.067.01.095.012.103a.25.25 0 0 0 .131.13a1 1 0 0 0 .103.013c.108.008.253.008.496.008s.388 0 .496-.008a1 1 0 0 0 .103-.012a.25.25 0 0 0 .13-.131a1 1 0 0 0 .013-.103c.008-.108.008-.253.008-.496v-5c0-.243 0-.388-.008-.496a1 1 0 0 0-.012-.103a.25.25 0 0 0-.131-.13a1 1 0 0 0-.103-.013a8 8 0 0 0-.496-.008c-.243 0-.388 0-.496.008a1 1 0 0 0-.103.012"
          clip-rule="evenodd" />
        </svg>
        <span>Pause</span>
      </button>

    </app-page-header>
    <!-- page content -->
    <div class="content-hug d-flex flex-column gap-4">

      <!-- 2 cards -->
      <div class="row">
        <div class="col-lg-8">
          <div class="content-box d-flex flex-column gap-3 w-100">
            <div class="d-flex align-items-center justify-content-between">
              <h2>Main Information</h2>
              <button (click)="toggleText()"
                class="edit-btn d-flex align-items-center justify-content-center gap-1">
                @if (isExpanded) {
                  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22"
                    viewBox="0 0 24 24">
                    <path fill="currentColor" fill-rule="evenodd"
                      d="M4.43 8.512a.75.75 0 0 1 1.058-.081L12 14.012l6.512-5.581a.75.75 0 0 1 .976 1.138l-7 6a.75.75 0 0 1-.976 0l-7-6a.75.75 0 0 1-.081-1.057"
                      clip-rule="evenodd" />
                    </svg>
                  }
                  @if (!isExpanded) {
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22"
                      viewBox="0 0 24 24">
                      <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                        stroke-width="1.5" d="m19 15l-7-6l-7 6" />
                      </svg>
                    }
                    <span>{{ isExpanded ? 'Show' : 'Hide' }}</span>
                  </button>
                </div>
                @if (!isExpanded) {
                  <div class="d-flex flex-column gap-3">
                    <div class="info">
                      <h6>Opening ID</h6>
                      <span>0101</span>
                    </div>
                    <div class="info">
                      <h6>Opening Name</h6>
                      <span>UI/UX designer - Cairo Branch</span>
                    </div>
                    <div class="info">
                      <h6>Branch</h6>
                      <span>Cairo</span>
                    </div>
                    <div class="info">
                      <h6>CV Limit</h6>
                      <span>200</span>
                    </div>
                    <div class="info">
                      <h6>Time Limit</h6>
                      <span>7 Days</span>
                    </div>
                  </div>
                }

              </div>
            </div>
            <div class="col-lg-4">
              <div class="content-box d-flex flex-column gap-3 w-100">
                <div class="d-flex align-items-center justify-content-between">
                  <h2>Job details</h2>
                  <a class="view-btn h-100 d-flex align-items-center gap-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
                      <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="1.5">
                        <path stroke-linejoin="round" d="m13 11l9-9m0 0h-5.344M22 2v5.344" />
                        <path
                          d="M22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12s0-7.071 1.464-8.536C4.93 2 7.286 2 12 2" />
                        </g>
                      </svg>
                      <span>View</span>
                    </a>
                  </div>
                  @if (!isExpanded) {
                    <div class="d-flex flex-column gap-3">
                      <div class="info">
                        <h6>Job ID</h6>
                        <span>0020</span>
                      </div>
                      <div class="info">
                        <h6>Job title</h6>
                        <span>UI/UX designer</span>
                      </div>
                      <div class="info">
                        <h6>Department</h6>
                        <span>UI/UX</span>
                      </div>
                      <div class="info">
                        <h6>Job type</h6>
                        <span>Full time</span>
                      </div>
                      <div class="info">
                        <h6>Average Salary</h6>
                        <span>14.000-18.000</span>
                      </div>
                    </div>
                  }

                </div>
              </div>

            </div>

            <div class="content-box">
              <h2 class="mb-3">Applicants</h2>
              <!-- start search and filter -->
              <div
                class="d-flex flex-column flex-lg-row align-items-start align-lg-items-center justify-content-between gap-2 mb-3">
                <div class="d-flex align-items-center gap-2 w-100 w-lg-50">
                  <!-- Search input -->
                  <div data-mdb-input-init class="form-outline w-75">
                    <input type="text" class="form-control" placeholder="Search" />
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                      <g fill="none" stroke-width="1.5">
                        <circle cx="11.5" cy="11.5" r="9.5" />
                        <path stroke-linecap="round" d="M18.5 18.5L22 22" />
                      </g>
                    </svg>
                  </div>


                </div>
                <div class="input w-25">
                  <div class="d-flex align-items-center gap-4">
                    <div class="form-outline w-100 position-relative custom-date-wrapper">
                      <select name="" id="status" class="form-select">
                        <option value="" selected disabled hidden>All Applicants</option>
                        <option value="all">Any</option>
                        <option value="true">Active</option>
                        <option value="false">Not Active</option>
                      </select>
                    </div>
                  </div>
                </div>


              </div>

              <app-table [data]="applicant" [itemsPerPage]="applicant.length" [columnsCount]="5"
              [headerTemplate]="applicantTableHeader" [rowTemplate]="applicantTableRow"></app-table>

              <ng-template #applicantTableHeader>
                <th (click)="sortBy('name')" style="cursor: pointer;">
                  <div class="d-flex align-items-center justify-content-between">
                    <span>Name</span>
                    @if (sortDirection === 'desc') {
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                        viewBox="0 0 24 24">
                        <g fill="none" stroke="#DDE3EB" stroke-linecap="round" stroke-width="1.5">
                          <path d="M4 8h9m-7 5h7m-5 5h5" />
                          <path stroke-linejoin="round" d="M17 20V4l3 4" />
                        </g>
                      </svg>
                    }
                    @if (sortDirection === 'asc') {
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                        viewBox="0 0 24 24">
                        <path fill="#DDE3EB" fill-rule="evenodd"
                          d="M17 3.25a.75.75 0 0 1 .75.75v13.75l1.65-2.2a.75.75 0 1 1 1.2.9l-3 4a.75.75 0 0 1-1.35-.45V4a.75.75 0 0 1 .75-.75M7.25 6A.75.75 0 0 1 8 5.25h5a.75.75 0 0 1 0 1.5H8A.75.75 0 0 1 7.25 6m-2 5a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75m-2 5a.75.75 0 0 1 .75-.75h9a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.75-.75"
                          clip-rule="evenodd" />
                        </svg>
                      }
                    </div>
                  </th>

                  <th>Phone number</th>
                  <th>Email</th>
                  <th>Status</th>
                  <th>Action</th>

                </ng-template>

                <ng-template #applicantTableRow let-application let-i="index">
                  <td>
                    <span class="d-block text-gray-sm">{{ application.id.toString().padStart(4, '0') }}</span>
                    <span class="d-block text-truncate" style="max-width: 200px;">
                      {{ application.name }}
                    </span>
                  </td>
                  <td>{{application.phoneNumber}}</td>
                  <td>{{application.email}}</td>
                  <td>
                    <span class="d-block text-gray-sm">{{ application.status }}</span>
                    <span class="d-block text-truncate" style="max-width: 200px;">
                      {{ application.statusAt }}
                    </span>
                  </td>
                  <td>
                    <a class="edit-btn h-100 d-flex align-items-center gap-1 w-auto me-2" [routerLink]="['/job-openings/view-applicant-details', application.id]">
                      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
                        <g fill="none" stroke="currentColor" stroke-width="1.5">
                          <path
                            d="M3.275 15.296C2.425 14.192 2 13.639 2 12c0-1.64.425-2.191 1.275-3.296C4.972 6.5 7.818 4 12 4s7.028 2.5 8.725 4.704C21.575 9.81 22 10.361 22 12c0 1.64-.425 2.191-1.275 3.296C19.028 17.5 16.182 20 12 20s-7.028-2.5-8.725-4.704Z" />
                            <path d="M15 12a3 3 0 1 1-6 0a3 3 0 0 1 6 0Z" />
                          </g>
                        </svg>
                        <span>View</span>
                      </a>
                    </td>
                  </ng-template>
                </div>



              </div>