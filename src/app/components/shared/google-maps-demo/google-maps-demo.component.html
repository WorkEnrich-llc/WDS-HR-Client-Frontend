<div class="google-maps-demo">
  <div class="demo-header">
    <h2>Google Maps Integration Demo</h2>
    <p>Interactive map with markers, click events, and location features</p>
  </div>

  <!-- Controls Panel -->
  <div class="controls-panel">
    <div class="row">
      <div class="col-md-6">
        <div class="control-group">
          <h5>Quick Actions</h5>
          <button class="btn btn-primary me-2" (click)="getCurrentLocation()">
            <i class="fas fa-location-arrow"></i> Get My Location
          </button>
          <button class="btn btn-success me-2" (click)="centerOnLocation(25.2048, 55.2708)">
            <i class="fas fa-building"></i> Dubai Center
          </button>
          <button class="btn btn-warning me-2" (click)="centerOnLocation(25.0761, 55.1094)">
            <i class="fas fa-anchor"></i> Dubai Marina
          </button>
        </div>
      </div>

      <div class="col-md-6">
        <div class="control-group">
          <h5>Search Location</h5>
          <div class="input-group">
            <input
              type="text"
              class="form-control"
              placeholder="Enter address or place name"
              #searchInput
              (keyup.enter)="searchPlace(searchInput.value)">
              <button class="btn btn-outline-secondary" (click)="searchPlace(searchInput.value)">
                <i class="fas fa-search"></i> Search
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Map Container -->
    <div class="map-container">
      <google-map
        height="500px"
        width="100%"
        [center]="center"
        [zoom]="zoom"
        [options]="mapOptions"
        (mapClick)="onMapClick($event)">

        <!-- Markers -->
        @for (marker of markers; track marker; let i = $index) {
          <map-marker
            [position]="marker"
            [options]="markerOptions"
            (mapClick)="onMarkerClick(marker, i)">
            <!-- Info Window -->
            <map-info-window [options]="infoWindowOptions">
              <div class="info-window-content">
                <h6>Location {{ i + 1 }}</h6>
                <p>{{ infoWindowContent }}</p>
                <p><strong>Coordinates:</strong><br>
                Lat: {{ marker.lat.toFixed(6) }}<br>
                Lng: {{ marker.lng.toFixed(6) }}
              </p>
              <button class="btn btn-sm btn-danger" (click)="removeMarker(i)">
                <i class="fas fa-trash"></i> Remove Marker
              </button>
            </div>
          </map-info-window>
        </map-marker>
      }
    </google-map>
  </div>

  <!-- Map Information Panel -->
  <div class="info-panel">
    <div class="row">
      <div class="col-md-6">
        <div class="info-card">
          <h5><i class="fas fa-map-marked-alt"></i> Map Center</h5>
          <p>
            <strong>Latitude:</strong> {{ center.lat.toFixed(6) }}<br>
            <strong>Longitude:</strong> {{ center.lng.toFixed(6) }}<br>
            <strong>Zoom Level:</strong> {{ zoom }}
          </p>
        </div>
      </div>

      <div class="col-md-6">
        <div class="info-card">
          <h5><i class="fas fa-map-pin"></i> Markers ({{ markers.length }})</h5>
          <div class="markers-list">
            @for (marker of markers; track marker; let i = $index) {
              <div class="marker-item">
                <span class="marker-number">{{ i + 1 }}</span>
                <span class="marker-coords">
                  {{ marker.lat.toFixed(4) }}, {{ marker.lng.toFixed(4) }}
                </span>
                <button class="btn btn-sm btn-outline-danger" (click)="removeMarker(i)">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            }
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Instructions -->
  <div class="instructions">
    <h5><i class="fas fa-info-circle"></i> How to Use</h5>
    <ul>
      <li><strong>Click on the map</strong> to add new markers</li>
      <li><strong>Click on markers</strong> to view information</li>
      <li><strong>Use control buttons</strong> to navigate to predefined locations</li>
      <li><strong>Search for places</strong> using the search box</li>
      <li><strong>Get your current location</strong> using the location button</li>
      <li><strong>Remove markers</strong> by clicking the trash icon in info windows or marker list</li>
    </ul>
  </div>
</div>
