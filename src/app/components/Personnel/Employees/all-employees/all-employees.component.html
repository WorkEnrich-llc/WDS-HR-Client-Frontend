<!-- start page header -->
<app-page-header [breadcrumbs]="[
    { label: 'Personnel', link: '/dashboard' },
    { label: 'Employees' }
  ]" title="All Employees">
</app-page-header>
<!-- end page header -->

<!-- start page content -->
<div class="content-hug">
  <div class="content-box d-flex flex-column gap-3">
    <!-- start search and filter -->
    <div class="d-flex flex-column flex-lg-row align-items-start align-lg-items-center justify-content-between gap-2">
      <div class="d-flex align-items-center gap-2 w-100 w-lg-50">
        <!-- Search input -->
        <div data-mdb-input-init class="form-outline w-75">
          <input type="text" class="form-control" [(ngModel)]="searchTerm" (ngModelChange)="onSearchChange()"
            placeholder="Search" />
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <g fill="none" stroke-width="1.5">
              <circle cx="11.5" cy="11.5" r="9.5" />
              <path stroke-linecap="round" d="M18.5 18.5L22 22" />
            </g>
          </svg>
        </div>

        <!-- Filter button -->
        <button class="btn btn-lg btn-outline-primary" (click)="openFilterOverlay()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
            <path fill="none" stroke-width="1.5"
              d="M19 3H5c-1.414 0-2.121 0-2.56.412S2 4.488 2 5.815v.69c0 1.037 0 1.556.26 1.986s.733.698 1.682 1.232l2.913 1.64c.636.358.955.537 1.183.735c.474.411.766.895.898 1.49c.064.284.064.618.064 1.285v2.67c0 .909 0 1.364.252 1.718c.252.355.7.53 1.594.88c1.879.734 2.818 1.101 3.486.683S15 19.452 15 17.542v-2.67c0-.666 0-1 .064-1.285a2.68 2.68 0 0 1 .899-1.49c.227-.197.546-.376 1.182-.735l2.913-1.64c.948-.533 1.423-.8 1.682-1.23c.26-.43.26-.95.26-1.988v-.69c0-1.326 0-1.99-.44-2.402C21.122 3 20.415 3 19 3Z" />
          </svg>
          <span>Filter</span>
        </button>
      </div>


      <div class="d-flex align-items-center">
        <!-- Grid/List switch (left of New Employee) -->
        <div class="switchs d-flex me-2">
          <a type="button" class="dispaly-switch" [class.active]="selectedView === 'grid'" (click)="setView('grid')">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path fill="currentColor" fill-rule="evenodd"
                d="M6.448 1.75c-.898 0-1.648 0-2.242.08c-.628.084-1.195.27-1.65.725c-.456.456-.642 1.023-.726 1.65c-.08.595-.08 1.345-.08 2.243v.104c0 .898 0 1.648.08 2.242c.084.628.27 1.195.725 1.65c.456.456 1.023.642 1.65.726c.595.08 1.345.08 2.243.08h.104c.898 0 1.648 0 2.242-.08c.628-.084 1.195-.27 1.65-.726c.456-.455.642-1.022.726-1.65c.08-.594.08-1.344.08-2.242v-.104c0-.898 0-1.648-.08-2.242c-.084-.628-.27-1.195-.726-1.65c-.455-.456-1.022-.642-1.65-.726c-.594-.08-1.344-.08-2.242-.08zM3.616 3.616c.13-.13.328-.237.79-.3c.482-.064 1.13-.066 2.094-.066s1.612.002 2.095.067c.461.062.659.169.789.3s.237.327.3.788c.064.483.066 1.131.066 2.095s-.002 1.612-.067 2.095c-.062.461-.169.659-.3.789s-.327.237-.788.3c-.483.064-1.131.066-2.095.066s-1.612-.002-2.095-.067c-.461-.062-.659-.169-.789-.3s-.237-.327-.3-.788C3.253 8.112 3.25 7.464 3.25 6.5s.002-1.612.067-2.095c.062-.461.169-.659.3-.789m13.831 9.134c-.899 0-1.648 0-2.242.08c-.628.084-1.195.27-1.65.726c-.456.455-.642 1.022-.726 1.65c-.08.594-.08 1.343-.08 2.242v.104c0 .899 0 1.648.08 2.242c.084.628.27 1.195.726 1.65c.455.456 1.022.642 1.65.726c.594.08 1.343.08 2.242.08h.104c.898 0 1.648 0 2.242-.08c.628-.084 1.195-.27 1.65-.726c.456-.455.642-1.022.726-1.65c.08-.594.08-1.343.08-2.242v-.104c0-.898 0-1.648-.08-2.242c-.084-.628-.27-1.195-.726-1.65c-.455-.456-1.022-.642-1.65-.726c-.594-.08-1.343-.08-2.242-.08zm-2.832 1.866c.13-.13.328-.237.79-.3c.482-.064 1.13-.066 2.094-.066s1.612.002 2.095.066c.461.063.659.17.789.3s.237.328.3.79c.064.482.066 1.13.066 2.094s-.002 1.612-.067 2.095c-.062.461-.169.659-.3.789s-.327.237-.788.3c-.483.064-1.131.066-2.095.066s-1.612-.002-2.095-.067c-.461-.062-.659-.169-.789-.3s-.237-.327-.3-.788c-.064-.483-.066-1.131-.066-2.095s.002-1.612.066-2.095c.063-.461.17-.659.3-.789M6.448 12.75h.104c.898 0 1.648 0 2.242.08c.628.084 1.195.27 1.65.726c.456.455.642 1.022.726 1.65c.08.594.08 1.343.08 2.242v.104c0 .899 0 1.648-.08 2.242c-.084.628-.27 1.195-.726 1.65c-.455.456-1.022.642-1.65.726c-.594.08-1.343.08-2.242.08h-.104c-.898 0-1.648 0-2.242-.08c-.628-.084-1.195-.27-1.65-.726c-.456-.455-.642-1.022-.726-1.65c-.08-.594-.08-1.343-.08-2.242v-.104c0-.899 0-1.648.08-2.242c.084-.628.27-1.195.725-1.65c.456-.456 1.023-.642 1.65-.726c.595-.08 1.345-.08 2.243-.08m-2.043 1.566c-.461.063-.659.17-.789.3s-.237.328-.3.79c-.064.482-.066 1.13-.066 2.094s.002 1.612.067 2.095c.062.461.169.659.3.789s.327.237.788.3c.483.064 1.131.066 2.095.066s1.612-.002 2.095-.067c.461-.062.659-.169.789-.3s.237-.327.3-.788c.064-.483.066-1.131.066-2.095s-.002-1.612-.067-2.095c-.062-.461-.169-.659-.3-.789s-.327-.237-.788-.3c-.483-.064-1.131-.066-2.095-.066s-1.612.002-2.095.066M17.448 1.75c-.899 0-1.648 0-2.242.08c-.628.084-1.195.27-1.65.725c-.456.456-.642 1.023-.726 1.65c-.08.595-.08 1.345-.08 2.243v.104c0 .898 0 1.648.08 2.242c.084.628.27 1.195.726 1.65c.455.456 1.022.642 1.65.726c.594.08 1.343.08 2.242.08h.104c.899 0 1.648 0 2.242-.08c.628-.084 1.195-.27 1.65-.726c.456-.455.642-1.022.726-1.65c.08-.594.08-1.344.08-2.242v-.104c0-.898 0-1.648-.08-2.242c-.084-.628-.27-1.195-.726-1.65c-.455-.456-1.022-.642-1.65-.726c-.594-.08-1.343-.08-2.242-.08zm-2.832 1.866c.13-.13.328-.237.79-.3c.482-.064 1.13-.066 2.094-.066s1.612.002 2.095.067c.461.062.659.169.789.3s.237.327.3.788c.064.483.066 1.131.066 2.095s-.002 1.612-.067 2.095c-.062.461-.169.659-.3.789s-.327.237-.788.3c-.483.064-1.131.066-2.095.066s-1.612-.002-2.095-.067c-.461-.062-.659-.169-.789-.3s-.237-.327-.3-.788c-.064-.483-.066-1.131-.066-2.095s.002-1.612.066-2.095c.063-.461.17-.659.3-.789"
                clip-rule="evenodd" />
            </svg>
            <span>Grid</span>
          </a>
          <a type="button" class="dispaly-switch" [class.active]="selectedView === 'list'" (click)="setView('list')">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path fill="currentColor" fill-rule="evenodd"
                d="M3.25 7A.75.75 0 0 1 4 6.25h16a.75.75 0 0 1 0 1.5H4A.75.75 0 0 1 3.25 7m0 5a.75.75 0 0 1 .75-.75h11a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.75-.75m0 5a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.75-.75"
                clip-rule="evenodd" />
            </svg>
            <span>List</span>
          </a>
        </div>

        <!-- New Employee button -->
        <button class="btn btn-lg btn-primary" routerLink="/employees/create-employee">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
            <g fill="none" stroke="#ffffff" stroke-width="1.5">
              <circle cx="12" cy="12" r="10" />
              <path stroke-linecap="round" d="M15 12h-3m0 0H9m3 0V9m0 3v3" />
            </g>
          </svg>
          <span>New Employee</span>
        </button>
      </div>
    </div>


    <!-- Table/List View using @if -->
    @if (selectedView === 'list') {
    <app-table [isLoading]="loadData" [columnsCount]="8" [data]="filteredEmployees" [totalItems]="totalItems"
      [itemsPerPage]="itemsPerPage" [currentPage]="currentPage" (pageChange)="onPageChange($event)"
      (itemsPerPageChange)="onItemsPerPageChange($event)" [headerTemplate]="employeesTableHeader"
      [rowTemplate]="employeesTableRow" [emptyTemplate]="noEmployees"></app-table>
    }
    @if (selectedView === 'grid') {
    <div class="row g-4">
      @if (loadData) {
      @for (i of [].constructor(10); track $index) {
      <div class="col-12 col-md-6 col-lg-3 d-flex">
        <div
          class="content-hug w-100 d-flex flex-column align-items-center p-3 shadow-sm rounded bg-white position-relative"
          style="border-radius: 16px; min-height: 340px;">
          <div class="profile-hug mb-3"
            style="width: 90px; height: 90px; overflow: hidden; border-radius: 50%; background: #f5f5f5; display: flex; align-items: center; justify-content: center;">
            <div class="skeleton-loading" style="width: 90px; height: 90px; border-radius: 50%;"></div>
          </div>
          <div class="w-100 text-center">
            <div class="skeleton-loading mb-1" style="height: 24px; width: 80%; margin: 0 auto;"></div>
            <div class="skeleton-loading small mb-2" style="height: 16px; width: 60%; margin: 0 auto;"></div>
            <div class="mb-2">
              <div class="skeleton-loading" style="height: 32px; width: 100%; border-radius: 20px;"></div>
            </div>
            <div class="mb-2 text-center d-flex align-items-center justify-content-center gap-2">
              <div class="skeleton-loading" style="height: 24px; width: 100px;"></div>
            </div>
            <div class="mb-2 d-flex flex-column align-items-center justify-content-center gap-2">
              <div class="d-flex align-items-center justify-content-center gap-2">
                <div class="skeleton-loading" style="height: 16px; width: 120px;"></div>
              </div>
              <div>
                <div class="skeleton-loading" style="height: 16px; width: 100px;"></div>
              </div>
            </div>
          </div>
          <div class="mt-auto w-100 d-flex justify-content-center gap-2">
            <div class="skeleton-loading" style="height: 32px; width: 80px; border-radius: 4px;"></div>
          </div>
        </div>
      </div>
      }
      } @else {
      @for (employee of filteredEmployees; track employee.id) {
      <div class="col-12 col-md-6 col-lg-3 d-flex">
        <div
          class="content-hug w-100 d-flex flex-column align-items-center p-3 shadow-sm rounded bg-white position-relative"
          style="border-radius: 16px; min-height: 340px;">
          <div class="profile-hug mb-3"
            style="width: 90px; height: 90px; overflow: hidden; border-radius: 50%; background: #f5f5f5; display: flex; align-items: center; justify-content: center;">
            @if (employee.profileImage){
            <img [src]="employee.profileImage" alt="Profile Picture"
              (error)="handleImageError($event)"
              style="width: 100%; height: 100%; object-fit: cover;" />
            } @else {
            <img [src]="defaultImage" alt="Profile Picture"
              (error)="handleImageError($event)"
              style="width: 100%; height: 100%; object-fit: cover;" />
            }
          </div>
          <div class="w-100 text-center">
            <h5 class="mb-1 fw-bold">{{ employee.name || 'N/A' }}</h5>
            <div class="text-muted small mb-2">{{ employee.jobTitle || 'N/A' }}</div>
            <div class="mb-2">
              <span class="badge-branch px-3 py-2 d-inline-flex align-items-center rounded-pill shadow-sm"
                style="background: linear-gradient(90deg, #e3f2fd 0%, #bbdefb 100%); color: #1976d2; font-weight: 500; font-size: 0.95rem; border: none;">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                  style="margin-right: 6px;">
                  <path d="M6 3v12a3 3 0 0 0 3 3h6" stroke="#1976d2" stroke-width="1.5" stroke-linecap="round"
                    stroke-linejoin="round" />
                  <circle cx="6" cy="18" r="3" stroke="#1976d2" stroke-width="1.5" />
                  <circle cx="18" cy="18" r="3" stroke="#1976d2" stroke-width="1.5" />
                  <circle cx="6" cy="6" r="3" stroke="#1976d2" stroke-width="1.5" />
                </svg>
                {{ employee.branch || 'N/A' }}
              </span>
            </div>

            <div class="mb-2 text-center d-flex align-items-center justify-content-center gap-2">
              @if (employee.employeeStatus ==='New Joiner') {
              <span class="badge-newjoiner">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                  <g fill="none" stroke="currentColor" stroke-width="1.5">
                    <path
                      d="M2 12c0-3.771 0-5.657 1.172-6.828S6.229 4 10 4h4c3.771 0 5.657 0 6.828 1.172S22 8.229 22 12v2c0 3.771 0 5.657-1.172 6.828S17.771 22 14 22h-4c-3.771 0-5.657 0-6.828-1.172S2 17.771 2 14z" />
                    <path stroke-linecap="round" d="M7 4V2.5M17 4V2.5" />
                    <circle cx="16.5" cy="16.5" r="1.5" />
                    <path stroke-linecap="round" d="M2.5 9h19" />
                  </g>
                </svg>
                <span>New Joiner</span>
              </span>
              }
              @if (employee.employeeStatus ==='New Employee') {
              <span class="badge-newemployee">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                  <g fill="none" stroke="currentColor" stroke-width="1.5">
                    <path
                      d="M3 12c0 3.771 0 7.657 1.318 8.828C5.636 22 7.758 22 12 22s6.364 0 7.682-1.172S21 15.771 21 12" />
                    <path
                      d="m14.66 14.202l6.008-1.802c.595-.179.893-.268 1.082-.482a1 1 0 0 0 .1-.134c.15-.243.15-.553.15-1.175c0-2.45 0-3.675-.673-4.502a3 3 0 0 0-.434-.434C20.066 5 18.841 5 16.391 5H7.61c-2.45 0-3.675 0-4.502.673q-.24.195-.434.434C2 6.934 2 8.159 2 10.609c0 .622 0 .932.15 1.175q.045.07.1.134c.19.214.487.303 1.082.482l6.008 1.802M6.5 5c.823-.02 1.66-.545 1.94-1.32l.035-.103L8.5 3.5c.042-.127.064-.19.086-.246a2 2 0 0 1 1.735-1.25C10.38 2 10.448 2 10.58 2h2.838c.133 0 .2 0 .26.004a2 2 0 0 1 1.735 1.25c.023.056.044.12.086.246l.026.077c.018.053.026.08.035.103c.28.775 1.116 1.3 1.939 1.32" />
                    <path stroke-linecap="round"
                      d="M14 12.5h-4a.5.5 0 0 0-.5.5v2.162a.5.5 0 0 0 .314.464l.7.28a4 4 0 0 0 2.972 0l.7-.28a.5.5 0 0 0 .314-.464V13a.5.5 0 0 0-.5-.5Z" />
                  </g>
                </svg>
                <span>New Employee</span>
              </span>
              }
              @if (employee.employeeStatus ==='Employed') {
              <span class="badge-success">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                  <g fill="none" stroke="currentColor" stroke-width="1.5">
                    <path
                      d="M3 12c0 3.771 0 7.657 1.318 8.828C5.636 22 7.758 22 12 22s6.364 0 7.682-1.172S21 15.771 21 12" />
                    <path
                      d="m14.66 14.202l6.008-1.802c.595-.179.893-.268 1.082-.482a1 1 0 0 0 .1-.134c.15-.243.15-.553.15-1.175c0-2.45 0-3.675-.673-4.502a3 3 0 0 0-.434-.434C20.066 5 18.841 5 16.391 5H7.61c-2.45 0-3.675 0-4.502.673q-.24.195-.434.434C2 6.934 2 8.159 2 10.609c0 .622 0 .932.15 1.175q.045.07.1.134c.19.214.487.303 1.082.482l6.008 1.802M6.5 5c.823-.02 1.66-.545 1.94-1.32l.035-.103L8.5 3.5c.042-.127.064-.19.086-.246a2 2 0 0 1 1.735-1.25C10.38 2 10.448 2 10.58 2h2.838c.133 0 .2 0 .26.004a2 2 0 0 1 1.735 1.25c.023.056.044.12.086.246l.026.077c.018.053.026.08.035.103c.28.775 1.116 1.3 1.939 1.32" />
                    <path stroke-linecap="round"
                      d="M14 12.5h-4a.5.5 0 0 0-.5.5v2.162a.5.5 0 0 0 .314.464l.7.28a4 4 0 0 0 2.972 0l.7-.28a.5.5 0 0 0 .314-.464V13a.5.5 0 0 0-.5-.5Z" />
                  </g>
                </svg>
                <span>Employed</span>
              </span>
              }
              @if (employee.employeeStatus ==='Termination Pending') {
              <span class="badge-gray">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                  <g fill="none" stroke="currentColor" stroke-width="1.5">
                    <circle cx="12" cy="12" r="10" />
                    <path stroke-linecap="round" d="M12 7v5l3 3" />
                  </g>
                </svg>
                <span>Termination Pending</span>
              </span>
              }
              @if (employee.employeeStatus ==='Terminated') {
              <span class="badge-danger">
                <svg width="15" height="17" viewBox="0 0 15 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M7.3125 3.75C7.62316 3.75 7.875 4.00184 7.875 4.3125V8.8125C7.875 9.12316 7.62316 9.375 7.3125 9.375C7.00184 9.375 6.75 9.12316 6.75 8.8125V4.3125C6.75 4.00184 7.00184 3.75 7.3125 3.75Z"
                    fill="#E04F5F" />
                  <path
                    d="M8.0625 11.0625C8.0625 11.4767 7.72671 11.8125 7.3125 11.8125C6.89829 11.8125 6.5625 11.4767 6.5625 11.0625C6.5625 10.6483 6.89829 10.3125 7.3125 10.3125C7.72671 10.3125 8.0625 10.6483 8.0625 11.0625Z"
                    fill="#E04F5F" />
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M7.3125 0C6.78406 0 6.30139 0.145194 5.77394 0.390274C5.26356 0.627418 4.67279 0.977278 3.93343 1.41514L3.36861 1.74962C2.629 2.18762 2.03828 2.53743 1.58307 2.87208C1.11236 3.21813 0.751326 3.57233 0.490009 4.03659C0.229107 4.50011 0.111308 4.99571 0.0547917 5.5838C-1.06506e-05 6.15404 -5.87241e-06 6.85237 1.25078e-07 7.72948V8.39551C-5.87241e-06 9.27261 -1.0645e-05 9.97096 0.0547917 10.5412C0.111308 11.1293 0.229107 11.6249 0.490009 12.0884C0.751326 12.5527 1.11236 12.9069 1.58307 13.2529C2.03829 13.5876 2.629 13.9374 3.36861 14.3754L3.93345 14.7099C4.67278 15.1477 5.26358 15.4976 5.77394 15.7347C6.30139 15.9798 6.78406 16.125 7.3125 16.125C7.84094 16.125 8.32361 15.9798 8.85106 15.7347C9.36143 15.4976 9.9522 15.1477 10.6916 14.7099L11.2564 14.3754C11.996 13.9374 12.5867 13.5876 13.0419 13.2529C13.5126 12.9069 13.8737 12.5527 14.135 12.0884C14.3959 11.6249 14.5137 11.1293 14.5702 10.5412C14.625 9.97096 14.625 9.27264 14.625 8.39554V7.72952C14.625 6.85242 14.625 6.15404 14.5702 5.5838C14.5137 4.99571 14.3959 4.50011 14.135 4.03659C13.8737 3.57233 13.5126 3.21813 13.0419 2.87208C12.5867 2.53743 11.996 2.18762 11.2564 1.74964L10.6916 1.41514C9.9522 0.977276 9.36144 0.627417 8.85106 0.390274C8.32361 0.145194 7.84094 0 7.3125 0ZM4.48143 2.39808C5.25179 1.94188 5.79454 1.62121 6.24799 1.41052C6.69015 1.20507 7.00556 1.125 7.3125 1.125C7.61944 1.125 7.93485 1.20507 8.37701 1.41052C8.83046 1.62121 9.37321 1.94188 10.1436 2.39808L10.6582 2.70284C11.4284 3.15898 11.9707 3.48086 12.3756 3.7785C12.7701 4.0685 12.9983 4.3106 13.1546 4.58841C13.3114 4.86696 13.4025 5.19293 13.4504 5.69142C13.4994 6.20163 13.5 6.84602 13.5 7.75774V8.36726C13.5 9.27898 13.4994 9.92337 13.4504 10.4336C13.4025 10.9321 13.3114 11.258 13.1546 11.5366C12.9983 11.8144 12.7701 12.0565 12.3756 12.3465C11.9707 12.6441 11.4284 12.966 10.6582 13.4222L10.1436 13.7269C9.37321 14.1831 8.83046 14.5038 8.37701 14.7145C7.93485 14.9199 7.61944 15 7.3125 15C7.00556 15 6.69015 14.9199 6.24799 14.7145C5.79454 14.5038 5.25179 14.1831 4.48143 13.7269L3.96681 13.4222C3.19657 12.966 2.6543 12.6441 2.24943 12.3465C1.85495 12.0565 1.62675 11.8144 1.47038 11.5366C1.31359 11.258 1.22254 10.9321 1.17463 10.4336C1.1256 9.92337 1.125 9.27898 1.125 8.36726V7.75774C1.125 6.84602 1.1256 6.20163 1.17463 5.69142C1.22254 5.19292 1.31359 4.86696 1.47038 4.58841C1.62675 4.3106 1.85495 4.0685 2.24943 3.7785C2.6543 3.48086 3.19657 3.15898 3.96681 2.70284L4.48143 2.39808Z"
                    fill="#E04F5F" />
                </svg>
                <span>Terminated</span>
              </span>
              }
              @if (employee.employeeStatus ==='In Notice Period') {
              <span class="badge-warning">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                  <g fill="none" stroke="currentColor" stroke-width="1.5">
                    <circle cx="12" cy="12" r="10" />
                    <path stroke-linecap="round" d="M12 7v5l3 3" />
                  </g>
                </svg>
                <span>In Notice Period</span>
              </span>
              }
            </div>
            <div class="mb-2 d-flex flex-column align-items-center justify-content-center gap-2">
              <div class="d-flex align-items-center justify-content-center gap-2">
                <span class="text-muted small">{{ employee.email || 'N/A' }}</span>
                <button class="border-0 bg-transparent p-0 ms-2"
                  [class]="copiedEmailId === employee.id ? 'text-success' : 'edit-btn'"
                  (click)="copyEmail(employee.email, employee.id)"
                  [title]="copiedEmailId === employee.id ? 'Copied!' : 'Copy'">
                  @if (copiedEmailId !== employee.id) {
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                  </svg>
                  }
                  @if (copiedEmailId === employee.id) {
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20,6 9,17 4,12"></polyline>
                  </svg>
                  }
                </button>
              </div>

              <div>
                <span class="text-muted small">{{ employee.mobile || 'N/A' }}</span>
              </div>
            </div>

          </div>
          <div class="mt-auto w-100 d-flex justify-content-center gap-2">
            <button class="btn btn-outline-primary btn-sm" (click)="navigateToView(employee)">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
                <path fill="none" stroke="currentColor" stroke-width="1.5"
                  d="M2 12s3.818-7 10-7 10 7 10 7-3.818 7-10 7S2 12 2 12Z" />
                <circle cx="12" cy="12" r="3" fill="none" stroke="currentColor" stroke-width="1.5" />
              </svg>
              <span>View</span>
            </button>
          </div>
        </div>
      </div>
      }
      @if (filteredEmployees.length === 0) {
      <div class="col-12">
        <div class="text-center py-5 text-muted">
          <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="none" viewBox="0 0 24 24">
            <rect x="3" y="3" width="7" height="7" rx="2" fill="#e9ecef" />
            <rect x="14" y="3" width="7" height="7" rx="2" fill="#e9ecef" />
            <rect x="14" y="14" width="7" height="7" rx="2" fill="#e9ecef" />
            <rect x="3" y="14" width="7" height="7" rx="2" fill="#e9ecef" />
          </svg>
          <div class="mt-3">No employees found.</div>
        </div>
      </div>
      }
      @if (filteredEmployees.length > 0) {
      <div class="d-flex flex-column flex-lg-row justify-content-between align-items-center mt-4">
        <div class="d-flex align-items-center gap-2">
          <div class="text-gray-sm pe-3">
            Showing {{ (currentPage - 1) * itemsPerPage + 1 }}â€“
            {{
            (currentPage * itemsPerPage) > totalItems
            ? totalItems
            : (currentPage * itemsPerPage)
            }}
            from {{ totalItems }}
          </div>
          <div class="view-select d-flex align-items-center gap-2 custom-border-padding">
            View
            <select class="form-select form-select-md w-auto" [(ngModel)]="itemsPerPage"
              (ngModelChange)="onItemsPerPageChange($event)">
              @for (option of [5, 10, 25, 50]; track option) {
              <option [value]="option">
                {{ option }}
              </option>
              }
            </select>
          </div>
        </div>
        <div class="d-flex align-items-center justify-content-center gap-2">
          <button class="p-0 btn border-0" [disabled]="currentPage === 1" (click)="onPageChange(currentPage - 1)">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="m15 5l-6 7l6 7" />
            </svg>
          </button>
          <pagination-controls id="DEFAULT_PAGINATION_ID" (pageChange)="onPageChange($event)"></pagination-controls>
          <button class="p-0 btn border-0" [disabled]="currentPage >= totalPages"
            (click)="onPageChange(currentPage + 1)">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="m9 5l6 7l-6 7" />
            </svg>
          </button>
        </div>
      </div>
      }
      }

    </div>
    }

    <ng-template #employeesTableHeader>
      <th (click)="sortBy()" style="cursor: pointer" class="width-fix">
        <div class="d-flex align-items-center justify-content-between">
          <span>Full Name</span>
          @if (sortDirection === 'desc') {
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g fill="none" stroke="#DDE3EB" stroke-linecap="round" stroke-width="1.5">
              <path d="M4 8h9m-7 5h7m-5 5h5" />
              <path stroke-linejoin="round" d="M17 20V4l3 4" />
            </g>
          </svg>
          } @if (sortDirection === 'asc') {
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path fill="#DDE3EB" fill-rule="evenodd"
              d="M17 3.25a.75.75 0 0 1 .75.75v13.75l1.65-2.2a.75.75 0 1 1 1.2.9l-3 4a.75.75 0 0 1-1.35-.45V4a.75.75 0 0 1 .75-.75M7.25 6A.75.75 0 0 1 8 5.25h5a.75.75 0 0 1 0 1.5H8A.75.75 0 0 1 7.25 6m-2 5a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75m-2 5a.75.75 0 0 1 .75-.75h9a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.75-.75"
              clip-rule="evenodd" />
          </svg>
          }
        </div>
      </th>
      <th>Employee Status</th>
      <th>Account Status</th>
      <th>Job Title</th>
      <th>Branch</th>
      <th>Join Date</th>
      <th>End Contract</th>
      <th>Actions</th>
    </ng-template>
    <ng-template #employeesTableRow let-employee let-i="index">
      <td>
        <span class="d-block text-gray-sm">{{ employee?.code }}</span>
        <!-- <span class="d-block text-gray-sm">{{ employee.id.toString().padStart(4, '0') }}</span> -->
        <span [title]="employee.name" class="d-block text-truncate cursor-pointer" style="max-width: 300px">
          {{ employee.name }}
        </span>
      </td>
      <td>
        @if (employee.employeeStatus ==='New Joiner') {
        <span class="badge-newjoiner">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <g fill="none" stroke="currentColor" stroke-width="1.5">
              <path
                d="M2 12c0-3.771 0-5.657 1.172-6.828S6.229 4 10 4h4c3.771 0 5.657 0 6.828 1.172S22 8.229 22 12v2c0 3.771 0 5.657-1.172 6.828S17.771 22 14 22h-4c-3.771 0-5.657 0-6.828-1.172S2 17.771 2 14z" />
              <path stroke-linecap="round" d="M7 4V2.5M17 4V2.5" />
              <circle cx="16.5" cy="16.5" r="1.5" />
              <path stroke-linecap="round" d="M2.5 9h19" />
            </g>
          </svg>
          <span>New Joiner</span>
        </span>
        } @if (employee.employeeStatus ==='New Employee') {
        <span class="badge-newemployee">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <g fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M3 12c0 3.771 0 7.657 1.318 8.828C5.636 22 7.758 22 12 22s6.364 0 7.682-1.172S21 15.771 21 12" />
              <path
                d="m14.66 14.202l6.008-1.802c.595-.179.893-.268 1.082-.482a1 1 0 0 0 .1-.134c.15-.243.15-.553.15-1.175c0-2.45 0-3.675-.673-4.502a3 3 0 0 0-.434-.434C20.066 5 18.841 5 16.391 5H7.61c-2.45 0-3.675 0-4.502.673q-.24.195-.434.434C2 6.934 2 8.159 2 10.609c0 .622 0 .932.15 1.175q.045.07.1.134c.19.214.487.303 1.082.482l6.008 1.802M6.5 5c.823-.02 1.66-.545 1.94-1.32l.035-.103L8.5 3.5c.042-.127.064-.19.086-.246a2 2 0 0 1 1.735-1.25C10.38 2 10.448 2 10.58 2h2.838c.133 0 .2 0 .26.004a2 2 0 0 1 1.735 1.25c.023.056.044.12.086.246l.026.077c.018.053.026.08.035.103c.28.775 1.116 1.3 1.939 1.32" />
              <path stroke-linecap="round"
                d="M14 12.5h-4a.5.5 0 0 0-.5.5v2.162a.5.5 0 0 0 .314.464l.7.28a4 4 0 0 0 2.972 0l.7-.28a.5.5 0 0 0 .314-.464V13a.5.5 0 0 0-.5-.5Z" />
            </g>
          </svg>
          <span>New Employee</span>
        </span>
        } @if (employee.employeeStatus ==='Employed') {
        <span class="badge-success">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <g fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M3 12c0 3.771 0 7.657 1.318 8.828C5.636 22 7.758 22 12 22s6.364 0 7.682-1.172S21 15.771 21 12" />
              <path
                d="m14.66 14.202l6.008-1.802c.595-.179.893-.268 1.082-.482a1 1 0 0 0 .1-.134c.15-.243.15-.553.15-1.175c0-2.45 0-3.675-.673-4.502a3 3 0 0 0-.434-.434C20.066 5 18.841 5 16.391 5H7.61c-2.45 0-3.675 0-4.502.673q-.24.195-.434.434C2 6.934 2 8.159 2 10.609c0 .622 0 .932.15 1.175q.045.07.1.134c.19.214.487.303 1.082.482l6.008 1.802M6.5 5c.823-.02 1.66-.545 1.94-1.32l.035-.103L8.5 3.5c.042-.127.064-.19.086-.246a2 2 0 0 1 1.735-1.25C10.38 2 10.448 2 10.58 2h2.838c.133 0 .2 0 .26.004a2 2 0 0 1 1.735 1.25c.023.056.044.12.086.246l.026.077c.018.053.026.08.035.103c.28.775 1.116 1.3 1.939 1.32" />
              <path stroke-linecap="round"
                d="M14 12.5h-4a.5.5 0 0 0-.5.5v2.162a.5.5 0 0 0 .314.464l.7.28a4 4 0 0 0 2.972 0l.7-.28a.5.5 0 0 0 .314-.464V13a.5.5 0 0 0-.5-.5Z" />
            </g>
          </svg>
          <span>Employed</span>
        </span>
        } @if (employee.employeeStatus ==='Termination Pending') {
        <span class="badge-gray">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <g fill="none" stroke="currentColor" stroke-width="1.5">
              <circle cx="12" cy="12" r="10" />
              <path stroke-linecap="round" d="M12 7v5l3 3" />
            </g>
          </svg>
          <span>Termination Pending</span>
        </span>
        } @if (employee.employeeStatus ==='Terminated') {
        <span class="badge-danger">
          <svg width="15" height="17" viewBox="0 0 15 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M7.3125 3.75C7.62316 3.75 7.875 4.00184 7.875 4.3125V8.8125C7.875 9.12316 7.62316 9.375 7.3125 9.375C7.00184 9.375 6.75 9.12316 6.75 8.8125V4.3125C6.75 4.00184 7.00184 3.75 7.3125 3.75Z"
              fill="#E04F5F" />
            <path
              d="M8.0625 11.0625C8.0625 11.4767 7.72671 11.8125 7.3125 11.8125C6.89829 11.8125 6.5625 11.4767 6.5625 11.0625C6.5625 10.6483 6.89829 10.3125 7.3125 10.3125C7.72671 10.3125 8.0625 10.6483 8.0625 11.0625Z"
              fill="#E04F5F" />
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M7.3125 0C6.78406 0 6.30139 0.145194 5.77394 0.390274C5.26356 0.627418 4.67279 0.977278 3.93343 1.41514L3.36861 1.74962C2.629 2.18762 2.03828 2.53743 1.58307 2.87208C1.11236 3.21813 0.751326 3.57233 0.490009 4.03659C0.229107 4.50011 0.111308 4.99571 0.0547917 5.5838C-1.06506e-05 6.15404 -5.87241e-06 6.85237 1.25078e-07 7.72948V8.39551C-5.87241e-06 9.27261 -1.0645e-05 9.97096 0.0547917 10.5412C0.111308 11.1293 0.229107 11.6249 0.490009 12.0884C0.751326 12.5527 1.11236 12.9069 1.58307 13.2529C2.03829 13.5876 2.629 13.9374 3.36861 14.3754L3.93345 14.7099C4.67278 15.1477 5.26358 15.4976 5.77394 15.7347C6.30139 15.9798 6.78406 16.125 7.3125 16.125C7.84094 16.125 8.32361 15.9798 8.85106 15.7347C9.36143 15.4976 9.9522 15.1477 10.6916 14.7099L11.2564 14.3754C11.996 13.9374 12.5867 13.5876 13.0419 13.2529C13.5126 12.9069 13.8737 12.5527 14.135 12.0884C14.3959 11.6249 14.5137 11.1293 14.5702 10.5412C14.625 9.97096 14.625 9.27264 14.625 8.39554V7.72952C14.625 6.85242 14.625 6.15404 14.5702 5.5838C14.5137 4.99571 14.3959 4.50011 14.135 4.03659C13.8737 3.57233 13.5126 3.21813 13.0419 2.87208C12.5867 2.53743 11.996 2.18762 11.2564 1.74964L10.6916 1.41514C9.9522 0.977276 9.36144 0.627417 8.85106 0.390274C8.32361 0.145194 7.84094 0 7.3125 0ZM4.48143 2.39808C5.25179 1.94188 5.79454 1.62121 6.24799 1.41052C6.69015 1.20507 7.00556 1.125 7.3125 1.125C7.61944 1.125 7.93485 1.20507 8.37701 1.41052C8.83046 1.62121 9.37321 1.94188 10.1436 2.39808L10.6582 2.70284C11.4284 3.15898 11.9707 3.48086 12.3756 3.7785C12.7701 4.0685 12.9983 4.3106 13.1546 4.58841C13.3114 4.86696 13.4025 5.19293 13.4504 5.69142C13.4994 6.20163 13.5 6.84602 13.5 7.75774V8.36726C13.5 9.27898 13.4994 9.92337 13.4504 10.4336C13.4025 10.9321 13.3114 11.258 13.1546 11.5366C12.9983 11.8144 12.7701 12.0565 12.3756 12.3465C11.9707 12.6441 11.4284 12.966 10.6582 13.4222L10.1436 13.7269C9.37321 14.1831 8.83046 14.5038 8.37701 14.7145C7.93485 14.9199 7.61944 15 7.3125 15C7.00556 15 6.69015 14.9199 6.24799 14.7145C5.79454 14.5038 5.25179 14.1831 4.48143 13.7269L3.96681 13.4222C3.19657 12.966 2.6543 12.6441 2.24943 12.3465C1.85495 12.0565 1.62675 11.8144 1.47038 11.5366C1.31359 11.258 1.22254 10.9321 1.17463 10.4336C1.1256 9.92337 1.125 9.27898 1.125 8.36726V7.75774C1.125 6.84602 1.1256 6.20163 1.17463 5.69142C1.22254 5.19292 1.31359 4.86696 1.47038 4.58841C1.62675 4.3106 1.85495 4.0685 2.24943 3.7785C2.6543 3.48086 3.19657 3.15898 3.96681 2.70284L4.48143 2.39808Z"
              fill="#E04F5F" />
          </svg>
          <span>Terminated</span>
        </span>
        } @if (employee.employeeStatus ==='In Notice Period') {
        <span class="badge-probation">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g fill="none" stroke="currentColor" stroke-width="1.5">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M5.7664 2.47086e-07H5.86002C7.37032 -1.18229e-05 8.56227 -2.13906e-05 9.43044 0.114445C10.2838 0.226954 11.0505 0.474889 11.4146 1.18189C11.4671 1.28375 11.5113 1.38961 11.547 1.49846C11.7955 2.25669 11.4278 2.9729 10.9041 3.65077C10.3716 4.34013 9.52842 5.17508 8.46092 6.23218L6.61262 8.0625L8.46093 9.89283C9.52842 10.9499 10.3716 11.7849 10.9041 12.4742C11.4278 13.1521 11.7955 13.8683 11.547 14.6265C11.5113 14.7354 11.4671 14.8412 11.4146 14.9431C11.0505 15.6501 10.2838 15.898 9.43044 16.0106C8.56226 16.125 7.37031 16.125 5.86001 16.125H5.76641C4.25611 16.125 3.06416 16.125 2.19599 16.0106C1.34267 15.898 0.575959 15.6501 0.211827 14.9431C0.159365 14.8412 0.115085 14.7354 0.0794154 14.6265C-0.169032 13.8683 0.198633 13.1521 0.722295 12.4742C1.25484 11.7849 2.098 10.9499 3.1655 9.89283L5.0138 8.0625L3.1655 6.23218C2.09801 5.17508 1.25484 4.34013 0.722296 3.65077C0.198633 2.9729 -0.169032 2.2567 0.0794154 1.49847C0.115084 1.38961 0.159365 1.28376 0.211827 1.18189C0.575959 0.47489 1.34267 0.226954 2.19599 0.114445C3.06416 -2.13906e-05 4.2561 -1.18229e-05 5.7664 2.47086e-07ZM5.81321 7.27086L7.63569 5.46611C8.74413 4.36845 9.53273 3.58579 10.0138 2.96301C10.5094 2.32151 10.5363 2.02689 10.4779 1.84877C10.4609 1.79665 10.4396 1.7459 10.4145 1.697C10.3269 1.52706 10.0929 1.33652 9.28338 1.22979C8.4977 1.1262 7.38048 1.125 5.81321 1.125C4.24594 1.125 3.12872 1.1262 2.34304 1.22979C1.53356 1.33652 1.2995 1.52706 1.21197 1.697C1.18679 1.7459 1.16556 1.79665 1.14849 1.84877C1.09012 2.02689 1.11701 2.32151 1.61258 2.96301C2.09369 3.58579 2.88229 4.36845 3.99074 5.46612L5.81321 7.27086ZM5.81321 8.85414L3.99074 10.6589C2.88229 11.7565 2.09369 12.5392 1.61258 13.162C1.11701 13.8035 1.09012 14.0981 1.14849 14.2762C1.16556 14.3284 1.18679 14.3791 1.21197 14.428C1.2995 14.5979 1.53356 14.7885 2.34304 14.8952C3.12872 14.9988 4.24594 15 5.81321 15C7.38048 15 8.4977 14.9988 9.28338 14.8952C10.0929 14.7885 10.3269 14.5979 10.4145 14.428C10.4396 14.3791 10.4609 14.3284 10.4779 14.2762C10.5363 14.0981 10.5094 13.8035 10.0138 13.162C9.53273 12.5392 8.74413 11.7565 7.63568 10.6589L5.81321 8.85414ZM3.75071 3.1875C3.75071 2.87684 4.00255 2.625 4.31321 2.625H7.31321C7.62387 2.625 7.87571 2.87684 7.87571 3.1875C7.87571 3.49816 7.62387 3.75 7.31321 3.75H4.31321C4.00255 3.75 3.75071 3.49816 3.75071 3.1875ZM3.75071 12.9375C3.75071 12.6268 4.00255 12.375 4.31321 12.375H7.31321C7.62387 12.375 7.87571 12.6268 7.87571 12.9375C7.87571 13.2482 7.62387 13.5 7.31321 13.5H4.31321C4.00255 13.5 3.75071 13.2482 3.75071 12.9375Z" />
            </g>
          </svg>
          <span>In Notice Period</span>
        </span>
        } @if (employee.employeeStatus ==='Resigned') {
        <span class="badge-danger">
          <svg width="17" height="17" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M10.2715 3.97516e-07C9.24582 -1.4757e-05 8.41907 -2.6973e-05 7.76885 0.0873933C7.09377 0.178156 6.52536 0.372326 6.07392 0.823763C5.68023 1.21746 5.4813 1.70127 5.37687 2.26977C5.2754 2.82219 5.25599 3.49822 5.25147 4.30937C5.24974 4.62003 5.50018 4.87326 5.81083 4.87499C6.12149 4.87672 6.37473 4.62629 6.37646 4.31563C6.38102 3.49551 6.40232 2.9142 6.48336 2.47301C6.56145 2.0479 6.68683 1.80185 6.86942 1.61926C7.07699 1.41169 7.36842 1.27635 7.91875 1.20236C8.48526 1.1262 9.2361 1.125 10.3127 1.125H11.0627C12.1392 1.125 12.8901 1.1262 13.4566 1.20236C14.0069 1.27635 14.2983 1.41169 14.5059 1.61926C14.7135 1.82683 14.8488 2.11826 14.9228 2.66859C14.999 3.2351 15.0002 3.98594 15.0002 5.0625V11.0625C15.0002 12.1391 14.999 12.8899 14.9228 13.4564C14.8488 14.0067 14.7135 14.2982 14.5059 14.5057C14.2983 14.7133 14.0069 14.8487 13.4566 14.9226C12.8901 14.9988 12.1392 15 11.0627 15H10.3127C9.2361 15 8.48526 14.9988 7.91875 14.9226C7.36842 14.8487 7.07699 14.7133 6.86942 14.5057C6.68683 14.3232 6.56145 14.0771 6.48336 13.652C6.40232 13.2108 6.38102 12.6295 6.37646 11.8094C6.37473 11.4987 6.12149 11.2483 5.81083 11.25C5.50018 11.2517 5.24974 11.505 5.25147 11.8156C5.25599 12.6268 5.2754 13.3028 5.37687 13.8552C5.4813 14.4237 5.68023 14.9075 6.07392 15.3012C6.52536 15.7527 7.09377 15.9468 7.76885 16.0376C8.41907 16.125 9.24582 16.125 10.2715 16.125H11.1038C12.1295 16.125 12.9562 16.125 13.6065 16.0376C14.2816 15.9468 14.85 15.7527 15.3014 15.3012C15.7528 14.8498 15.947 14.2814 16.0378 13.6063C16.1252 12.9561 16.1252 12.1293 16.1252 11.1037V5.02135C16.1252 3.99566 16.1252 3.16891 16.0378 2.51869C15.947 1.84361 15.7528 1.2752 15.3014 0.823763C14.85 0.372326 14.2816 0.178156 13.6065 0.0873933C12.9563 -2.6973e-05 12.1295 -1.4757e-05 11.1038 3.97516e-07H10.2715Z"
              fill="#E04F5F" />
            <path
              d="M10.3125 7.5C10.6232 7.5 10.875 7.75184 10.875 8.0625C10.875 8.37316 10.6232 8.625 10.3125 8.625H2.08308L3.55357 9.88542C3.78944 10.0876 3.81676 10.4427 3.61458 10.6786C3.41241 10.9144 3.0573 10.9418 2.82143 10.7396L0.19643 8.48958C0.0717537 8.38272 0 8.22671 0 8.0625C0 7.89829 0.0717536 7.74228 0.19643 7.63542L2.82143 5.38542C3.0573 5.18324 3.41241 5.21056 3.61458 5.44643C3.81676 5.6823 3.78944 6.03741 3.55357 6.23958L2.08308 7.5H10.3125Z"
              fill="#E04F5F" />
          </svg>
          <span>Resigned</span>
        </span>
        }
      </td>
      <td>
        @if (employee.accountStatus ==='active') {
        <span class="badge-success">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <g fill="none" stroke="currentColor" stroke-width="1.5">
              <circle cx="12" cy="12" r="10" />
              <path stroke-linecap="round" stroke-linejoin="round" d="m8.5 12.5l2 2l5-5" />
            </g>
          </svg>
          <span>Active</span>
        </span>
        } @if (employee.accountStatus ==='pending') {
        <span class="badge-warning">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <g fill="none" stroke="currentColor" stroke-width="1.5">
              <circle cx="12" cy="12" r="10" />
              <path stroke-linecap="round" d="M12 7v5l3 3" />
            </g>
          </svg>
          <span>Pending</span>
        </span>
        } @if (employee.accountStatus ==='disabled') {
        <span class="badge-danger">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <g fill="none" stroke="currentColor" stroke-width="1.5">
              <circle cx="12" cy="12" r="10" />
              <path stroke-linecap="round" d="m15 9l-6 6m0-6l6 6" />
            </g>
          </svg>
          <span>Disabled</span>
        </span>
        } @if (employee.accountStatus ==='inactive') {
        <span class="badge-gray">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <g fill="none" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" d="m18.5 5.5l-13 13" />
              <circle cx="12" cy="12" r="10" />
            </g>
          </svg>
          <span>Inactive</span>
        </span>
        }
      </td>
      <td>{{ employee.jobTitle }}</td>
      <td>
        {{ employee.branch ?? "Not assigned" }}
      </td>
      <td>{{ employee.joinDate | date : "dd/MM/yyyy" }}</td>

      <td class="text-start">
        @switch (getContractStatus(employee.end_contract)) { @case ('expired') {
        <span class="badge-danger">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <g fill="none" stroke="currentColor" stroke-width="1.5">
              <circle cx="12" cy="12" r="10" />
              <path stroke-linecap="round" d="m15 9l-6 6m0-6l6 6" />
            </g>
          </svg>
          <span>
            {{
            employee.end_contract
            ? (employee.end_contract | date : "dd/MM/yyyy")
            : "---"
            }}
          </span>
        </span>

        <!-- <span class="text-expiring-nearly-expired">
                    {{ employee.end_contract | date:'dd/MM/yyyy' }}
                </span> -->
        } @case ('nearly-expired') {
        <span class="text-expiring-nearly-expired">
          {{ employee.end_contract | date : "dd/MM/yyyy" }}
        </span>
        } @case ('warning') {
        <span class="text-expiring-warning">
          {{ employee.end_contract | date : "dd/MM/yyyy" }}
        </span>
        } @default { @if (employee.end_contract) {
        <span>{{ employee.end_contract | date : "dd/MM/yyyy" }}</span>
        } @else {
        <span>Indefinite Term Contract</span>
        } } }
      </td>

      <td>
        <div class="d-flex justify-content-between align-items-center w-100">
          <a (click)="navigateToView(employee)" class="view-btn h-100 d-flex align-items-center gap-1 w-50 me-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <g fill="none" stroke="currentColor" stroke-width="1.5">
                <path
                  d="M3.275 15.296C2.425 14.192 2 13.639 2 12c0-1.64.425-2.191 1.275-3.296C4.972 6.5 7.818 4 12 4s7.028 2.5 8.725 4.704C21.575 9.81 22 10.361 22 12c0 1.64-.425 2.191-1.275 3.296C19.028 17.5 16.182 20 12 20s-7.028-2.5-8.725-4.704Z" />
                <path d="M15 12a3 3 0 1 1-6 0a3 3 0 0 1 6 0Z" />
              </g>
            </svg>
            <span>View</span>
          </a>
          <!-- <a [routerLink]="['/employees/edit-employee', employee.id]" -->
          <a (click)="navigateToEdit(employee.id)" class="edit-btn d-flex align-items-center gap-1 w-50 ms-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <g fill="none" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round"
                  d="M22 10.5V12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12s0-7.071 1.464-8.536C4.93 2 7.286 2 12 2h1.5" />
                <path
                  d="m16.652 3.455l.649-.649A2.753 2.753 0 0 1 21.194 6.7l-.65.649m-3.892-3.893s.081 1.379 1.298 2.595c1.216 1.217 2.595 1.298 2.595 1.298m-3.893-3.893L10.687 9.42c-.404.404-.606.606-.78.829q-.308.395-.524.848c-.121.255-.211.526-.392 1.068L8.412 13.9m12.133-6.552l-5.965 5.965c-.404.404-.606.606-.829.78a4.6 4.6 0 0 1-.848.524c-.255.121-.526.211-1.068.392l-1.735.579m0 0l-1.123.374a.742.742 0 0 1-.939-.94l.374-1.122m1.688 1.688L8.412 13.9" />
              </g>
            </svg>
            <span>Edit</span>
          </a>
        </div>
      </td>
    </ng-template>

    <ng-template #noEmployees>
      <tr>
        <td colspan="8" class="no-data py-4">
          @if (searchTerm.trim() || filterForm.dirty) { No Employees match your
          search. } @else { No Employees Added Yet. }
        </td>
      </tr>
    </ng-template>
  </div>
</div>

<!-- filter popup -->
<app-overlay-filter-box #filterBox [title]="'Filters'" (onClose)="onFilterOverlayClose()">
  <form [formGroup]="filterForm" (ngSubmit)="filter()" class="w-100 d-flex flex-column gap-3">
    <div class="input">
      <label for="status">Status</label>
      <div class="d-flex align-items-center gap-4">
        <div class="form-outline w-100 position-relative custom-date-wrapper">
          <select formControlName="status" name="status" id="status" class="form-select">
            <option value="" selected disabled hidden>Select</option>
            <option value="all">Any</option>
            <option value="active">Active</option>
            <option value="pending">Pending</option>
            <option value="disabled">Disabled</option>
            <option value="inactive">Inactive</option>
          </select>
        </div>
        @if(!filterForm.get('status')?.value){
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path fill="#e04f5f"
            d="M10.03 8.97a.75.75 0 0 0-1.06 1.06L10.94 12l-1.97 1.97a.75.75 0 1 0 1.06 1.06L12 13.06l1.97 1.97a.75.75 0 0 0 1.06-1.06L13.06 12l1.97-1.97a.75.75 0 1 0-1.06-1.06L12 10.94z" />
          <path fill="#e04f5f" fill-rule="evenodd"
            d="M12 1.25C6.063 1.25 1.25 6.063 1.25 12S6.063 22.75 12 22.75S22.75 17.937 22.75 12S17.937 1.25 12 1.25M2.75 12a9.25 9.25 0 1 1 18.5 0a9.25 9.25 0 0 1-18.5 0"
            clip-rule="evenodd" />
        </svg>
        } @else{
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <g fill="none" stroke="#3f9870" stroke-width="1.5">
            <circle cx="12" cy="12" r="10" />
            <path stroke-linecap="round" stroke-linejoin="round" d="m8.5 12.5l2 2l5-5" />
          </g>
        </svg>
        }
      </div>
    </div>

    <div class="input">
      <label for="department">Department</label>
      <div class="d-flex align-items-center gap-4">
        <div class="form-outline w-100 position-relative">
          @if (loadingDepartments) {
          <div class="skeleton-loading skeleton-input"></div>
          } @else {
          <select formControlName="department_id" name="department_id" id="department" class="form-select">
            <option value="" selected disabled hidden>Select Department</option>
            @for (department of departments; track department.id) {
            <option [value]="department.id">{{ department.name }}</option>
            }
          </select>
          }
        </div>
        @if(!loadingDepartments) {
        @if(!filterForm.get('department_id')?.value){
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path fill="#e04f5f"
            d="M10.03 8.97a.75.75 0 0 0-1.06 1.06L10.94 12l-1.97 1.97a.75.75 0 1 0 1.06 1.06L12 13.06l1.97 1.97a.75.75 0 0 0 1.06-1.06L13.06 12l1.97-1.97a.75.75 0 1 0-1.06-1.06L12 10.94z" />
          <path fill="#e04f5f" fill-rule="evenodd"
            d="M12 1.25C6.063 1.25 1.25 6.063 1.25 12S6.063 22.75 12 22.75S22.75 17.937 22.75 12S17.937 1.25 12 1.25M2.75 12a9.25 9.25 0 1 1 18.5 0a9.25 9.25 0 0 1-18.5 0"
            clip-rule="evenodd" />
        </svg>
        } @else{
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <g fill="none" stroke="#3f9870" stroke-width="1.5">
            <circle cx="12" cy="12" r="10" />
            <path stroke-linecap="round" stroke-linejoin="round" d="m8.5 12.5l2 2l5-5" />
          </g>
        </svg>
        }
        }
      </div>
    </div>

    <div class="input">
      <label for="createdFrom">Created From</label>
      <div class="d-flex align-items-center gap-4">
        <div class="form-outline w-100 position-relative custom-date-wrapper">
          <input formControlName="created_from" type="date" id="createdFrom" class="form-control custom-date-input"
            placeholder="Min-Max" />
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g fill="none" stroke-width="1.5">
              <path stroke-linecap="round"
                d="M22 14v-2c0-3.771 0-5.657-1.172-6.828S17.771 4 14 4h-4C6.229 4 4.343 4 3.172 5.172S2 8.229 2 12v2c0 3.771 0 5.657 1.172 6.828S6.229 22 10 22h4M7 4V2.5M17 4V2.5" />
              <circle cx="18" cy="18" r="3" />
              <path stroke-linecap="round" d="M20.5 20.5L22 22M2.5 9h19" />
            </g>
          </svg>
        </div>
        @if(!filterForm.get('created_from')?.value){
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path fill="#e04f5f"
            d="M10.03 8.97a.75.75 0 0 0-1.06 1.06L10.94 12l-1.97 1.97a.75.75 0 1 0 1.06 1.06L12 13.06l1.97 1.97a.75.75 0 0 0 1.06-1.06L13.06 12l1.97-1.97a.75.75 0 1 0-1.06-1.06L12 10.94z" />
          <path fill="#e04f5f" fill-rule="evenodd"
            d="M12 1.25C6.063 1.25 1.25 6.063 1.25 12S6.063 22.75 12 22.75S22.75 17.937 22.75 12S17.937 1.25 12 1.25M2.75 12a9.25 9.25 0 1 1 18.5 0a9.25 9.25 0 0 1-18.5 0"
            clip-rule="evenodd" />
        </svg>
        } @else{
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <g fill="none" stroke="#3f9870" stroke-width="1.5">
            <circle cx="12" cy="12" r="10" />
            <path stroke-linecap="round" stroke-linejoin="round" d="m8.5 12.5l2 2l5-5" />
          </g>
        </svg>
        }
      </div>
    </div>
    <div class="input">
      <label for="createdTo">Created to</label>
      <div class="d-flex align-items-center gap-4">
        <div class="form-outline w-100 position-relative custom-date-wrapper">
          <input formControlName="created_to" type="date" id="createdTo" class="form-control custom-date-input"
            placeholder="Min-Max" />
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g fill="none" stroke-width="1.5">
              <path stroke-linecap="round"
                d="M22 14v-2c0-3.771 0-5.657-1.172-6.828S17.771 4 14 4h-4C6.229 4 4.343 4 3.172 5.172S2 8.229 2 12v2c0 3.771 0 5.657 1.172 6.828S6.229 22 10 22h4M7 4V2.5M17 4V2.5" />
              <circle cx="18" cy="18" r="3" />
              <path stroke-linecap="round" d="M20.5 20.5L22 22M2.5 9h19" />
            </g>
          </svg>
        </div>
        @if(!filterForm.get('created_to')?.value){
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path fill="#e04f5f"
            d="M10.03 8.97a.75.75 0 0 0-1.06 1.06L10.94 12l-1.97 1.97a.75.75 0 1 0 1.06 1.06L12 13.06l1.97 1.97a.75.75 0 0 0 1.06-1.06L13.06 12l1.97-1.97a.75.75 0 1 0-1.06-1.06L12 10.94z" />
          <path fill="#e04f5f" fill-rule="evenodd"
            d="M12 1.25C6.063 1.25 1.25 6.063 1.25 12S6.063 22.75 12 22.75S22.75 17.937 22.75 12S17.937 1.25 12 1.25M2.75 12a9.25 9.25 0 1 1 18.5 0a9.25 9.25 0 0 1-18.5 0"
            clip-rule="evenodd" />
        </svg>
        } @else{
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <g fill="none" stroke="#3f9870" stroke-width="1.5">
            <circle cx="12" cy="12" r="10" />
            <path stroke-linecap="round" stroke-linejoin="round" d="m8.5 12.5l2 2l5-5" />
          </g>
        </svg>
        }
      </div>
    </div>

    <div class="input">
      <label for="contractStartDate">Contract start Date</label>
      <div class="d-flex align-items-center gap-4">
        <div class="form-outline w-100 position-relative custom-date-wrapper">
          <input formControlName="contract_start_date" type="date" id="contractStartDate"
            class="form-control custom-date-input" placeholder="Min-Max" />
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g fill="none" stroke-width="1.5">
              <path stroke-linecap="round"
                d="M22 14v-2c0-3.771 0-5.657-1.172-6.828S17.771 4 14 4h-4C6.229 4 4.343 4 3.172 5.172S2 8.229 2 12v2c0 3.771 0 5.657 1.172 6.828S6.229 22 10 22h4M7 4V2.5M17 4V2.5" />
              <circle cx="18" cy="18" r="3" />
              <path stroke-linecap="round" d="M20.5 20.5L22 22M2.5 9h19" />
            </g>
          </svg>
        </div>
        @if(!filterForm.get('contract_start_date')?.value){
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path fill="#e04f5f"
            d="M10.03 8.97a.75.75 0 0 0-1.06 1.06L10.94 12l-1.97 1.97a.75.75 0 1 0 1.06 1.06L12 13.06l1.97 1.97a.75.75 0 0 0 1.06-1.06L13.06 12l1.97-1.97a.75.75 0 1 0-1.06-1.06L12 10.94z" />
          <path fill="#e04f5f" fill-rule="evenodd"
            d="M12 1.25C6.063 1.25 1.25 6.063 1.25 12S6.063 22.75 12 22.75S22.75 17.937 22.75 12S17.937 1.25 12 1.25M2.75 12a9.25 9.25 0 1 1 18.5 0a9.25 9.25 0 0 1-18.5 0"
            clip-rule="evenodd" />
        </svg>
        } @else{
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <g fill="none" stroke="#3f9870" stroke-width="1.5">
            <circle cx="12" cy="12" r="10" />
            <path stroke-linecap="round" stroke-linejoin="round" d="m8.5 12.5l2 2l5-5" />
          </g>
        </svg>
        }
      </div>
    </div>

    <div class="input">
      <label for="contractEndDate">Contract End Date</label>
      <div class="d-flex align-items-center gap-4">
        <div class="form-outline w-100 position-relative custom-date-wrapper">
          <input formControlName="contract_end_date" type="date" id="contractEndDate"
            class="form-control custom-date-input" placeholder="Min-Max" />
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g fill="none" stroke-width="1.5">
              <path stroke-linecap="round"
                d="M22 14v-2c0-3.771 0-5.657-1.172-6.828S17.771 4 14 4h-4C6.229 4 4.343 4 3.172 5.172S2 8.229 2 12v2c0 3.771 0 5.657 1.172 6.828S6.229 22 10 22h4M7 4V2.5M17 4V2.5" />
              <circle cx="18" cy="18" r="3" />
              <path stroke-linecap="round" d="M20.5 20.5L22 22M2.5 9h19" />
            </g>
          </svg>
        </div>
        @if(!filterForm.get('contract_end_date')?.value){
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path fill="#e04f5f"
            d="M10.03 8.97a.75.75 0 0 0-1.06 1.06L10.94 12l-1.97 1.97a.75.75 0 1 0 1.06 1.06L12 13.06l1.97 1.97a.75.75 0 0 0 1.06-1.06L13.06 12l1.97-1.97a.75.75 0 1 0-1.06-1.06L12 10.94z" />
          <path fill="#e04f5f" fill-rule="evenodd"
            d="M12 1.25C6.063 1.25 1.25 6.063 1.25 12S6.063 22.75 12 22.75S22.75 17.937 22.75 12S17.937 1.25 12 1.25M2.75 12a9.25 9.25 0 1 1 18.5 0a9.25 9.25 0 0 1-18.5 0"
            clip-rule="evenodd" />
        </svg>
        } @else{
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <g fill="none" stroke="#3f9870" stroke-width="1.5">
            <circle cx="12" cy="12" r="10" />
            <path stroke-linecap="round" stroke-linejoin="round" d="m8.5 12.5l2 2l5-5" />
          </g>
        </svg>
        }
      </div>
    </div>

    <div class="d-flex align-items-center gap-3">
      <button type="submit" class="btn btn-lg btn-primary w-100">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <g fill="none" stroke-width="1.5">
            <circle cx="12" cy="12" r="10" />
            <path stroke-linecap="round" stroke-linejoin="round" d="m8.5 12.5l2 2l5-5" />
          </g>
        </svg>
        <span>Apply Filter</span>
      </button>
      <a (click)="resetFilterForm()" class="text-danger-dark fw-bold w-100 text-center">
        <span>Clear Filters</span>
      </a>
    </div>
  </form>
</app-overlay-filter-box>