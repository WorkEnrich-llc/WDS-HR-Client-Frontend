<!-- Terminate Contract Modal -->
<app-overlay-filter-box [title]="'Terminate Contract'" [customWidth]="'500px'" [isOverlayVisible]="isOpen"
  (onClose)="closeModal()">
  <div modal-content>
    <div class="warning-message">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" />
        <path d="M12 9v4" />
        <path d="m12 17 .01 0" />
      </svg>
      Any upcoming contracts for this employee will be cancelled automatically.
    </div>

    <form [formGroup]="terminateForm" class="terminate-form">
      <div class="form-group">
        <label for="lastDay" class="form-label">Last day</label>
        <div class="form-outline w-100 position-relative custom-date-wrapper">
          <input type="date" id="lastDay" class="form-control custom-date-input" formControlName="lastDay"
            [min]="minDate"
            [class.is-invalid]="terminateForm.get('lastDay')?.invalid && terminateForm.get('lastDay')?.touched">
          <svg [class.svg-error-adjust]="terminateForm.get('lastDay')?.invalid && terminateForm.get('lastDay')?.touched"
            xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g fill="none" stroke-width="1.5">
              <path stroke-linecap="round"
                d="M22 14v-2c0-3.771 0-5.657-1.172-6.828S17.771 4 14 4h-4C6.229 4 4.343 4 3.172 5.172S2 8.229 2 12v2c0 3.771 0 5.657 1.172 6.828S6.229 22 10 22h4M7 4V2.5M17 4V2.5" />
              <circle cx="18" cy="18" r="3" />
              <path stroke-linecap="round" d="M20.5 20.5L22 22M2.5 9h19" />
            </g>
          </svg>
          @if(terminateForm.get('lastDay')?.touched && terminateForm.get('lastDay')?.hasError('required')){
          <div class="invalid-feedback">Last day is required</div>
          }

          @if(terminateForm.get('lastDay')?.touched && terminateForm.get('lastDay')?.hasError('useMinDate')){
          <div class="invalid-feedback">Date cannot be before {{ minDate }} </div>
          }

        </div>
      </div>

      <div class="form-group">
        <label for="reason" class="form-label">Reason</label>
        <textarea id="reason" class="form-control" rows="3" placeholder="Why was this employee terminated?"
          formControlName="reason"
          [class.is-invalid]="terminateForm.get('reason')?.invalid && terminateForm.get('reason')?.touched">
        </textarea>
        @if(terminateForm.get('reason')?.touched && terminateForm.get('reason')?.hasError('required')){
        <div class="invalid-feedback">
          Reason is required
        </div>
        }
        @if (terminateForm.get('reason')?.hasError('whitespace') && !terminateForm.get('reason')?.hasError('required'))
        {
        <div class="invalid-feedback">
          Reason cannot be only spaces.
        </div>
        }
      </div>
    </form>

    <div class="modal-footer">
      <button type="button" class="btn btn-danger" (click)="confirmTerminate()" [disabled]="terminateForm.invalid">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10" />
          <path d="m14.5 9.5-5 5m0-5 5 5" />
        </svg>
        Terminate
      </button>
      <button type="button" class="btn btn-secondary" (click)="closeModal()">
        Close
      </button>
    </div>
  </div>
</app-overlay-filter-box>