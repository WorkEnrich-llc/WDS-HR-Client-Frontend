<div class="attendance-log-container">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h5 class="mb-0">Attendance Log</h5>
    
    <!-- Date slider -->
    <div class="date-slider">
      <button class="btn btn-outline-dark border-0" (click)="prevWeek()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="15,18 9,12 15,6"></polyline>
        </svg>
      </button>

      <div class="dates">
        @for (day of days; track trackByDate($index, day)) {
          <div class="date-box" 
               [class.today]="day.isToday" 
               [class.selected]="isSelected(day.date)"
               [class.disabled]="day.date > today"
               (click)="selectDate(day.date)">
            <span class="day-label">{{ day.label }}</span>
            <span class="day-number">{{ day.date.getDate() }}</span>
          </div>
        }
      </div>

      <button class="btn btn-outline-dark border-0" (click)="nextWeek()" [disabled]="!canGoNext()">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9,18 15,12 9,6"></polyline>
        </svg>
      </button>
    </div>
  </div>
  
  <app-table 
    [data]="attendanceData" 
    [totalItems]="attendanceData.length" 
    [itemsPerPage]="10"
    [currentPage]="1"
    [columnsCount]="7"
    [headerTemplate]="headerTemplate"
    [rowTemplate]="rowTemplate"
    [emptyTemplate]="emptyTemplate">
  </app-table>

  <!-- Header Template -->
  <ng-template #headerTemplate>
    <th class="w-15">In</th>
    <th class="w-15">Out</th>
    <th class="w-15">Date</th>
    <th class="w-15">Day Type</th>
    <th class="w-15">Working Hrs</th>
    <th class="w-15">Missing Hrs</th>
    <th class="w-10">Deduction</th>
  </ng-template>

  <!-- Row Template -->
  <ng-template #rowTemplate let-row>
    <td>{{ row.in }}</td>
    <td>{{ row.out }}</td>
    <td>{{ row.date }}</td>
    <td>{{ row.dayType }}</td>
    <td [ngClass]="{'text-primary': row.workingHrs === 'Holiday'}">{{ row.workingHrs }}</td>
    <td [ngClass]="{'text-danger': row.missingHrs && row.missingHrs !== '-'}">{{ row.missingHrs }}</td>
    <td [ngClass]="{'text-danger': row.deduction && row.deduction !== '-', 'text-warning': row.deduction === 'Absent'}">{{ row.deduction }}</td>
  </ng-template>

  <!-- Empty Template -->
  <ng-template #emptyTemplate>
    <tr>
      <td colspan="7" class="text-center no-data">No attendance records found</td>
    </tr>
  </ng-template>
</div>