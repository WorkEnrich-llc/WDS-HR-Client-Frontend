<!-- page header inactive account -->
@if (employee && !isEmployeeActive) {
<app-page-header [breadcrumbs]="[
    { label: 'Personnel', link: '/dashboard' },
    { label: 'Employees', link: '/employees' },
    { label: 'View ' + employee.contact_info.name }
  ]" [title]="'View ' + employee.contact_info.name" [create]="(employee.created_at | date : 'dd/MM/yyyy') || ''"
  [update]="(employee.updated_at | date : 'dd/MM/yyyy') || ''">
  @if (hasEmployeePermission('update')) {
  <button class="btn btn-lg btn-primary" [routerLink]="['/employees/edit-employee', employee.id]">
    <!-- SVG and Edit -->
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
      <g fill="none" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round"
          d="M22 10.5V12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12s0-7.071 1.464-8.536C4.93 2 7.286 2 12 2h1.5" />
        <path
          d="m16.652 3.455l.649-.649A2.753 2.753 0 0 1 21.194 6.7l-.65.649m-3.892-3.893s.081 1.379 1.298 2.595c1.216 1.217 2.595 1.298 2.595 1.298m-3.893-3.893L10.687 9.42c-.404.404-.606.606-.78.829q-.308.395-.524.848c-.121.255-.211.526-.392 1.068L8.412 13.9m12.133-6.552l-5.965 5.965c-.404.404-.606.606-.829.78a4.6 4.6 0 0 1-.848.524c-.255.121-.526.211-1.068.392l-1.735.579m0 0l-1.123.374a.742.742 0 0 1-.939-.94l.374-1.122m1.688 1.688L8.412 13.9" />
      </g>
    </svg>
    <span>Edit</span>
  </button>
  }
</app-page-header>
}

<!-- page header active account -->
@if (employee && isEmployeeActive) {
<app-page-header [breadcrumbs]="[
    { label: 'Personnel', link: '/dashboard' },
    { label: 'Employees', link: '/employees' },
    { label: 'View ' + employee.contact_info.name }
  ]" [title]="'View ' + employee.contact_info.name" [create]="(employee.created_at | date : 'dd/MM/yyyy') || ''"
  [update]="(employee.updated_at | date : 'dd/MM/yyyy') || ''">
  @if (hasEmployeePermission('update')) {
  <button class="btn btn-lg btn-primary" [routerLink]="['/employees/edit-employee', employee.id]">
    <!-- SVG and Edit -->
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
      <g fill="none" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round"
          d="M22 10.5V12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12s0-7.071 1.464-8.536C4.93 2 7.286 2 12 2h1.5" />
        <path
          d="m16.652 3.455l.649-.649A2.753 2.753 0 0 1 21.194 6.7l-.65.649m-3.892-3.893s.081 1.379 1.298 2.595c1.216 1.217 2.595 1.298 2.595 1.298m-3.893-3.893L10.687 9.42c-.404.404-.606.606-.78.829q-.308.395-.524.848c-.121.255-.211.526-.392 1.068L8.412 13.9m12.133-6.552l-5.965 5.965c-.404.404-.606.606-.829.78a4.6 4.6 0 0 1-.848.524c-.255.121-.526.211-1.068.392l-1.735.579m0 0l-1.123.374a.742.742 0 0 1-.939-.94l.374-1.122m1.688 1.688L8.412 13.9" />
      </g>
    </svg>
    <span>Edit</span>
  </button>
  }
</app-page-header>
}

<div class="content-hug d-flex flex-column gap-4">
  <!-- Loading state -->
  @if (loading) {
  <!-- Skeleton Loaders for Employee Data -->
  <div class="row g-4 align-items-stretch">
    <!-- Contact Info Skeleton -->
    <div class="col-12 col-lg-6 col-xl-4">
      <div class="info-card-base contact-info-card d-flex flex-column gap-3 h-100">
        <div class="skeleton-loading skeleton-title"></div>
        <div class="skeleton-loading skeleton-profile"></div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
      </div>
    </div>

    <!-- Job Info Skeleton -->
    <div class="col-12 col-lg-6 col-xl-4">
      <div class="info-card-base d-flex flex-column gap-3 h-100">
        <div class="d-flex align-items-center justify-content-between">
          <div class="skeleton-loading skeleton-title"></div>
          <div class="skeleton-loading skeleton-badge"></div>
        </div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
      </div>
    </div>

    <!-- Account Info Skeleton -->
    <div class="col-12 col-lg-6 col-xl-4">
      <div class="info-card-base d-flex flex-column gap-3 h-100">
        <div class="d-flex align-items-center justify-content-between">
          <div class="skeleton-loading skeleton-title"></div>
          <div class="skeleton-loading skeleton-badge"></div>
        </div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
        <div class="skeleton-info-item">
          <div class="skeleton-loading skeleton-label"></div>
          <div class="skeleton-loading skeleton-value"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tabs Skeleton -->
  <div class="content-box">
    <div class="skeleton-tabs">
      <div class="skeleton-loading skeleton-tab"></div>
      <div class="skeleton-loading skeleton-tab"></div>
      <div class="skeleton-loading skeleton-tab"></div>
      <div class="skeleton-loading skeleton-tab"></div>
      <div class="skeleton-loading skeleton-tab"></div>
    </div>
  </div>
  }

  <!-- Error state -->
  @if (!loading && !employee) {
  <div class="alert alert-warning" role="alert">
    <h4 class="alert-heading">Employee Not Found</h4>
    <p>
      The requested employee could not be found or an error occurred while
      loading the data.
    </p>
  </div>
  }

  <!-- Content when employee data is loaded -->
  @if (!loading && employee) {

  <!-- 3 cards -->
  <div class="row g-4 align-items-stretch">
    <div class="col-12 col-lg-6 col-xl-4">
      <div class="info-card-base contact-info-card d-flex flex-column gap-3 h-100">
        <div class="d-flex align-items-center justify-content-between">
          <h2>Contact Info</h2>

          <button type="button" class="btn-toggle-expand" (click)="toggleContactInfo()"
            [attr.aria-expanded]="contactInfoExpanded" [attr.aria-label]="
              contactInfoExpanded
                ? 'Show less contact information'
                : 'Show more contact information'
            ">
            <span>{{ contactInfoExpanded ? "Show Less" : "Show More" }}</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"
              [class.rotated]="contactInfoExpanded">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
        </div>

        <!-- Always visible fields -->
        <div class="m-auto d-flex flex-column align-items-center">
          <div class="profile-hug" (click)="triggerUpload()">
            <img [src]="profileImage" (error)="handleImageError()" alt="Profile Picture" />

            <div class="overlay">
              <i class="fa-solid fa-upload"></i>
              <span>Upload Image</span>
            </div>
            @if(hasProfilePicture){
            <button class="remove-btn delete-btn" (click)="removeImage($event)" title="Remove Picture">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="3,6 5,6 21,6" />
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
              </svg>
            </button>
            }
            <input #fileInput type="file" accept="image/png, image/jpeg, image/webp" hidden
              (change)="onImageSelected($event)" />
          </div>

          <!-- Flags / Interests Section - Directly under picture -->
          <div class="flags-section-compact mt-3 w-100">
            <div class="flags-container justify-content-center">
              @for(flag of (employee.flags || []).slice(0, 3); track $index) {
              <span class="pill-base flag-pill">
                {{ flag }}
                <button class="flag-delete-btn" (click)="openDeleteFlagModal(flag); $event.stopPropagation()"
                  title="Remove">
                  <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                  </svg>
                </button>
              </span>
              } @if ((employee.flags || []).length > 3) {
              <div class="flag-more-wrapper">
                <span class="flag-more" (click)="isFlagsPopupOpen = !isFlagsPopupOpen">
                  +{{ (employee.flags?.length || 0) - 3 }}
                </span>

                @if (isFlagsPopupOpen) {
                <div class="flags-cloud">
                  <div class="flags-cloud-header">
                    <span>All Interests</span>
                    <button (click)="isFlagsPopupOpen = false">&times;</button>
                  </div>
                  <div class="flags-cloud-body">
                    @for(flag of employee.flags || []; track $index) {
                    <span class="pill-base flag-pill">
                      {{ flag }}
                      <button class="flag-delete-btn" (click)="openDeleteFlagModal(flag); $event.stopPropagation()"
                        title="Remove">
                        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none"
                          stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                          <line x1="18" y1="6" x2="6" y2="18"></line>
                          <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                      </button>
                    </span>
                    }
                  </div>
                  <div class="flags-cloud-arrow"></div>
                </div>
                }
              </div>
              }

              <div class="flag-add-wrapper">
                <button class="flag-add-btn" (click)="toggleAddFlag()" title="Add Interest">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                  </svg>
                </button>

                @if (isAddingFlag) {
                <div class="flag-input-container">
                  <input #newFlagInput id="newFlagInput" type="text" [formControl]="flagInput" placeholder="Add..."
                    (keyup.enter)="saveNewFlag()" />

                  @if (isSearchingFlags) {
                  <div class="flag-loader">
                    <svg class="spinner-base spinner" viewBox="0 0 50 50">
                      <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
                    </svg>
                  </div>
                  }

                  <button class="flag-save-btn" (click)="saveNewFlag()" [disabled]="isSavingFlags || !flagInput.value">
                    @if (isSavingFlags) {
                    <svg class="spinner-base spinner-sm" viewBox="0 0 50 50">
                      <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
                    </svg>
                    } @else {
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                      stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    }
                  </button>

                  @if (flagSuggestions.length > 0) {
                  <div class="flag-suggestions">
                    @for (suggestion of flagSuggestions; track $index) {
                    <div class="suggestion-item" (click)="selectSuggestion(suggestion)">
                      {{ suggestion }}
                    </div>
                    }
                  </div>
                  }
                </div>
                }
              </div>
            </div>
          </div>
        </div>

        <div class="info">
          <h6>ID</h6>
          <span>{{ employee.id || "N/A" }}</span>
        </div>
        <div class="info">
          <h6>Full Name (English)</h6>
          <span>{{ employee.contact_info.name || "N/A" }}</span>
        </div>
        @if (employee.contact_info.name_arabic) {
        <div class="info">
          <h6>Full Name (Arabic)</h6>
          <span>{{ employee.contact_info.name_arabic || "N/A" }}</span>
        </div>
        }
        <div class="info">
          <h6>Phone Number</h6>
          <span>{{ employee.contact_info.mobile.country.phone_prefix || ""
            }}{{ employee.contact_info.mobile.number || "N/A" }}</span>
        </div>
        <div class="info">
          <h6>Business Email</h6>
          <span>{{ employee.contact_info.email || "N/A" }}</span>
        </div>
        <div class="collapsible-container contact-info-collapsible" [class.expanded]="contactInfoExpanded">
          <div class="info stagger-1">
            <h6>Date of Birth</h6>
            <span>{{
              (employee.contact_info.date_of_birth | date : "dd/MM/yyyy") ||
              "N/A"
              }}</span>
          </div>
          <div class="info stagger-2">
            <h6>Address</h6>
            <span>{{ employee.contact_info.address || "N/A" }}</span>
          </div>
          <div class="info stagger-3">
            <h6>Marital Status</h6>
            <span>{{ employee.contact_info.marital_status.name }}</span>
          </div>
        </div>

        <!-- Collapsible fields (Custom Fields only) -->
        <div class="collapsible-container contact-info-collapsible" [class.expanded]="contactInfoExpanded">
          @if (isLoading) {
          <!-- Custom Fields Skeleton Loaders -->
          <div class="skeleton-info-item">
            <div class="skeleton-loading skeleton-label"></div>
            <div class="skeleton-loading skeleton-value"></div>
          </div>
          <div class="skeleton-info-item">
            <div class="skeleton-loading skeleton-label"></div>
            <div class="skeleton-loading skeleton-value"></div>
          </div>
          <div class="skeleton-info-item">
            <div class="skeleton-loading skeleton-label"></div>
            <div class="skeleton-loading skeleton-value"></div>
          </div>
          } @else { @for(item of customFieldValues; track item.id) {
          @if(item.custom_field.pinned === true && item.value.value) {
          <div class="info stagger-1">
            <h6 [title]="item.custom_field.input_option.label">
              {{ item.custom_field.input_option.label }}
            </h6>
            <span [title]="item.value.value">{{ item.value.value }}</span>
          </div>
          } } }
        </div>

      </div>
    </div>

    <div class="col-12 col-lg-6 col-xl-4">
      <div class="info-card-base d-flex flex-column gap-3 h-100">
        <div class="d-flex align-items-center justify-content-between">
          <h2>Job Info</h2>
          @if (employeeData.employeeStatus ==='New Employee') {
          <span class="badge-newemployee">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
              <g fill="none" stroke="currentColor" stroke-width="1.5">
                <path
                  d="M3 12c0 3.771 0 7.657 1.318 8.828C5.636 22 7.758 22 12 22s6.364 0 7.682-1.172S21 15.771 21 12" />
                <path
                  d="m14.66 14.202l6.008-1.802c.595-.179.893-.268 1.082-.482a1 1 0 0 0 .1-.134c.15-.243.15-.553.15-1.175c0-2.45 0-3.675-.673-4.502a3 3 0 0 0-.434-.434C20.066 5 18.841 5 16.391 5H7.61c-2.45 0-3.675 0-4.502.673q-.24.195-.434.434C2 6.934 2 8.159 2 10.609c0 .622 0 .932.15 1.175q.045.07.1.134c.19.214.487.303 1.082.482l6.008 1.802M6.5 5c.823-.02 1.66-.545 1.94-1.32l.035-.103L8.5 3.5c.042-.127.064-.19.086-.246a2 2 0 0 1 1.735-1.25C10.38 2 10.448 2 10.58 2h2.838c.133 0 .2 0 .26.004a2 2 0 0 1 1.735 1.25c.023.056.044.12.086.246l.026.077c.018.053.026.08.035.103c.28.775 1.116 1.3 1.939 1.32" />
                <path stroke-linecap="round"
                  d="M14 12.5h-4a.5.5 0 0 0-.5.5v2.162a.5.5 0 0 0 .314.464l.7.28a4 4 0 0 0 2.972 0l.7-.28a.5.5 0 0 0 .314-.464V13a.5.5 0 0 0-.5-.5Z" />
              </g>
            </svg>
            <span>New Employee</span>
          </span>
          } @if (employeeData.employeeStatus ==='Employed') {
          <span class="badge-success">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
              <g fill="none" stroke="currentColor" stroke-width="1.5">
                <path
                  d="M3 12c0 3.771 0 7.657 1.318 8.828C5.636 22 7.758 22 12 22s6.364 0 7.682-1.172S21 15.771 21 12" />
                <path
                  d="m14.66 14.202l6.008-1.802c.595-.179.893-.268 1.082-.482a1 1 0 0 0 .1-.134c.15-.243.15-.553.15-1.175c0-2.45 0-3.675-.673-4.502a3 3 0 0 0-.434-.434C20.066 5 18.841 5 16.391 5H7.61c-2.45 0-3.675 0-4.502.673q-.24.195-.434.434C2 6.934 2 8.159 2 10.609c0 .622 0 .932.15 1.175q.045.07.1.134c.19.214.487.303 1.082.482l6.008 1.802M6.5 5c.823-.02 1.66-.545 1.94-1.32l.035-.103L8.5 3.5c.042-.127.064-.19.086-.246a2 2 0 0 1 1.735-1.25C10.38 2 10.448 2 10.58 2h2.838c.133 0 .2 0 .26.004a2 2 0 0 1 1.735 1.25c.023.056.044.12.086.246l.026.077c.018.053.026.08.035.103c.28.775 1.116 1.3 1.939 1.32" />
                <path stroke-linecap="round"
                  d="M14 12.5h-4a.5.5 0 0 0-.5.5v2.162a.5.5 0 0 0 .314.464l.7.28a4 4 0 0 0 2.972 0l.7-.28a.5.5 0 0 0 .314-.464V13a.5.5 0 0 0-.5-.5Z" />
              </g>
            </svg>
            <span>Employed</span>
          </span>
          } @if (employeeData.employeeStatus ==='Termination Pending') {
          <span class="badge-gray">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
              <g fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="12" cy="12" r="10" />
                <path stroke-linecap="round" d="M12 7v5l3 3" />
              </g>
            </svg>
            <span>Termination Pending</span>
          </span>
          }
          <!-- @if (employeeData.employeeStatus ==='Termination') {
            <span class="badge-success">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                <g fill="none" stroke="currentColor" stroke-width="1.5">
                  <path
                    d="M3 12c0 3.771 0 7.657 1.318 8.828C5.636 22 7.758 22 12 22s6.364 0 7.682-1.172S21 15.771 21 12" />
                  <path
                    d="m14.66 14.202l6.008-1.802c.595-.179.893-.268 1.082-.482a1 1 0 0 0 .1-.134c.15-.243.15-.553.15-1.175c0-2.45 0-3.675-.673-4.502a3 3 0 0 0-.434-.434C20.066 5 18.841 5 16.391 5H7.61c-2.45 0-3.675 0-4.502.673q-.24.195-.434.434C2 6.934 2 8.159 2 10.609c0 .622 0 .932.15 1.175q.045.07.1.134c.19.214.487.303 1.082.482l6.008 1.802M6.5 5c.823-.02 1.66-.545 1.94-1.32l.035-.103L8.5 3.5c.042-.127.064-.19.086-.246a2 2 0 0 1 1.735-1.25C10.38 2 10.448 2 10.58 2h2.838c.133 0 .2 0 .26.004a2 2 0 0 1 1.735 1.25c.023.056.044.12.086.246l.026.077c.018.053.026.08.035.103c.28.775 1.116 1.3 1.939 1.32" />
                  <path stroke-linecap="round"
                    d="M14 12.5h-4a.5.5 0 0 0-.5.5v2.162a.5.5 0 0 0 .314.464l.7.28a4 4 0 0 0 2.972 0l.7-.28a.5.5 0 0 0 .314-.464V13a.5.5 0 0 0-.5-.5Z" />
                </g>
              </svg>
              <span>Termination</span>
            </span>
            } -->
          @if (employeeData.employeeStatus ==='Terminated') {
          <span class="badge-danger">
            <svg width="15" height="17" viewBox="0 0 15 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M7.3125 3.75C7.62316 3.75 7.875 4.00184 7.875 4.3125V8.8125C7.875 9.12316 7.62316 9.375 7.3125 9.375C7.00184 9.375 6.75 9.12316 6.75 8.8125V4.3125C6.75 4.00184 7.00184 3.75 7.3125 3.75Z"
                fill="#E04F5F" />
              <path
                d="M8.0625 11.0625C8.0625 11.4767 7.72671 11.8125 7.3125 11.8125C6.89829 11.8125 6.5625 11.4767 6.5625 11.0625C6.5625 10.6483 6.89829 10.3125 7.3125 10.3125C7.72671 10.3125 8.0625 10.6483 8.0625 11.0625Z"
                fill="#E04F5F" />
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M7.3125 0C6.78406 0 6.30139 0.145194 5.77394 0.390274C5.26356 0.627418 4.67279 0.977278 3.93343 1.41514L3.36861 1.74962C2.629 2.18762 2.03828 2.53743 1.58307 2.87208C1.11236 3.21813 0.751326 3.57233 0.490009 4.03659C0.229107 4.50011 0.111308 4.99571 0.0547917 5.5838C-1.06506e-05 6.15404 -5.87241e-06 6.85237 1.25078e-07 7.72948V8.39551C-5.87241e-06 9.27261 -1.0645e-05 9.97096 0.0547917 10.5412C0.111308 11.1293 0.229107 11.6249 0.490009 12.0884C0.751326 12.5527 1.11236 12.9069 1.58307 13.2529C2.03829 13.5876 2.629 13.9374 3.36861 14.3754L3.93345 14.7099C4.67278 15.1477 5.26358 15.4976 5.77394 15.7347C6.30139 15.9798 6.78406 16.125 7.3125 16.125C7.84094 16.125 8.32361 15.9798 8.85106 15.7347C9.36143 15.4976 9.9522 15.1477 10.6916 14.7099L11.2564 14.3754C11.996 13.9374 12.5867 13.5876 13.0419 13.2529C13.5126 12.9069 13.8737 12.5527 14.135 12.0884C14.3959 11.6249 14.5137 11.1293 14.5702 10.5412C14.625 9.97096 14.625 9.27264 14.625 8.39554V7.72952C14.625 6.85242 14.625 6.15404 14.5702 5.5838C14.5137 4.99571 14.3959 4.50011 14.135 4.03659C13.8737 3.57233 13.5126 3.21813 13.0419 2.87208C12.5867 2.53743 11.996 2.18762 11.2564 1.74964L10.6916 1.41514C9.9522 0.977276 9.36144 0.627417 8.85106 0.390274C8.32361 0.145194 7.84094 0 7.3125 0ZM4.48143 2.39808C5.25179 1.94188 5.79454 1.62121 6.24799 1.41052C6.69015 1.20507 7.00556 1.125 7.3125 1.125C7.61944 1.125 7.93485 1.20507 8.37701 1.41052C8.83046 1.62121 9.37321 1.94188 10.1436 2.39808L10.6582 2.70284C11.4284 3.15898 11.9707 3.48086 12.3756 3.7785C12.7701 4.0685 12.9983 4.3106 13.1546 4.58841C13.3114 4.86696 13.4025 5.19293 13.4504 5.69142C13.4994 6.20163 13.5 6.84602 13.5 7.75774V8.36726C13.5 9.27898 13.4994 9.92337 13.4504 10.4336C13.4025 10.9321 13.3114 11.258 13.1546 11.5366C12.9983 11.8144 12.7701 12.0565 12.3756 12.3465C11.9707 12.6441 11.4284 12.966 10.6582 13.4222L10.1436 13.7269C9.37321 14.1831 8.83046 14.5038 8.37701 14.7145C7.93485 14.9199 7.61944 15 7.3125 15C7.00556 15 6.69015 14.9199 6.24799 14.7145C5.79454 14.5038 5.25179 14.1831 4.48143 13.7269L3.96681 13.4222C3.19657 12.966 2.6543 12.6441 2.24943 12.3465C1.85495 12.0565 1.62675 11.8144 1.47038 11.5366C1.31359 11.258 1.22254 10.9321 1.17463 10.4336C1.1256 9.92337 1.125 9.27898 1.125 8.36726V7.75774C1.125 6.84602 1.1256 6.20163 1.17463 5.69142C1.22254 5.19292 1.31359 4.86696 1.47038 4.58841C1.62675 4.3106 1.85495 4.0685 2.24943 3.7785C2.6543 3.48086 3.19657 3.15898 3.96681 2.70284L4.48143 2.39808Z"
                fill="#E04F5F" />
            </svg>
            <span>Terminated</span>
          </span>
          } @if (employeeData.employeeStatus ==='In Notice Period') {
          <span class="badge-probation">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g fill="none" stroke="currentColor" stroke-width="1.5">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M5.7664 2.47086e-07H5.86002C7.37032 -1.18229e-05 8.56227 -2.13906e-05 9.43044 0.114445C10.2838 0.226954 11.0505 0.474889 11.4146 1.18189C11.4671 1.28375 11.5113 1.38961 11.547 1.49846C11.7955 2.25669 11.4278 2.9729 10.9041 3.65077C10.3716 4.34013 9.52842 5.17508 8.46092 6.23218L6.61262 8.0625L8.46093 9.89283C9.52842 10.9499 10.3716 11.7849 10.9041 12.4742C11.4278 13.1521 11.7955 13.8683 11.547 14.6265C11.5113 14.7354 11.4671 14.8412 11.4146 14.9431C11.0505 15.6501 10.2838 15.898 9.43044 16.0106C8.56226 16.125 7.37031 16.125 5.86001 16.125H5.76641C4.25611 16.125 3.06416 16.125 2.19599 16.0106C1.34267 15.898 0.575959 15.6501 0.211827 14.9431C0.159365 14.8412 0.115085 14.7354 0.0794154 14.6265C-0.169032 13.8683 0.198633 13.1521 0.722295 12.4742C1.25484 11.7849 2.098 10.9499 3.1655 9.89283L5.0138 8.0625L3.1655 6.23218C2.09801 5.17508 1.25484 4.34013 0.722296 3.65077C0.198633 2.9729 -0.169032 2.2567 0.0794154 1.49847C0.115084 1.38961 0.159365 1.28376 0.211827 1.18189C0.575959 0.47489 1.34267 0.226954 2.19599 0.114445C3.06416 -2.13906e-05 4.2561 -1.18229e-05 5.7664 2.47086e-07ZM5.81321 7.27086L7.63569 5.46611C8.74413 4.36845 9.53273 3.58579 10.0138 2.96301C10.5094 2.32151 10.5363 2.02689 10.4779 1.84877C10.4609 1.79665 10.4396 1.7459 10.4145 1.697C10.3269 1.52706 10.0929 1.33652 9.28338 1.22979C8.4977 1.1262 7.38048 1.125 5.81321 1.125C4.24594 1.125 3.12872 1.1262 2.34304 1.22979C1.53356 1.33652 1.2995 1.52706 1.21197 1.697C1.18679 1.7459 1.16556 1.79665 1.14849 1.84877C1.09012 2.02689 1.11701 2.32151 1.61258 2.96301C2.09369 3.58579 2.88229 4.36845 3.99074 5.46612L5.81321 7.27086ZM5.81321 8.85414L3.99074 10.6589C2.88229 11.7565 2.09369 12.5392 1.61258 13.162C1.11701 13.8035 1.09012 14.0981 1.14849 14.2762C1.16556 14.3284 1.18679 14.3791 1.21197 14.428C1.2995 14.5979 1.53356 14.7885 2.34304 14.8952C3.12872 14.9988 4.24594 15 5.81321 15C7.38048 15 8.4977 14.9988 9.28338 14.8952C10.0929 14.7885 10.3269 14.5979 10.4145 14.428C10.4396 14.3791 10.4609 14.3284 10.4779 14.2762C10.5363 14.0981 10.5094 13.8035 10.0138 13.162C9.53273 12.5392 8.74413 11.7565 7.63568 10.6589L5.81321 8.85414ZM3.75071 3.1875C3.75071 2.87684 4.00255 2.625 4.31321 2.625H7.31321C7.62387 2.625 7.87571 2.87684 7.87571 3.1875C7.87571 3.49816 7.62387 3.75 7.31321 3.75H4.31321C4.00255 3.75 3.75071 3.49816 3.75071 3.1875ZM3.75071 12.9375C3.75071 12.6268 4.00255 12.375 4.31321 12.375H7.31321C7.62387 12.375 7.87571 12.6268 7.87571 12.9375C7.87571 13.2482 7.62387 13.5 7.31321 13.5H4.31321C4.00255 13.5 3.75071 13.2482 3.75071 12.9375Z" />
              </g>
            </svg>
            <span>In Notice Period</span>
          </span>
          } @if (employeeData.employeeStatus ==='Resigned') {
          <span class="badge-danger">
            <svg width="17" height="17" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M10.2715 3.97516e-07C9.24582 -1.4757e-05 8.41907 -2.6973e-05 7.76885 0.0873933C7.09377 0.178156 6.52536 0.372326 6.07392 0.823763C5.68023 1.21746 5.4813 1.70127 5.37687 2.26977C5.2754 2.82219 5.25599 3.49822 5.25147 4.30937C5.24974 4.62003 5.50018 4.87326 5.81083 4.87499C6.12149 4.87672 6.37473 4.62629 6.37646 4.31563C6.38102 3.49551 6.40232 2.9142 6.48336 2.47301C6.56145 2.0479 6.68683 1.80185 6.86942 1.61926C7.07699 1.41169 7.36842 1.27635 7.91875 1.20236C8.48526 1.1262 9.2361 1.125 10.3127 1.125H11.0627C12.1392 1.125 12.8901 1.1262 13.4566 1.20236C14.0069 1.27635 14.2983 1.41169 14.5059 1.61926C14.7135 1.82683 14.8488 2.11826 14.9228 2.66859C14.999 3.2351 15.0002 3.98594 15.0002 5.0625V11.0625C15.0002 12.1391 14.999 12.8899 14.9228 13.4564C14.8488 14.0067 14.7135 14.2982 14.5059 14.5057C14.2983 14.7133 14.0069 14.8487 13.4566 14.9226C12.8901 14.9988 12.1392 15 11.0627 15H10.3127C9.2361 15 8.48526 14.9988 7.91875 14.9226C7.36842 14.8487 7.07699 14.7133 6.86942 14.5057C6.68683 14.3232 6.56145 14.0771 6.48336 13.652C6.40232 13.2108 6.38102 12.6295 6.37646 11.8094C6.37473 11.4987 6.12149 11.2483 5.81083 11.25C5.50018 11.2517 5.24974 11.505 5.25147 11.8156C5.25599 12.6268 5.2754 13.3028 5.37687 13.8552C5.4813 14.4237 5.68023 14.9075 6.07392 15.3012C6.52536 15.7527 7.09377 15.9468 7.76885 16.0376C8.41907 16.125 9.24582 16.125 10.2715 16.125H11.1038C12.1295 16.125 12.9562 16.125 13.6065 16.0376C14.2816 15.9468 14.85 15.7527 15.3014 15.3012C15.7528 14.8498 15.947 14.2814 16.0378 13.6063C16.1252 12.9561 16.1252 12.1293 16.1252 11.1037V5.02135C16.1252 3.99566 16.1252 3.16891 16.0378 2.51869C15.947 1.84361 15.7528 1.2752 15.3014 0.823763C14.85 0.372326 14.2816 0.178156 13.6065 0.0873933C12.9563 -2.6973e-05 12.1295 -1.4757e-05 11.1038 3.97516e-07H10.2715Z"
                fill="#E04F5F" />
              <path
                d="M10.3125 7.5C10.6232 7.5 10.875 7.75184 10.875 8.0625C10.875 8.37316 10.6232 8.625 10.3125 8.625H2.08308L3.55357 9.88542C3.78944 10.0876 3.81676 10.4427 3.61458 10.6786C3.41241 10.9144 3.0573 10.9418 2.82143 10.7396L0.19643 8.48958C0.0717537 8.38272 0 8.22671 0 8.0625C0 7.89829 0.0717536 7.74228 0.19643 7.63542L2.82143 5.38542C3.0573 5.18324 3.41241 5.21056 3.61458 5.44643C3.81676 5.6823 3.78944 6.03741 3.55357 6.23958L2.08308 7.5H10.3125Z"
                fill="#E04F5F" />
            </svg>
            <span>Resigned</span>
          </span>
          }

          <!-- @switch (employeeDisplayStatus) {
            @case ('New Employee') {
              <span class="badge-newemployee">

                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                  <g fill="none" stroke="currentColor" stroke-width="1.5">
                    <path
                      d="M3 12c0 3.771 0 7.657 1.318 8.828C5.636 22 7.758 22 12 22s6.364 0 7.682-1.172S21 15.771 21 12" />
                    <path
                      d="m14.66 14.202l6.008-1.802c.595-.179.893-.268 1.082-.482a1 1 0 0 0 .1-.134c.15-.243.15-.553.15-1.175c0-2.45 0-3.675-.673-4.502a3 3 0 0 0-.434-.434C20.066 5 18.841 5 16.391 5H7.61c-2.45 0-3.675 0-4.502.673q-.24.195-.434.434C2 6.934 2 8.159 2 10.609c0 .622 0 .932.15 1.175q.045.07.1.134c.19.214.487.303 1.082.482l6.008 1.802M6.5 5c.823-.02 1.66-.545 1.94-1.32l.035-.103L8.5 3.5c.042-.127.064-.19.086-.246a2 2 0 0 1 1.735-1.25C10.38 2 10.448 2 10.58 2h2.838c.133 0 .2 0 .26.004a2 2 0 0 1 1.735 1.25c.023.056.044.12.086.246l.026.077c.018.053.026.08.035.103c.28.775 1.116 1.3 1.939 1.32" />
                    <path stroke-linecap="round"
                      d="M14 12.5h-4a.5.5 0 0 0-.5.5v2.162a.5.5 0 0 0 .314.464l.7.28a4 4 0 0 0 2.972 0l.7-.28a.5.5 0 0 0 .314-.464V13a.5.5 0 0 0-.5-.5Z" />
                  </g>
                </svg>
                <span>New Employee</span>
              </span>
            }
            @case ('Employed') {
              <span class="badge-success">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                  <g fill="none" stroke="currentColor" stroke-width="1.5">
                    <path
                      d="M3 12c0 3.771 0 7.657 1.318 8.828C5.636 22 7.758 22 12 22s6.364 0 7.682-1.172S21 15.771 21 12" />
                    <path
                      d="m14.66 14.202l6.008-1.802c.595-.179.893-.268 1.082-.482a1 1 0 0 0 .1-.134c.15-.243.15-.553.15-1.175c0-2.45 0-3.675-.673-4.502a3 3 0 0 0-.434-.434C20.066 5 18.841 5 16.391 5H7.61c-2.45 0-3.675 0-4.502.673q-.24.195-.434.434C2 6.934 2 8.159 2 10.609c0 .622 0 .932.15 1.175q.045.07.1.134c.19.214.487.303 1.082.482l6.008 1.802M6.5 5c.823-.02 1.66-.545 1.94-1.32l.035-.103L8.5 3.5c.042-.127.064-.19.086-.246a2 2 0 0 1 1.735-1.25C10.38 2 10.448 2 10.58 2h2.838c.133 0 .2 0 .26.004a2 2 0 0 1 1.735 1.25c.023.056.044.12.086.246l.026.077c.018.053.026.08.035.103c.28.775 1.116 1.3 1.939 1.32" />
                    <path stroke-linecap="round"
                      d="M14 12.5h-4a.5.5 0 0 0-.5.5v2.162a.5.5 0 0 0 .314.464l.7.28a4 4 0 0 0 2.972 0l.7-.28a.5.5 0 0 0 .314-.464V13a.5.5 0 0 0-.5-.5Z" />
                  </g>
                </svg>
                <span>Employed</span>
              </span>
            }
            @case('Probation'){
              <span class="badge-probation">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g fill="none" stroke="currentColor" stroke-width="1.5">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M5.7664 2.47086e-07H5.86002C7.37032 -1.18229e-05 8.56227 -2.13906e-05 9.43044 0.114445C10.2838 0.226954 11.0505 0.474889 11.4146 1.18189C11.4671 1.28375 11.5113 1.38961 11.547 1.49846C11.7955 2.25669 11.4278 2.9729 10.9041 3.65077C10.3716 4.34013 9.52842 5.17508 8.46092 6.23218L6.61262 8.0625L8.46093 9.89283C9.52842 10.9499 10.3716 11.7849 10.9041 12.4742C11.4278 13.1521 11.7955 13.8683 11.547 14.6265C11.5113 14.7354 11.4671 14.8412 11.4146 14.9431C11.0505 15.6501 10.2838 15.898 9.43044 16.0106C8.56226 16.125 7.37031 16.125 5.86001 16.125H5.76641C4.25611 16.125 3.06416 16.125 2.19599 16.0106C1.34267 15.898 0.575959 15.6501 0.211827 14.9431C0.159365 14.8412 0.115085 14.7354 0.0794154 14.6265C-0.169032 13.8683 0.198633 13.1521 0.722295 12.4742C1.25484 11.7849 2.098 10.9499 3.1655 9.89283L5.0138 8.0625L3.1655 6.23218C2.09801 5.17508 1.25484 4.34013 0.722296 3.65077C0.198633 2.9729 -0.169032 2.2567 0.0794154 1.49847C0.115084 1.38961 0.159365 1.28376 0.211827 1.18189C0.575959 0.47489 1.34267 0.226954 2.19599 0.114445C3.06416 -2.13906e-05 4.2561 -1.18229e-05 5.7664 2.47086e-07ZM5.81321 7.27086L7.63569 5.46611C8.74413 4.36845 9.53273 3.58579 10.0138 2.96301C10.5094 2.32151 10.5363 2.02689 10.4779 1.84877C10.4609 1.79665 10.4396 1.7459 10.4145 1.697C10.3269 1.52706 10.0929 1.33652 9.28338 1.22979C8.4977 1.1262 7.38048 1.125 5.81321 1.125C4.24594 1.125 3.12872 1.1262 2.34304 1.22979C1.53356 1.33652 1.2995 1.52706 1.21197 1.697C1.18679 1.7459 1.16556 1.79665 1.14849 1.84877C1.09012 2.02689 1.11701 2.32151 1.61258 2.96301C2.09369 3.58579 2.88229 4.36845 3.99074 5.46612L5.81321 7.27086ZM5.81321 8.85414L3.99074 10.6589C2.88229 11.7565 2.09369 12.5392 1.61258 13.162C1.11701 13.8035 1.09012 14.0981 1.14849 14.2762C1.16556 14.3284 1.18679 14.3791 1.21197 14.428C1.2995 14.5979 1.53356 14.7885 2.34304 14.8952C3.12872 14.9988 4.24594 15 5.81321 15C7.38048 15 8.4977 14.9988 9.28338 14.8952C10.0929 14.7885 10.3269 14.5979 10.4145 14.428C10.4396 14.3791 10.4609 14.3284 10.4779 14.2762C10.5363 14.0981 10.5094 13.8035 10.0138 13.162C9.53273 12.5392 8.74413 11.7565 7.63568 10.6589L5.81321 8.85414ZM3.75071 3.1875C3.75071 2.87684 4.00255 2.625 4.31321 2.625H7.31321C7.62387 2.625 7.87571 2.87684 7.87571 3.1875C7.87571 3.49816 7.62387 3.75 7.31321 3.75H4.31321C4.00255 3.75 3.75071 3.49816 3.75071 3.1875ZM3.75071 12.9375C3.75071 12.6268 4.00255 12.375 4.31321 12.375H7.31321C7.62387 12.375 7.87571 12.6268 7.87571 12.9375C7.87571 13.2482 7.62387 13.5 7.31321 13.5H4.31321C4.00255 13.5 3.75071 13.2482 3.75071 12.9375Z" />
                  </g>

                </svg>
                <span>Probation</span>
              </span>
            }
            @case('Cancelled'){
              <span class="badge-danger">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                  <g fill="none" stroke="currentColor" stroke-width="1.5">
                    <circle cx="12" cy="12" r="10" />
                    <path stroke-linecap="round" d="m14.5 9.5l-5 5m0-5l5 5" />
                  </g>
                </svg>
                <span>Cancelled</span>
              </span>
            }
            @case('Terminate'){
              <span class="badge-danger">
                <svg width="15" height="17" viewBox="0 0 15 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M7.3125 3.75C7.62316 3.75 7.875 4.00184 7.875 4.3125V8.8125C7.875 9.12316 7.62316 9.375 7.3125 9.375C7.00184 9.375 6.75 9.12316 6.75 8.8125V4.3125C6.75 4.00184 7.00184 3.75 7.3125 3.75Z"
                    fill="#E04F5F" />
                  <path
                    d="M8.0625 11.0625C8.0625 11.4767 7.72671 11.8125 7.3125 11.8125C6.89829 11.8125 6.5625 11.4767 6.5625 11.0625C6.5625 10.6483 6.89829 10.3125 7.3125 10.3125C7.72671 10.3125 8.0625 10.6483 8.0625 11.0625Z"
                    fill="#E04F5F" />
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M7.3125 0C6.78406 0 6.30139 0.145194 5.77394 0.390274C5.26356 0.627418 4.67279 0.977278 3.93343 1.41514L3.36861 1.74962C2.629 2.18762 2.03828 2.53743 1.58307 2.87208C1.11236 3.21813 0.751326 3.57233 0.490009 4.03659C0.229107 4.50011 0.111308 4.99571 0.0547917 5.5838C-1.06506e-05 6.15404 -5.87241e-06 6.85237 1.25078e-07 7.72948V8.39551C-5.87241e-06 9.27261 -1.0645e-05 9.97096 0.0547917 10.5412C0.111308 11.1293 0.229107 11.6249 0.490009 12.0884C0.751326 12.5527 1.11236 12.9069 1.58307 13.2529C2.03829 13.5876 2.629 13.9374 3.36861 14.3754L3.93345 14.7099C4.67278 15.1477 5.26358 15.4976 5.77394 15.7347C6.30139 15.9798 6.78406 16.125 7.3125 16.125C7.84094 16.125 8.32361 15.9798 8.85106 15.7347C9.36143 15.4976 9.9522 15.1477 10.6916 14.7099L11.2564 14.3754C11.996 13.9374 12.5867 13.5876 13.0419 13.2529C13.5126 12.9069 13.8737 12.5527 14.135 12.0884C14.3959 11.6249 14.5137 11.1293 14.5702 10.5412C14.625 9.97096 14.625 9.27264 14.625 8.39554V7.72952C14.625 6.85242 14.625 6.15404 14.5702 5.5838C14.5137 4.99571 14.3959 4.50011 14.135 4.03659C13.8737 3.57233 13.5126 3.21813 13.0419 2.87208C12.5867 2.53743 11.996 2.18762 11.2564 1.74964L10.6916 1.41514C9.9522 0.977276 9.36144 0.627417 8.85106 0.390274C8.32361 0.145194 7.84094 0 7.3125 0ZM4.48143 2.39808C5.25179 1.94188 5.79454 1.62121 6.24799 1.41052C6.69015 1.20507 7.00556 1.125 7.3125 1.125C7.61944 1.125 7.93485 1.20507 8.37701 1.41052C8.83046 1.62121 9.37321 1.94188 10.1436 2.39808L10.6582 2.70284C11.4284 3.15898 11.9707 3.48086 12.3756 3.7785C12.7701 4.0685 12.9983 4.3106 13.1546 4.58841C13.3114 4.86696 13.4025 5.19293 13.4504 5.69142C13.4994 6.20163 13.5 6.84602 13.5 7.75774V8.36726C13.5 9.27898 13.4994 9.92337 13.4504 10.4336C13.4025 10.9321 13.3114 11.258 13.1546 11.5366C12.9983 11.8144 12.7701 12.0565 12.3756 12.3465C11.9707 12.6441 11.4284 12.966 10.6582 13.4222L10.1436 13.7269C9.37321 14.1831 8.83046 14.5038 8.37701 14.7145C7.93485 14.9199 7.61944 15 7.3125 15C7.00556 15 6.69015 14.9199 6.24799 14.7145C5.79454 14.5038 5.25179 14.1831 4.48143 13.7269L3.96681 13.4222C3.19657 12.966 2.6543 12.6441 2.24943 12.3465C1.85495 12.0565 1.62675 11.8144 1.47038 11.5366C1.31359 11.258 1.22254 10.9321 1.17463 10.4336C1.1256 9.92337 1.125 9.27898 1.125 8.36726V7.75774C1.125 6.84602 1.1256 6.20163 1.17463 5.69142C1.22254 5.19292 1.31359 4.86696 1.47038 4.58841C1.62675 4.3106 1.85495 4.0685 2.24943 3.7785C2.6543 3.48086 3.19657 3.15898 3.96681 2.70284L4.48143 2.39808Z"
                    fill="#E04F5F" />
                </svg>
                <span>Terminate</span>
              </span>

            }
            @case('Resign'){
              <span class="badge-danger">
                <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M10.2715 3.97516e-07C9.24582 -1.4757e-05 8.41907 -2.6973e-05 7.76885 0.0873933C7.09377 0.178156 6.52536 0.372326 6.07392 0.823763C5.68023 1.21746 5.4813 1.70127 5.37687 2.26977C5.2754 2.82219 5.25599 3.49822 5.25147 4.30937C5.24974 4.62003 5.50018 4.87326 5.81083 4.87499C6.12149 4.87672 6.37473 4.62629 6.37646 4.31563C6.38102 3.49551 6.40232 2.9142 6.48336 2.47301C6.56145 2.0479 6.68683 1.80185 6.86942 1.61926C7.07699 1.41169 7.36842 1.27635 7.91875 1.20236C8.48526 1.1262 9.2361 1.125 10.3127 1.125H11.0627C12.1392 1.125 12.8901 1.1262 13.4566 1.20236C14.0069 1.27635 14.2983 1.41169 14.5059 1.61926C14.7135 1.82683 14.8488 2.11826 14.9228 2.66859C14.999 3.2351 15.0002 3.98594 15.0002 5.0625V11.0625C15.0002 12.1391 14.999 12.8899 14.9228 13.4564C14.8488 14.0067 14.7135 14.2982 14.5059 14.5057C14.2983 14.7133 14.0069 14.8487 13.4566 14.9226C12.8901 14.9988 12.1392 15 11.0627 15H10.3127C9.2361 15 8.48526 14.9988 7.91875 14.9226C7.36842 14.8487 7.07699 14.7133 6.86942 14.5057C6.68683 14.3232 6.56145 14.0771 6.48336 13.652C6.40232 13.2108 6.38102 12.6295 6.37646 11.8094C6.37473 11.4987 6.12149 11.2483 5.81083 11.25C5.50018 11.2517 5.24974 11.505 5.25147 11.8156C5.25599 12.6268 5.2754 13.3028 5.37687 13.8552C5.4813 14.4237 5.68023 14.9075 6.07392 15.3012C6.52536 15.7527 7.09377 15.9468 7.76885 16.0376C8.41907 16.125 9.24582 16.125 10.2715 16.125H11.1038C12.1295 16.125 12.9562 16.125 13.6065 16.0376C14.2816 15.9468 14.85 15.7527 15.3014 15.3012C15.7528 14.8498 15.947 14.2814 16.0378 13.6063C16.1252 12.9561 16.1252 12.1293 16.1252 11.1037V5.02135C16.1252 3.99566 16.1252 3.16891 16.0378 2.51869C15.947 1.84361 15.7528 1.2752 15.3014 0.823763C14.85 0.372326 14.2816 0.178156 13.6065 0.0873933C12.9563 -2.6973e-05 12.1295 -1.4757e-05 11.1038 3.97516e-07H10.2715Z"
                    fill="#E04F5F" />
                  <path
                    d="M10.3125 7.5C10.6232 7.5 10.875 7.75184 10.875 8.0625C10.875 8.37316 10.6232 8.625 10.3125 8.625H2.08308L3.55357 9.88542C3.78944 10.0876 3.81676 10.4427 3.61458 10.6786C3.41241 10.9144 3.0573 10.9418 2.82143 10.7396L0.19643 8.48958C0.0717537 8.38272 0 8.22671 0 8.0625C0 7.89829 0.0717536 7.74228 0.19643 7.63542L2.82143 5.38542C3.0573 5.18324 3.41241 5.21056 3.61458 5.44643C3.81676 5.6823 3.78944 6.03741 3.55357 6.23958L2.08308 7.5H10.3125Z"
                    fill="#E04F5F" />
                </svg>
                <span>Resigned</span>
              </span>

            }
            @case('Expired'){
              <span class="badge-gray">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                  <g fill="none" stroke="currentColor" stroke-width="1.5">
                    <circle cx="12" cy="12" r="10" />
                    <path stroke-linecap="round" d="m15 9l-6 6m0-6l6 6" />
                  </g>
                </svg>
                <span>Expired</span>
              </span>

            }
            } -->
        </div>
        @if (employee.job_info.job_title.name) {
        <div class="info">
          <h6>Job Title</h6>
          <span>{{ employee.job_info.job_title.name || "N/A" }}</span>
        </div>
        } @if(employee.job_info.employment_type.name){
        <div class="info">
          <h6>Employment Type</h6>
          <span>{{ employee.job_info.employment_type.name || "N/A" }}</span>
        </div>
        } @if(employee.job_info.work_mode.name){
        <div class="info">
          <h6>Work Mode</h6>
          <span>{{ employee.job_info.work_mode.name || "N/A" }}</span>
        </div>
        } @if(employee.job_info.section?.name){
        <div class="info">
          <h6>Section</h6>
          <span>{{ employee.job_info.section?.name || "Not assigned" }}</span>
        </div>
        } @if(employee.job_info.department.name){
        <div class="info">
          <h6>Department</h6>
          <span>{{ employee.job_info.department.name || "Not assigned" }}</span>
        </div>
        } @if(employee.job_info.branch.name){
        <div class="info">
          <h6>Branch</h6>
          <span>{{ employee.job_info.branch.name || "Not assigned" }}</span>
        </div>
        }

        <!-- <div class="info">
          <h6>Work Schedule</h6>
          <span>{{ employee.job_info.work_schedule.name || 'N/A' }}</span>
        </div> -->
        <!-- <div class="info">
        <h6>Contract Start Date</h6>
        <span>{{ (employee.job_info.start_contract | date:'dd/MM/yyyy') || 'N/A' }}</span>
      </div> -->

        <!-- @if (employee.job_info.start_contract) {
      <div class="info">
        <h6>Contract Start Date</h6>
        <span>{{
          (employee.job_info.start_contract | date : "dd/MM/yyyy") || "----"
        }}</span>
      </div>
      } -->

        <div class="info">
          <h6>First Contract Date</h6>
          <span>{{ (firstContractDate | date : "dd/MM/yyyy") || "N/A" }}</span>
        </div>

        <div class="info">
          <h6>Current Contract End Date</h6>
          <span>{{ employeeData.contractEndDate }}</span>
        </div>

        @if (employee.job_info.end_contract) {
        <div class="info">
          <h6>Contract End Date</h6>
          <span>{{
            (employee.job_info.end_contract | date : "dd/MM/yyyy") || "N/A"
            }}</span>
        </div>
        }

        <!-- <div class="info">
      <h6>Contract Type</h6>
      <span>{{ employee.job_info.contract_type.name || 'N/A' }}</span>
    </div> -->
        <!-- <div class="info">
    <h6>Salary</h6>
    <span>{{ employee.job_info.salary || 'N/A' }} EGP</span>
  </div> -->
        <!-- <div class="info" *ngIf="employee.job_info.days_on_site">
  <h6>Days On Site</h6>
  <span>{{ employee.job_info.days_on_site }} days/week</span>
</div> -->
        <!-- Managers Section following Flags Pattern -->
        <div class="managers-section mt-2">
          <div class="d-flex align-items-center justify-content-between mb-2">
            <h6>Managers</h6>
            @if (managementProfileLoading) {
            <div class="spinner-border spinner-border-sm text-primary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
            }
          </div>

          <div class="flags-container">
            @for(manager of (managementProfile?.direct_manager || []).slice(0, 3); track manager.id) {
            <span class="pill-base flag-pill manager-pill" [title]="manager.job_title?.name || ''">
              {{ manager.name }}
              <button class="flag-delete-btn" (click)="openRemoveManagerModal(manager.id); $event.stopPropagation()"
                title="Remove">
                <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="18" y1="6" x2="6" y2="18"></line>
                  <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
              </button>
            </span>
            } @if ((managementProfile?.direct_manager || []).length > 3) {
            <div class="flag-more-wrapper">
              <span class="flag-more" (click)="isFlagsPopupOpen = !isFlagsPopupOpen">
                +{{ (managementProfile?.direct_manager?.length || 0) - 3 }}
              </span>

              @if (isFlagsPopupOpen) {
              <div class="flags-cloud">
                <div class="flags-cloud-header">
                  <span>All Managers</span>
                  <button (click)="isFlagsPopupOpen = false">&times;</button>
                </div>
                <div class="flags-cloud-body">
                  @for(manager of managementProfile?.direct_manager || []; track manager.id) {
                  <span class="pill-base flag-pill manager-pill" [title]="manager.job_title?.name || ''">
                    {{ manager.name }}
                    <button class="flag-delete-btn"
                      (click)="openRemoveManagerModal(manager.id); $event.stopPropagation()" title="Remove">
                      <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                      </svg>
                    </button>
                  </span>
                  }
                </div>
                <div class="flags-cloud-arrow"></div>
              </div>
              }
            </div>
            }

            <div class="flag-add-wrapper">
              <button class="flag-add-btn" (click)="toggleAddManager()" title="Add Manager">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="12" y1="5" x2="12" y2="19"></line>
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
              </button>

              @if (isAddingManager) {
              <div class="flag-input-container">
                <input #newManagerInput id="newManagerInput" type="text" [formControl]="managerSearchControl"
                  placeholder="Search..." />

                @if (isSearchingManagers) {
                <div class="flag-loader">
                  <svg class="spinner-base spinner" viewBox="0 0 50 50">
                    <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
                  </svg>
                </div>
                }

                @if (managerSuggestions.length > 0) {
                <div class="flag-suggestions">
                  @for (suggestion of managerSuggestions; track suggestion.id) {
                  <div class="suggestion-item d-flex align-items-center gap-2"
                    (click)="selectManagerSuggestion(suggestion)">
                    <div class="suggestion-avatar">
                      <img [src]="suggestion.picture || './images/profile-defult.jpg'"
                        (error)="suggestion.picture = './images/profile-defult.jpg'" alt="">
                    </div>
                    <div class="suggestion-info">
                      <div class="suggestion-name">{{ suggestion.name }}</div>
                      <div class="suggestion-title">{{ suggestion.code }}</div>
                    </div>
                  </div>
                  }
                </div>
                }
              </div>
              }
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-12 col-lg-6 col-xl-4">
      <div class="info-card-base d-flex flex-column gap-3 h-100">
        <div class="d-flex align-items-center justify-content-between">
          <h2>Account Info</h2>
          @if (isEmployeeActive) {
          <span class="badge-success">
            <!-- SVG and Active -->
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
              <g fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="12" cy="12" r="10" />
                <path stroke-linecap="round" stroke-linejoin="round" d="m8.5 12.5l2 2l5-5" />
              </g>
            </svg>
            <span>Active</span>
          </span>
          } @if (isEmployeePending) {
          <span class="badge-warning">
            <!-- SVG and Pending -->
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
              <g fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="12" cy="12" r="10" />
                <path stroke-linecap="round" d="M12 7v5l3 3" />
              </g>
            </svg>
            <span>Pending</span>
          </span>
          } @if (isEmployeeDisabled) {
          <span class="badge-danger">
            <!-- SVG and Disabled -->
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
              <g fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="12" cy="12" r="10" />
                <path stroke-linecap="round" stroke-linejoin="round" d="m8.5 12.5l2 2l5-5" />
              </g>
            </svg>
            <span>Deactivated</span>
          </span>
          } @if (isEmployeeInactive) {
          <span class="badge-gray">
            <!-- SVG and Inactive -->
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
              <g fill="none" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" d="m18.5 5.5l-13 13" />
                <circle cx="12" cy="12" r="10" />
              </g>
            </svg>
            <span>Inactive</span>
          </span>
          }
        </div>
        <div class="info stagger-1">
          <h6>Company Email</h6>
          <span>{{ employee.contact_info.email || "N/A" }}</span>
        </div>
        <div class="info stagger-2">
          <h6>Created Date</h6>
          <!-- <h6>Join Date</h6> -->
          <span>
            {{
            (employee.created_at | date : "dd/MM/yyyy") || "N/A"
            }}
          </span>
        </div>

        @if (employee.device) {

        <!-- <div class="device-card">
      <div class="device-card__header">
        <div>
          <h3>Last Known Device</h3>
          <p class="device-card__subtitle">
            Last seen {{ formatDeviceDate(employee.device.last_seen) }}
          </p>
        </div>
        <span class="badge-success" [ngClass]="employee.device.is_main ? 'badge-success' : 'badge-gray'">
          {{ employee.device.is_main ? 'Primary Device' : 'Secondary Device' }}
        </span>
      </div>
      <div class="device-card__grid">
        <div>
          <p class="device-section__title">Device</p>
          <div class="device-section__grid">
            <div class="device-card__item">
              <span class="device-card__label">Type</span>
              <span class="device-card__value text-capitalize">{{ employee.device.device_type || "" }}</span>
            </div>
            <div class="device-card__item">
              <span class="device-card__label">Brand</span>
              <span class="device-card__value">{{ employee.device.device_family || "" }}</span>
            </div>
            <div class="device-card__item">
              <span class="device-card__label">Model</span>
              <span class="device-card__value">{{ employee.device.device_model || "" }}</span>
            </div>
            <div class="device-card__item">
              <span class="device-card__label">Language</span>
              <span class="device-card__value text-uppercase">{{ employee.device.device_ln || "" }}</span>
            </div>
          </div>
        </div>

        <div>
          <p class="device-section__title">Platform</p>
          <div class="device-section__grid">
            <div class="device-card__item">
              <span class="device-card__label">OS</span>
              <span class="device-card__value">{{ employee.device.os_device || "" }}</span>
            </div>
            <div class="device-card__item">
              <span class="device-card__label">OS Version</span>
              <span class="device-card__value">{{ employee.device.os_version || "" }}</span>
            </div>
            <div class="device-card__item">
              <span class="device-card__label">Browser</span>
              <span class="device-card__value">{{ employee.device.browser || "" }}</span>
            </div>
            <div class="device-card__item">
              <span class="device-card__label">Browser Version</span>
              <span class="device-card__value">{{ employee.device.browser_version || "" }}</span>
            </div>
          </div>
        </div>

        <div>
          <p class="device-section__title">Network & Activity</p>
          <div class="device-section__grid">
            <div class="device-card__item">
              <span class="device-card__label">IP Address</span>
              <span class="device-card__value">{{ employee.device.ip_address || "" }}</span>
            </div>
            <div class="device-card__item">
              <span class="device-card__label">Registered</span>
              <span class="device-card__value">{{ formatDeviceDate(employee.device.created_at) }}</span>
            </div>
            <div class="device-card__item">
              <span class="device-card__label">Last Update</span>
              <span class="device-card__value">{{ formatDeviceDate(employee.device.updated_at) }}</span>
            </div>
            @if (employee.device.fcm_token) {
              <div class="device-card__item device-card__item--wide">
                <span class="device-card__label">Push Token</span>
                <span class="device-card__value text-break">{{ employee.device.fcm_token }}</span>
              </div>
            }
          </div>
        </div>
      </div>
    </div> -->

        <div class="device-card device-info-card d-flex flex-column gap-0">
          <div class="d-flex align-items-center justify-content-between">
            <div>
              <h2>Last Known Device</h2>
              <small class="mb-0 text-muted">Seen: {{ formatDeviceDate(employee.device.last_seen) }}</small>
            </div>
            <div class="d-flex align-items-center gap-2">
              <span class="badge-success" [ngClass]="
                  employee.device.is_main ? 'badge-newjoiner' : 'badge-gray'
                ">
                {{
                employee.device.is_main
                ? "Primary Device"
                : "Secondary Device"
                }}
              </span>
              <button type="button" class="btn-toggle-expand-arrow" (click)="toggleDeviceInfo()"
                [attr.aria-expanded]="deviceInfoExpanded" [attr.aria-label]="
                  deviceInfoExpanded
                    ? 'Hide device information'
                    : 'Show device information'
                ">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"
                  [class.rotated]="deviceInfoExpanded">
                  <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
              </button>
            </div>
          </div>

          <!-- All fields collapsible - hidden by default -->
          <div class="collapsible-container device-info-collapsible" [class.expanded]="deviceInfoExpanded">
            <div class="info stagger-1">
              <h6>TYPE</h6>
              <span class="text-capitalize">{{
                employee.device.device_type || ""
                }}</span>
            </div>
            <div class="info stagger-2">
              <h6>BRAND</h6>
              <span>{{ employee.device.device_family || "" }}</span>
            </div>
            <div class="info stagger-3">
              <h6>MODEL</h6>
              <span>{{ employee.device.device_model || "" }}</span>
            </div>
            <div class="info stagger-4">
              <h6>LANGUAGE</h6>
              <span class="text-uppercase">{{
                employee.device.device_ln || ""
                }}</span>
            </div>
          </div>
        </div>
        }

        <div class="mt-auto d-flex flex-column gap-2">
          @if (employee.device) {
          <button class="btn btn-lg btn-outline-primary w-100" (click)="openClearSession()"
            [disabled]="clearSessionLoading">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <g fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M8 12h8m-4-4l4 4l-4 4" />
                <path d="M12 6v-.5C12 3.015 9.985 1 7.5 1H7a6 6 0 0 0-6 6v4a6 6 0 0 0 6 6h.5" />
                <path d="M12 18v.5c0 2.485 2.015 4.5 4.5 4.5h.5a6 6 0 0 0 6-6v-4a6 6 0 0 0-6-6h-.5" />
              </g>
            </svg>
            <span>Clear Session</span>
          </button>
          } @if (!isEmployeeActive) {
          <!-- <div class="info">
      <h6>Password</h6>
      <span>**********</span>
    </div> -->
          @if (isEmployeeDisabled) {
          <button class="btn btn-lg btn-success w-100 mt-auto" (click)="openActivate()">
            <!-- SVG and Activate -->
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="1.5"
                d="M12 2v4M8.5 3.706A9.003 9.003 0 0 0 12 21a9 9 0 0 0 3.5-17.294" />
            </svg>
            <span>Activate</span>
          </button>
          } @else if (isEmployeeInactive) {
          <button class="btn btn-lg btn-primary w-100 mt-auto" (click)="resendActiveLink()" [disabled]="resendLoading">
            <!-- SVG and Send in Email -->
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <g fill="none" stroke="currentColor" stroke-width="1.5">
                <path
                  d="M2 12c0-3.771 0-5.657 1.172-6.828S6.229 4 10 4h4c3.771 0 5.657 0 6.828 1.172S22 8.229 22 12s0 5.657-1.172 6.828S17.771 20 14 20h-4c-3.771 0-5.657 0-6.828-1.172S2 15.771 2 12Z" />
                <path stroke-linecap="round"
                  d="m6 8l2.159 1.8c1.837 1.53 2.755 2.295 3.841 2.295s2.005-.765 3.841-2.296L18 8" />
              </g>
            </svg>
            <span>Send in Email</span>
          </button>
          } @else {
          <button class="btn btn-lg btn-primary w-100 mt-auto" (click)="resendActiveLink()" [disabled]="resendLoading">
            <!-- SVG and Send Again -->
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <g fill="none" stroke="currentColor" stroke-width="1.5">
                <path
                  d="M2 12c0-3.771 0-5.657 1.172-6.828S6.229 4 10 4h4c3.771 0 5.657 0 6.828 1.172S22 8.229 22 12s0 5.657-1.172 6.828S17.771 20 14 20h-4c-3.771 0-5.657 0-6.828-1.172S2 15.771 2 12Z" />
                <path stroke-linecap="round"
                  d="m6 8l2.159 1.8c1.837 1.53 2.755 2.295 3.841 2.295s2.005-.765 3.841-2.296L18 8" />
              </g>
            </svg>
            <span>Send Again</span>
          </button>
          } } @else {
          <button class="btn btn-lg btn-outline-danger w-100" (click)="openDeactivate()">
            <!-- SVG and Deactivate -->
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="1.5"
                d="M12 2v4M8.5 3.706A9.003 9.003 0 0 0 12 21a9 9 0 0 0 3.5-17.294" />
            </svg>
            <span>Deactivate</span>
          </button>
          <button class="btn btn-lg btn-primary w-100 mt-auto" (click)="resetPassword()" [disabled]="resetLoading">
            <!-- SVG and Reset Password -->
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="m18.364 8.05l-.707-.707a8 8 0 1 0 2.28 4.658m-1.573-3.95h-4.243m4.243 0V3.807" />
            </svg>
            <span>Reset Password</span>
          </button>
          }
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-12">
      <div class="info-card-base d-flex flex-column gap-3 w-100">
        <!-- Tab Navigation -->
        <ul class="nav d-flex align-items-center nav-tabs bg-white px-3">
          <li class="nav-item" [ngClass]="{
              active: currentTab === 'dashboard'
            }" (click)="setCurrentTab('dashboard')">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path fill="currentColor" d="M13 9V3h8v6h-8ZM3 13V3h8v10H3Zm10 8V11h8v10h-8ZM3 21v-6h8v6H3Z"
                opacity=".5" />
            </svg>
            <span class="nav-link">Dashboard</span>
          </li>
          <li class="nav-item" [ngClass]="{
              active: currentTab === 'attendance',
              'text-success': false,
              'bg-light-success': false
            }" (click)="setCurrentTab('attendance')">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path
                d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2s7.071 0 8.535 1.464C22 4.93 22 7.286 22 12s0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12"
                opacity=".5" />
              <path
                d="M10.543 7.517a.75.75 0 1 0-1.086-1.034l-2.314 2.43l-.6-.63a.75.75 0 1 0-1.086 1.034l1.143 1.2a.75.75 0 0 0 1.086 0zM13 8.25a.75.75 0 0 0 0 1.5h5a.75.75 0 0 0 0-1.5zm-2.457 6.267a.75.75 0 1 0-1.086-1.034l-2.314 2.43l-.6-.63a.75.75 0 1 0-1.086 1.034l1.143 1.2a.75.75 0 0 0 1.086 0zM13 15.25a.75.75 0 0 0 0 1.5h5a.75.75 0 0 0 0-1.5z" />
            </svg>
            <span class="nav-link">Attendance</span>
          </li>

          <li class="nav-item" [ngClass]="{
              active: currentTab === 'schedule'
            }" (click)="setCurrentTab('schedule')">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path d="M18 2H6C3.791 2 2 3.791 2 6v12c0 2.209 1.791 4 4 4h12c2.209 0 4-1.791 4-4V6c0-2.209-1.791-4-4-4"
                opacity=".5" />
              <path d="M12 7v5l3 3" />
            </svg>
            <span class="nav-link">Schedule</span>
          </li>

          <li class="nav-item" [ngClass]="{
              active: currentTab === 'requests'
            }" (click)="setCurrentTab('requests')">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path
                d="M22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12s0-7.071 1.464-8.536C4.93 2 7.286 2 12 2s7.071 0 8.535 1.464C22 4.93 22 7.286 22 12"
                opacity=".5" />
              <path
                d="M7 16.75a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 0-1.5zm0-3.5a.75.75 0 0 0 0 1.5h9a.75.75 0 0 0 0-1.5zM22 5a3 3 0 1 1-6 0a3 3 0 0 1 6 0" />
            </svg>
            <span class="nav-link">Requests</span>
          </li>

          <li class="nav-item" [ngClass]="{
              active: currentTab === 'documents'
            }" (click)="setCurrentTab('documents')">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <g fill-rule="evenodd" clip-rule="evenodd">
                <path
                  d="M10.75 2h2c2.828 0 4.243 0 5.121.879c.879.878.879 2.293.879 5.121v8c0 2.828 0 4.243-.879 5.121c-.878.879-2.293.879-5.121.879h-2c-2.828 0-4.243 0-5.121-.879c-.879-.878-.879-2.293-.879-5.121V8c0-2.828 0-4.243.879-5.121C6.507 2 7.922 2 10.75 2M8 13a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5h-6A.75.75 0 0 1 8 13m0-4a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5h-6A.75.75 0 0 1 8 9m0 8a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5h-3A.75.75 0 0 1 8 17" />
                <path
                  d="M1.75 4.25A.75.75 0 0 1 2.5 5v14A.75.75 0 0 1 1 19V5a.75.75 0 0 1 .75-.75m20 0a.75.75 0 0 1 .75.75v14a.75.75 0 0 1-1.5 0V5a.75.75 0 0 1 .75-.75"
                  opacity=".5" />
              </g>
            </svg>

            <span class="nav-link">Documents</span>
          </li>

          <li class="nav-item" [ngClass]="{
              active: currentTab === 'contracts'
            }" (click)="setCurrentTab('contracts')">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path
                d="M3 10c0-3.771 0-5.657 1.172-6.828S7.229 2 11 2h2c3.771 0 5.657 0 6.828 1.172S21 6.229 21 10v4c0 3.771 0 5.657-1.172 6.828S16.771 22 13 22h-2c-3.771 0-5.657 0-6.828-1.172S3 17.771 3 14z"
                opacity=".5" />
              <path
                d="M16.519 16.501c.175-.136.334-.295.651-.612l3.957-3.958c.096-.095.052-.26-.075-.305a4.3 4.3 0 0 1-1.644-1.034a4.3 4.3 0 0 1-1.034-1.644c-.045-.127-.21-.171-.305-.075L14.11 12.83c-.317.317-.476.476-.612.651q-.243.311-.412.666c-.095.2-.166.414-.308.84l-.184.55l-.292.875l-.273.82a.584.584 0 0 0 .738.738l.82-.273l.875-.292l.55-.184c.426-.142.64-.212.84-.308q.355-.17.666-.412m5.849-5.809a2.163 2.163 0 1 0-3.06-3.059l-.126.128a.52.52 0 0 0-.148.465c.02.107.055.265.12.452c.13.375.376.867.839 1.33s.955.709 1.33.839c.188.065.345.1.452.12a.53.53 0 0 0 .465-.148z" />
              <path fill-rule="evenodd"
                d="M7.25 9A.75.75 0 0 1 8 8.25h6.5a.75.75 0 0 1 0 1.5H8A.75.75 0 0 1 7.25 9m0 4a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75m0 4a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75"
                clip-rule="evenodd" />
            </svg>
            <span class="nav-link">Contracts</span>
          </li>

          <li class="nav-item" [ngClass]="{ active: currentTab === 'leave-balance' }"
            (click)="setCurrentTab('leave-balance')">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path
                d="M12 22c-4.714 0-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12s0-7.071 1.464-8.536C4.93 2 7.286 2 12 2s7.071 0 8.535 1.464C22 4.93 22 7.286 22 12s0 7.071-1.465 8.535C19.072 22 16.714 22 12 22"
                opacity=".5" />
              <path
                d="M12 5.25a.75.75 0 0 1 .75.75v12a.75.75 0 0 1-1.5 0V6a.75.75 0 0 1 .75-.75m-5 3a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0V9A.75.75 0 0 1 7 8.25m10 4a.75.75 0 0 1 .75.75v5a.75.75 0 0 1-1.5 0v-5a.75.75 0 0 1 .75-.75" />
            </svg>
            <span class="nav-link">Leave Balance</span>
          </li>

          <li class="nav-item" [ngClass]="{
              active: currentTab === 'custom-info'
            }" (click)="setCurrentTab('custom-info')">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path
                d="M3 10c0-3.771 0-5.657 1.172-6.828S7.229 2 11 2h2c3.771 0 5.657 0 6.828 1.172S21 6.229 21 10v4c0 3.771 0 5.657-1.172 6.828S16.771 22 13 22h-2c-3.771 0-5.657 0-6.828-1.172S3 17.771 3 14z"
                opacity=".5" />
              <path
                d="M16.519 16.501c.175-.136.334-.295.651-.612l3.957-3.958c.096-.095.052-.26-.075-.305a4.3 4.3 0 0 1-1.644-1.034a4.3 4.3 0 0 1-1.034-1.644c-.045-.127-.21-.171-.305-.075L14.11 12.83c-.317.317-.476.476-.612.651q-.243.311-.412.666c-.095.2-.166.414-.308.84l-.184.55l-.292.875l-.273.82a.584.584 0 0 0 .738.738l.82-.273l.875-.292l.55-.184c.426-.142.64-.212.84-.308q.355-.17.666-.412m5.849-5.809a2.163 2.163 0 1 0-3.06-3.059l-.126.128a.52.52 0 0 0-.148.465c.02.107.055.265.12.452c.13.375.376.867.839 1.33s.955.709 1.33.839c.188.065.345.1.452.12a.53.53 0 0 0 .465-.148z" />
              <path fill-rule="evenodd"
                d="M7.25 9A.75.75 0 0 1 8 8.25h6.5a.75.75 0 0 1 0 1.5H8A.75.75 0 0 1 7.25 9m0 4a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75m0 4a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75"
                clip-rule="evenodd" />
            </svg>
            <span class="nav-link">Custom Info</span>
          </li>
          <li class="nav-item" [ngClass]="{
              active: currentTab === 'devices'
            }" (click)="setCurrentTab('devices')">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
              <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="M7 18h10M9 22h6M7 4h10a2 2 0 0 1 2 2v10H5V6a2 2 0 0 1 2-2Z" />
            </svg>
            <span class="nav-link">Devices</span>
          </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content">
          @if (currentTab === 'dashboard') {
          <app-dashboard-tab [employeeId]="employeeId" [managementProfile]="managementProfile"
            [currentEmployeeName]="employee.contact_info.name"
            [currentEmployeeJobTitle]="employee.job_info.job_title.name" [currentEmployeePicture]="profileImage">
          </app-dashboard-tab>
          } @if (currentTab === 'attendance') {
          <app-attendance-tab [employee]="employee" [isEmployeeActive]="isEmployeeActive">
          </app-attendance-tab>
          } @if (currentTab === 'schedule') {
          <app-schedule-tab [employee]="employee"> </app-schedule-tab>
          } @if (currentTab === 'requests') {
          <app-requests-tab [employee]="employee" [isEmployeeActive]="isEmployeeActive">
          </app-requests-tab>
          } @if (currentTab === 'documents') {
          <app-documents-tab [employee]="employee" [uploadProgress]="uploadProgress"
            (fileSelected)="onFileSelected($event)" (uploadDocument)="onUpload($event.key, $event.fileInput)"
            (deleteDocument)="onDelete($event)" (addDocumentClick)="addNewDocument()">
          </app-documents-tab>
          } @if (currentTab === 'contracts') {
          <app-contracts-tab [employee]="employee" (contractsDataUpdated)="onContractsDataUpdated()">
          </app-contracts-tab>
          } @if (currentTab === 'leave-balance') {
          <app-leave-balance-tab [employee]="employee" [isEmployeeActive]="isEmployeeActive"></app-leave-balance-tab>
          }@if (currentTab === 'custom-info') {
          <app-custom-info [customFieldValues]="customFieldValues" [isLoading]="isLoading"
            (valueUpdated)="handleValueUpdate($event)" (fieldDeleted)="handleFieldDelete($event)">
          </app-custom-info>
          } @if (currentTab === 'devices') {
          <div class="device-tab">
            @if (devicesAttempted) { @if (devicesTotal) {
            <div class="device-table-meta">
              <span>Total Devices: {{ devicesTotal }}</span>
              <span>Page {{ devicesPage }} of {{ devicesTotalPages }}</span>
            </div>
            }

            <app-table [data]="devices" [totalItems]="devicesTotal" [itemsPerPage]="devicesPerPage"
              [currentPage]="devicesPage" [columnsCount]="10" [isLoading]="devicesLoading"
              [headerTemplate]="devicesTableHeader" [rowTemplate]="devicesTableRow" [emptyTemplate]="devicesTableEmpty"
              (pageChange)="onDevicesPageChange($event)"
              (itemsPerPageChange)="onDevicesPerPageChange($event)"></app-table>
            } @else {
            <div class="text-muted py-4">
              Open the Devices tab to load history.
            </div>
            }

            <ng-template #devicesTableHeader>
              <th>ID</th>
              <th>Status</th>
              <th>Type</th>
              <th>Brand / Model</th>
              <th>Language</th>
              <th>OS</th>
              <th>Browser</th>
              <th>IP Address</th>
              <th>Last Seen</th>
              <th>Registered</th>
              <!-- <th>Updated</th> -->
              <!-- <th>Push Token</th> -->
            </ng-template>

            <ng-template #devicesTableRow let-device>
              <td>{{ device.id }}</td>
              <td>
                <span class="device-status" [ngClass]="
                    device.is_main
                      ? 'device-status--main'
                      : 'device-status--secondary'
                  ">
                  {{ device.is_main ? "Primary" : "Secondary" }}
                </span>
              </td>
              <td class="text-capitalize">{{ device.device_type || "" }}</td>
              <td>
                <div class="d-flex flex-column">
                  <span>{{ device.device_family || "" }}</span>
                  <span class="text-muted small">{{
                    device.device_model || ""
                    }}</span>
                </div>
              </td>
              <td class="text-uppercase">{{ device.device_ln || "" }}</td>
              <td>
                <div class="d-flex flex-column">
                  <span>{{ device.os_device || "" }}</span>
                  <span class="text-muted small">{{
                    device.os_version || ""
                    }}</span>
                </div>
              </td>
              <td>
                <div class="d-flex flex-column">
                  <span>{{ device.browser || "" }}</span>
                  <span class="text-muted small">{{
                    device.browser_version || ""
                    }}</span>
                </div>
              </td>
              <td>{{ device.ip_address || "" }}</td>
              <td>{{ formatDeviceDate(device.last_seen) }}</td>
              <td>{{ formatDeviceDate(device.created_at) }}</td>
              <!-- <td>{{ formatDeviceDate(device.updated_at) }}</td>
              <td class="device-token-cell">
                <span>{{ device.fcm_token || '' }}</span>
              </td> -->
            </ng-template>

            <ng-template #devicesTableEmpty>
              <tr>
                <td colspan="10" class="py-3 text-center text-muted">
                  No device history found for this employee.
                </td>
              </tr>
            </ng-template>
          </div>
          }
        </div>
      </div>
    </div>
  </div>

  }
</div>

<!-- deactivate popup  -->
<app-popup [title]="'Deactivate Employee'" [paragraph1]="
    'Are you sure you want to deactivate the Employee &quot;' +
    (employee?.contact_info?.name || '') +
    '&quot;?'
  " [paragraph2]="
    'This will only hold any access this employee has to the system. You can activate it at any time later.'
  " [isOpen]="deactivateOpen" (close)="closeDeactivate()">
  <button modal-btn-left class="btn btn-lg btn-danger w-100" (click)="confirmDeactivate()"
    [disabled]="deactivateLoading">
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
      <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="1.5"
        d="M12 2v4M8.5 3.706A9.003 9.003 0 0 0 12 21a9 9 0 0 0 3.5-17.294" />
    </svg>
    <span>Deactivate</span>
  </button>
  <button modal-btn-right class="btn btn-lg btn-outline-dark border-0 w-100" (click)="closeDeactivate()">
    Cancel
  </button>
</app-popup>

<!-- activate popup  -->
<app-popup [title]="'Activate Employee'" [paragraph1]="
    'Are you sure you want to Activate the Employee &quot;' +
    (employee?.contact_info?.name || '') +
    '&quot;?'
  " [paragraph2]="'You can deactivate it at any time later.'" [isOpen]="activateOpen" (close)="closeActivate()">
  <button modal-btn-left class="btn btn-lg btn-success w-100" (click)="confirmActivate()" [disabled]="activateLoading">
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
      <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="1.5"
        d="M12 2v4M8.5 3.706A9.003 9.003 0 0 0 12 21a9 9 0 0 0 3.5-17.294" />
    </svg>
    <span>Activate</span>
  </button>
  <button modal-btn-right class="btn btn-lg btn-outline-dark border-0 w-100" (click)="closeActivate()">
    Cancel
  </button>
</app-popup>

<!-- clear session popup -->
<app-popup [title]="'Clear Employee Session'" [paragraph1]="
    'Are you sure you want to clear the active session for &quot;' +
    (employee?.contact_info?.name || '') +
    '&quot;?'
  " [paragraph2]="'This will sign the employee out from all devices immediately.'"
  [isOpen]="clearSessionOpen && !!employee?.device" (close)="closeClearSession()">
  <button modal-btn-left class="btn btn-lg btn-outline-primary w-100" (click)="confirmClearSession()"
    [disabled]="clearSessionLoading">
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
      <g fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M8 12h8m-4-4l4 4l-4 4" />
        <path d="M12 6v-.5C12 3.015 9.985 1 7.5 1H7a6 6 0 0 0-6 6v4a6 6 0 0 0 6 6h.5" />
        <path d="M12 18v.5c0 2.485 2.015 4.5 4.5 4.5h.5a6 6 0 0 0 6-6v-4a6 6 0 0 0-6-6h-.5" />
      </g>
    </svg>
    <span>Clear Session</span>
  </button>
  <button modal-btn-right class="btn btn-lg btn-outline-dark border-0 w-100" (click)="closeClearSession()">
    Cancel
  </button>
</app-popup>

<!-- Onboarding Checklist Component with Badge -->
@if (employee && employee.onboarding_list) {
<app-onboarding-checklist [isOpen]="isOnboardingModalOpen" [checklistItems]="employee.onboarding_list"
  [showBadge]="true" [completed]="onboardingCompleted" [total]="onboardingTotal" [allowToggle]="false" [readOnly]="true"
  [loadingItemTitle]="loadingChecklistItemTitle" (close)="closeOnboardingModal()" (badgeClick)="openOnboardingModal()"
  (itemClick)="onChecklistItemClick($event)">
</app-onboarding-checklist>
}

<!-- Delete Flag Confirmation Popup -->
<app-popup [title]="'Remove Interest'"
  [paragraph1]="'Are you sure you want to remove this interest: ' + flagToDelete + '?'"
  [paragraph2]="'This action cannot be undone!'" [isOpen]="isDeleteFlagModalOpen" (close)="closeDeleteFlagModal()">
  <button modal-btn-left class="btn btn-lg btn-danger w-100" (click)="confirmDeleteFlag()" [disabled]="isSavingFlags">
    @if (isSavingFlags) {
    <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
    }
    Confirm
  </button>

  <button modal-btn-right class="btn btn-lg btn-outline-dark border-0 w-100" (click)="closeDeleteFlagModal()">
    Cancel
  </button>
</app-popup>

<!-- Manager Removal Confirmation -->
<app-popup [title]="'Remove Manager'" [paragraph1]="managerMessage" [paragraph2]="'This action cannot be undone!'"
  [isOpen]="isRemoveManagerModalOpen" (close)="closeRemoveManagerModal()">
  <button modal-btn-left class="btn btn-lg btn-danger w-100" (click)="confirmRemoveManager()"
    [disabled]="isSavingManagers">
    @if (isSavingManagers) {
    <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
    }
    Confirm
  </button>

  <button modal-btn-right class="btn btn-lg btn-outline-dark border-0 w-100" (click)="closeRemoveManagerModal()">
    Cancel
  </button>
</app-popup>