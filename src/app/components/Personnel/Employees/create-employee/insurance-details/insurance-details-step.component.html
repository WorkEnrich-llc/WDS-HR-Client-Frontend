<!-- Insurance Details Step -->
<div class="content-hug">
  <div class="content-box d-flex flex-column gap-3">
    <h2>Insurance Details</h2>
    <div class="row mb-3">
      <div class="col-md-6">
        <label class="form-label">Current Salary</label>
        <div class="form-control bg-light" readonly>
          {{ getCurrentSalary() }} EGP
        </div>
      </div>
    </div>
    <div formGroupName="insurance_details" class="w-lg-50 d-flex flex-column gap-2">
      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="includeInsuranceSalary" formControlName="include_insurance_salary">
        <label class="form-check-label" for="includeInsuranceSalary">
          Include Insurance Salary
        </label>
      </div>
      <div class="input mb-3" *ngIf="sharedService.insuranceDetails.get('include_insurance_salary')?.value">
        <label class="form-label" for="insurance_salary">Insurance Salary</label>
        <input type="number" id="insurance_salary" formControlName="insurance_salary" class="form-control"
               placeholder="Enter the Insurance Salary"
               [class.is-invalid]="sharedService.isFieldInvalid('insurance_salary', sharedService.insuranceDetails)">
        <div class="invalid-feedback" *ngIf="sharedService.isFieldInvalid('insurance_salary', sharedService.insuranceDetails)">
          {{ sharedService.getFieldError('insurance_salary', sharedService.insuranceDetails) }}
        </div>
        <small class="form-text text-muted">Insurance will be deducted based on this salary</small>
      </div>
      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="includeGrossInsuranceSalary" formControlName="include_gross_insurance_salary">
        <label class="form-check-label" for="includeGrossInsuranceSalary">
          Include Gross Insurance Salary
        </label>
      </div>
      <div class="input mb-3" *ngIf="sharedService.insuranceDetails.get('include_gross_insurance_salary')?.value">
        <label class="form-label" for="gross_insurance_salary">Gross Insurance Salary</label>
        <input type="number" id="gross_insurance_salary" formControlName="gross_insurance_salary" class="form-control"
               placeholder="Enter the Gross Insurance Salary"
               [class.is-invalid]="sharedService.isFieldInvalid('gross_insurance_salary', sharedService.insuranceDetails)">
        <div class="invalid-feedback" *ngIf="sharedService.isFieldInvalid('gross_insurance_salary', sharedService.insuranceDetails)">
          {{ sharedService.getFieldError('gross_insurance_salary', sharedService.insuranceDetails) }}
        </div>
        <small class="form-text text-muted">Taxes will be deducted based on this salary</small>
      </div>
    </div>
    <ng-container *ngIf="sharedService.errMsg()">
      <div class="alert alert-danger mb-0 mt-3" role="alert">
        {{ sharedService.errMsg() }}
      </div>
    </ng-container>
    <div class="btn-fixed d-flex align-items-stretch gap-2">
      <button type="button" class="btn btn-outline-success bg-white d-flex justify-content-center align-items-center"
              (click)="sharedService.goPrev()">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
          <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="M20 12H4m0 0l6-6m-6 6l6 6"/>
        </svg>
      </button>
      <button type="button" class="btn btn-lg btn-success d-flex justify-content-center align-items-center"
              (click)="onSubmit()" [disabled]="sharedService.isLoading()">
        <svg *ngIf="!sharedService.isLoading()" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
          <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="M4 12h16m0 0l-6-6m6 6l-6 6"/>
        </svg>
        <span>Create Employee</span>
      </button>
    </div>
  </div>
</div>