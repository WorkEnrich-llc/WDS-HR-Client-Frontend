<div class="content-hug">
    <div class="content-box d-flex flex-column gap-3">
        <h2>Main Information</h2>
        <div [formGroup]="sharedService.mainInformation" class="w-lg-50 d-flex flex-column gap-2">
            <div class="input">
                <label for="code">Employee ID (Optional)</label>
                <div class="form-outline w-100 position-relative custom-date-wrapper">
                    <input type="text" id="code" formControlName="code" class="form-control custom-date-input"
                        placeholder="0050" />
                </div>
            </div>

            <div class="input">
                <label for="name">Full Name <span>*</span></label>
                <div class="form-outline w-100 position-relative custom-date-wrapper">
                    <input type="text" id="name" formControlName="name"
                        class="form-control custom-date-input"
                        [class.is-invalid]="sharedService.isFieldInvalid('name', sharedService.mainInformation)"
                        placeholder="Enter employee full name" />
                </div>
                <p class="error-msg text-danger" *ngIf="sharedService.isFieldInvalid('name', sharedService.mainInformation)">
                    {{sharedService.getFieldError('name', sharedService.mainInformation)}}
                </p>
            </div>

            <div class="input">
                <label for="gender">Gender <span>*</span></label>
                <div class="d-flex align-items-center gap-4">
                    <div class="form-outline w-100 position-relative custom-date-wrapper">
                        <select id="gender" formControlName="gender" class="form-select"
                            [class.is-invalid]="sharedService.isFieldInvalid('gender', sharedService.mainInformation)">
                            <option value="" disabled hidden>Select Gender</option>
                            <option *ngFor="let gender of sharedService.genderOptions()" [value]="gender.id">{{gender.name}}
                            </option>
                        </select>
                    </div>
                </div>
                <p class="error-msg text-danger" *ngIf="sharedService.isFieldInvalid('gender', sharedService.mainInformation)">
                    {{sharedService.getFieldError('gender', sharedService.mainInformation)}}
                </p>
            </div>

            <div class="input">
                <label for="date_of_birth">Date of Birth <span>*</span></label>
                <div class="d-flex align-items-center gap-4">
                    <div class="form-outline w-100 position-relative custom-date-wrapper">
                        <input type="date" id="date_of_birth" formControlName="date_of_birth"
                            class="form-control custom-date-input"
                            [class.is-invalid]="sharedService.isFieldInvalid('date_of_birth', sharedService.mainInformation)" />
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <g fill="none" stroke-width="1.5">
                                <path stroke-linecap="round"
                                    d="M22 14v-2c0-3.771 0-5.657-1.172-6.828S17.771 4 14 4h-4C6.229 4 4.343 4 3.172 5.172S2 8.229 2 12v2c0 3.771 0 5.657 1.172 6.828S6.229 22 10 22h4M7 4V2.5M17 4V2.5" />
                                <circle cx="18" cy="18" r="3" />
                                <path stroke-linecap="round" d="M20.5 20.5L22 22M2.5 9h19" />
                            </g>
                        </svg>
                    </div>
                </div>
                <p class="error-msg text-danger" *ngIf="sharedService.isFieldInvalid('date_of_birth', sharedService.mainInformation)">
                    {{sharedService.getFieldError('date_of_birth', sharedService.mainInformation)}}
                </p>
            </div>

            <div class="input">
                <label for="marital_status">Marital Status <span>*</span></label>
                <div class="d-flex align-items-center gap-4">
                    <div class="form-outline w-100 position-relative custom-date-wrapper">
                        <select id="marital_status" formControlName="marital_status" class="form-select"
                            [class.is-invalid]="sharedService.isFieldInvalid('marital_status', sharedService.mainInformation)">
                            <option value="" disabled hidden>Select Marital Status</option>
                            <option *ngFor="let status of sharedService.maritalStatusOptions()" [value]="status.id">
                                {{status.name}}</option>
                        </select>
                    </div>
                </div>
                <p class="error-msg text-danger" *ngIf="sharedService.isFieldInvalid('marital_status', sharedService.mainInformation)">
                    {{sharedService.getFieldError('marital_status', sharedService.mainInformation)}}
                </p>
            </div>

            <div [formGroup]="sharedService.mobileGroup" class="input">
                <label for="phone">Phone Number <span>*</span></label>
                <div class="d-flex gap-3">
                    <div class="input w-25" #dropdownContainer>
                        <div class="form-outline position-relative">
                            <button type="button"
                                class="form-control d-flex align-items-center justify-content-between"
                                (click)="sharedService.dropdownOpen.set(!sharedService.dropdownOpen())">
                                <span class="d-flex align-items-center gap-2">
                                    <span>{{getSelectedCountry().flag}}</span>
                                    <span>{{getSelectedCountry().dialCode}}</span>
                                </span>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M7 10l5 5l5-5z" />
                                </svg>
                            </button>
                            <div class="dropdown-menu show w-100" *ngIf="sharedService.dropdownOpen()"
                                style="max-height: 200px; overflow-y: auto;">
                                <button type="button" class="dropdown-item d-flex align-items-center gap-2"
                                    *ngFor="let country of sharedService.countries()"
                                    (click)="selectCountry(country); sharedService.dropdownOpen.set(false)">
                                    <span>{{country.flag}}</span>
                                    <span>{{country.name}}</span>
                                    <span class="text-muted">{{country.dialCode}}</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="input w-75">
                        <div class="form-outline w-100 position-relative custom-date-wrapper">
                            <input type="tel" formControlName="number" class="form-control custom-date-input"
                                [class.is-invalid]="sharedService.isFieldInvalid('number', sharedService.mobileGroup)"
                                placeholder="Enter phone number" />
                        </div>
                        <p class="error-msg text-danger" *ngIf="sharedService.isFieldInvalid('number', sharedService.mobileGroup)">
                            {{sharedService.getFieldError('number', sharedService.mobileGroup)}}
                        </p>
                    </div>
                </div>
            </div>

            <div class="input">
                <label for="personal_email">Personal Email <span>*</span></label>
                <div class="form-outline w-100 position-relative custom-date-wrapper">
                    <input type="email" id="personal_email" formControlName="personal_email"
                        class="form-control custom-date-input"
                        [class.is-invalid]="sharedService.isFieldInvalid('personal_email', sharedService.mainInformation)"
                        placeholder="Enter personal email" />
                </div>
                <p class="error-msg text-danger" *ngIf="sharedService.isFieldInvalid('personal_email', sharedService.mainInformation)">
                    {{sharedService.getFieldError('personal_email', sharedService.mainInformation)}}
                </p>
            </div>

            <div class="input">
                <label for="address">Address <span>*</span></label>
                <div class="form-outline w-100 position-relative custom-date-wrapper">
                    <input type="text" id="address" formControlName="address" class="form-control custom-date-input"
                        [class.is-invalid]="sharedService.isFieldInvalid('address', sharedService.mainInformation)"
                        placeholder="Enter address" />
                </div>
                <p class="error-msg text-danger" *ngIf="sharedService.isFieldInvalid('address', sharedService.mainInformation)">
                    {{sharedService.getFieldError('address', sharedService.mainInformation)}}
                </p>
            </div>

            <div class="alert alert-danger mb-0 mt-3" role="alert" *ngIf="sharedService.errMsg()">
                {{sharedService.errMsg()}}
            </div>
        </div>

        <!-- next button -->
        <div class="btn-fixed">
            <button type="button" class="btn btn-lg btn-primary" (click)="goNext()">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
                    <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                        stroke-width="1.5" d="M4 12h16m0 0l-6-6m6 6l-6 6" />
                </svg>
                <span>Next (1/3)</span>
            </button>
        </div>
    </div>
</div>
