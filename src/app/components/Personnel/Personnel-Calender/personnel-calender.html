<!-- start page header -->
<app-page-header [breadcrumbs]="[
    { label: 'Personnel', link: '/dashboard' },
    { label: 'Personnel Calender' }
  ]" title="Personnel Calender">
</app-page-header>
<!-- end page header -->
<!-- start content -->
<div class="content-hug">
  <div class="row align-items-stretch">
    <!-- calender -->
    <div class="col-lg-8">
      <div class="content-box h-100">
        <!-- Calendar Component -->
        <app-calendar [isLoading]="isLoading" [calendarDays]="calendarDays" [currentDate]="currentDate"
          [events]="events" (monthChanged)="onMonthChanged($event)" (daySelected)="onDaySelected($event)"
          (todayClicked)="onTodayClicked()">
        </app-calendar>
      </div>
    </div>

    <!-- day details -->
    <div class="col-lg-4">
      @if (isLoading) {
      <div class="content-box position-sticky" style="top: 9.8rem;">
        <div class="sidebar-skeleton">
          <div class="skeleton-item skeleton-header"></div>
          <div class="skeleton-item skeleton-event"></div>
          <div class="skeleton-item skeleton-event"></div>
          <div class="skeleton-item skeleton-event"></div>
        </div>
      </div>
      } @else if (selectedDateFormatted) {
      <div class="content-box position-sticky" style="top: 9.8rem;">
        @if (selectedDateFormatted) {
        <div class="selected-day mb-4">
          {{ selectedDateFormatted }}
        </div>
        }
        @for (event of eventsDay; track event.title) {
        <div class="event d-flex gap-3  align-items-stretch"
          [ngClass]="event.type.toLowerCase() === 'new joiner' ? 'new-joiner' : event.type.toLowerCase() === 'end contract' ? 'end-contract' : event.type.toLowerCase()">
          <div class="border"></div>
          <div class="contain d-flex flex-column justify-content-between flex-grow-1">
            <div>
              <h5>{{event.type}}</h5>
              <h3 class="font-semi-bold">{{event.title}}</h3>
            </div>
          </div>
          @if (event.employeeId) {
          <button class="btn-view-employee" [title]="'View ' + (event.employeeName || 'Employee') + ' Profile'"
            (click)="navigateToEmployee(event.employeeId)">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g clip-path="url(#clip0_1271_19239)">
                <path
                  d="M9 0.9375H8.95697C7.22567 0.937491 5.86889 0.937483 4.81028 1.07981C3.72673 1.22549 2.87171 1.5295 2.2006 2.2006C1.5295 2.87171 1.22549 3.72673 1.07981 4.81028C0.937483 5.86889 0.937491 7.22567 0.9375 8.95697V9.04303C0.937491 10.7743 0.937483 12.1311 1.07981 13.1897C1.22549 14.2733 1.5295 15.1283 2.2006 15.7994C2.87171 16.4705 3.72673 16.7745 4.81028 16.9202C5.8689 17.0625 7.22567 17.0625 8.95697 17.0625H9.04303C10.7743 17.0625 12.1311 17.0625 13.1897 16.9202C14.2733 16.7745 15.1283 16.4705 15.7994 15.7994C16.4705 15.1283 16.7745 14.2733 16.9202 13.1897C17.0625 12.1311 17.0625 10.7743 17.0625 9.04303V9C17.0625 8.68934 16.8107 8.4375 16.5 8.4375C16.1893 8.4375 15.9375 8.68934 15.9375 9C15.9375 10.7837 15.9363 12.0648 15.8052 13.0398C15.6763 13.9986 15.4311 14.5767 15.0039 15.0039C14.5767 15.4311 13.9986 15.6763 13.0398 15.8052C12.0648 15.9363 10.7837 15.9375 9 15.9375C7.21633 15.9375 5.93517 15.9363 4.96018 15.8052C4.00138 15.6763 3.42334 15.4311 2.9961 15.0039C2.56886 14.5767 2.32369 13.9986 2.19478 13.0398C2.06369 12.0648 2.0625 10.7837 2.0625 9C2.0625 7.21633 2.06369 5.93517 2.19478 4.96018C2.32369 4.00138 2.56886 3.42334 2.9961 2.9961C3.42334 2.56886 4.00138 2.32369 4.96018 2.19478C5.93517 2.06369 7.21633 2.0625 9 2.0625C9.31066 2.0625 9.5625 1.81066 9.5625 1.5C9.5625 1.18934 9.31066 0.9375 9 0.9375Z"
                  fill="currentColor" />
                <path
                  d="M9.35225 7.85225C9.13258 8.07192 9.13258 8.42808 9.35225 8.64775C9.57192 8.86742 9.92808 8.86742 10.1477 8.64775L15.9375 2.858V5.50781C15.9375 5.81847 16.1893 6.07031 16.5 6.07031C16.8107 6.07031 17.0625 5.81847 17.0625 5.50781V1.5C17.0625 1.18934 16.8107 0.9375 16.5 0.9375H12.4922C12.1815 0.9375 11.9297 1.18934 11.9297 1.5C11.9297 1.81066 12.1815 2.0625 12.4922 2.0625H15.142L9.35225 7.85225Z"
                  fill="currentColor" />
              </g>
              <defs>
                <clipPath id="clip0_1271_19239">
                  <rect width="18" height="18" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </button>
          }
        </div>
        }
        @if (eventsDay.length<1 && selectedDateFormatted) { <div class="noevents">No events In this Day
      </div>
      }
    </div>
    }
  </div>
</div>
</div>