<!-- start page header -->
<app-page-header [breadcrumbs]="[
    { label: 'Custom Fields', link: '/custom-fields' },
    { label: 'Custom Fields' }
  ]" title="All Custom Fields">
</app-page-header>
<!-- end page header -->

<!-- start page content -->
<div class="content-hug">
   <div class="content-box d-flex flex-column gap-3">
      <!-- start search and filter -->
      <div class="d-flex flex-column flex-lg-row align-items-start align-lg-items-center justify-content-between gap-2">
         <div class="d-flex align-items-center gap-2 w-100 w-lg-50">
            <!-- Search input -->
            <div data-mdb-input-init class="form-outline w-75">
               <input type="text" class="form-control" placeholder="Search" [(ngModel)]="searchTerm"
                  (ngModelChange)="onSearchChange()" />
               <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                  <g fill="none" stroke-width="1.5">
                     <circle cx="11.5" cy="11.5" r="9.5" />
                     <path stroke-linecap="round" d="M18.5 18.5L22 22" />
                  </g>
               </svg>
            </div>
         </div>


         <button class="btn btn-lg btn-primary" routerLink="/custom-fields/manage-custom-fields">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
               <g fill="none" stroke="currentColor" stroke-width="1.5">
                  <circle cx="12" cy="12" r="10" />
                  <path stroke-linecap="round" d="M15 12h-3m0 0H9m3 0V9m0 3v3" />
               </g>
            </svg>
            <span>New Component</span>
         </button>
      </div>

      <!-- start Table -->

      <app-table [data]="customFields " [isLoading]="loadData" [columnsCount]="5" [totalItems]="totalItems"
         [itemsPerPage]="itemsPerPage" [currentPage]="currentPage" (pageChange)="onPageChange($event)"
         (itemsPerPageChange)="onItemsPerPageChange($event)" [headerTemplate]="customFieldsTableHeader"
         [rowTemplate]="customFieldTableRow" [emptyTemplate]="noCustomField"></app-table>

      <ng-template #customFieldsTableHeader>
         <th (click)="sortBy()" style="cursor: pointer;" class="w-30">
            <div class="d-flex align-items-center justify-content-between">
               <span>Custom Field</span>
               <svg xmlns="http://www.w3.org/2000/svg" *ngIf="sortDirection === 'desc'" width="24" height="24"
                  viewBox="0 0 24 24">
                  <g fill="none" stroke="#DDE3EB" stroke-linecap="round" stroke-width="1.5">
                     <path d="M4 8h9m-7 5h7m-5 5h5" />
                     <path stroke-linejoin="round" d="M17 20V4l3 4" />
                  </g>
               </svg>
               <svg xmlns="http://www.w3.org/2000/svg" *ngIf="sortDirection === 'asc'" width="24" height="24"
                  viewBox="0 0 24 24">
                  <path fill="#DDE3EB" fill-rule="evenodd"
                     d="M17 3.25a.75.75 0 0 1 .75.75v13.75l1.65-2.2a.75.75 0 1 1 1.2.9l-3 4a.75.75 0 0 1-1.35-.45V4a.75.75 0 0 1 .75-.75M7.25 6A.75.75 0 0 1 8 5.25h5a.75.75 0 0 1 0 1.5H8A.75.75 0 0 1 7.25 6m-2 5a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75m-2 5a.75.75 0 0 1 .75-.75h9a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.75-.75"
                     clip-rule="evenodd" />
               </svg>
            </div>
         </th>
         <th class="w-20">Information Section</th>
         <th class="w-20">Data Type</th>
         <th class="w-20">Mandatory</th>
         <th class="w-10">Actions</th>
      </ng-template>

      <ng-template #customFieldTableRow let-customField let-i="index">
         <td>
            <!-- <span class="d-block text-gray-sm">{{ customField.id.toString().padStart(4, '0') }}</span> -->
            <span class="d-block text-truncate" style="max-width: 300px;">
               {{ customField.input_option.label }}
            </span>
         </td>
         <td>
            {{ customField.target_model }}
         </td>
         <td>
            {{customField.input_option.type}}
         </td>
         <td>

            @if(customField.input_option.required){<div class="badge-newjoiner">
               <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                     d="M11.0852 6.58525C11.3049 6.36558 11.3049 6.00942 11.0852 5.78975C10.8656 5.57008 10.5094 5.57008 10.2898 5.78975L6.9375 9.142L5.83525 8.03975C5.61558 7.82008 5.25942 7.82008 5.03975 8.03975C4.82008 8.25942 4.82008 8.61558 5.03975 8.83525L6.53975 10.3352C6.75942 10.5549 7.11558 10.5549 7.33525 10.3352L11.0852 6.58525Z"
                     fill="#377AFD" />
                  <path fill-rule="evenodd" clip-rule="evenodd"
                     d="M8.0625 0C3.6097 0 0 3.6097 0 8.0625C0 12.5153 3.6097 16.125 8.0625 16.125C12.5153 16.125 16.125 12.5153 16.125 8.0625C16.125 3.6097 12.5153 0 8.0625 0ZM1.125 8.0625C1.125 4.23102 4.23102 1.125 8.0625 1.125C11.894 1.125 15 4.23102 15 8.0625C15 11.894 11.894 15 8.0625 15C4.23102 15 1.125 11.894 1.125 8.0625Z"
                     fill="#377AFD" />
               </svg>

               <span>{{'Yes'}}</span>
            </div>
            }
            @else{<div class="badge-gray">
               <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_3133_17902)">
                     <g clip-path="url(#clip1_3133_17902)">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                           d="M9 0.9375C4.5472 0.9375 0.9375 4.5472 0.9375 9C0.9375 13.4528 4.5472 17.0625 9 17.0625C13.4528 17.0625 17.0625 13.4528 17.0625 9C17.0625 4.5472 13.4528 0.9375 9 0.9375ZM2.0625 9C2.0625 5.16852 5.16852 2.0625 9 2.0625C10.7134 2.0625 12.2817 2.68363 13.492 3.71299C13.487 3.71764 13.4821 3.72239 13.4773 3.72725L3.72727 13.4771C3.72238 13.482 3.7176 13.4869 3.71292 13.492C2.6836 12.2816 2.0625 10.7133 2.0625 9ZM4.50787 14.2869C5.71824 15.3163 7.28658 15.9375 9 15.9375C12.8315 15.9375 15.9375 12.8315 15.9375 9C15.9375 7.28662 15.3164 5.71832 14.287 4.50797C14.2824 4.51296 14.2776 4.51789 14.2727 4.52276L4.52276 14.2726C4.51786 14.2775 4.5129 14.2823 4.50787 14.2869Z"
                           fill="#4A6D97" />
                     </g>
                  </g>
               </svg>

               <span>{{'No'}}</span>
            </div>
            }
         </td>
         <td>
            <div class="d-flex justify-content-start gap-4 align-items-center w-100">
               <a class="edit-btn " data-bs-toggle="tooltip" data-bs-placement="top" title="Edit"
                  (click)="navigateToEdit(customField.id)">
                  <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                     <path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"
                        d="M8.01947 1.58655e-07L9.1875 3.37469e-07C9.49816 3.37469e-07 9.75 0.25184 9.75 0.5625C9.75 0.873161 9.49816 1.125 9.1875 1.125H8.0625C6.27883 1.125 4.99767 1.12619 4.02268 1.25728C3.06388 1.38619 2.48584 1.63136 2.0586 2.0586C1.63136 2.48584 1.38619 3.06388 1.25728 4.02268C1.12619 4.99767 1.125 6.27883 1.125 8.0625C1.125 9.84617 1.12619 11.1273 1.25728 12.1023C1.38619 13.0611 1.63136 13.6392 2.0586 14.0664C2.48584 14.4936 3.06388 14.7388 4.02268 14.8677C4.99767 14.9988 6.27883 15 8.0625 15C9.84617 15 11.1273 14.9988 12.1023 14.8677C13.0611 14.7388 13.6392 14.4936 14.0664 14.0664C14.4936 13.6392 14.7388 13.0611 14.8677 12.1023C14.9988 11.1273 15 9.84617 15 8.0625V6.9375C15 6.62684 15.2518 6.375 15.5625 6.375C15.8732 6.375 16.125 6.62684 16.125 6.9375V8.10553C16.125 9.83683 16.125 11.1936 15.9827 12.2522C15.837 13.3358 15.533 14.1908 14.8619 14.8619C14.1908 15.533 13.3358 15.837 12.2522 15.9827C11.1936 16.125 9.83683 16.125 8.10553 16.125H8.01947C6.28817 16.125 4.9314 16.125 3.87278 15.9827C2.78923 15.837 1.93421 15.533 1.2631 14.8619C0.591995 14.1908 0.28799 13.3358 0.14231 12.2522C-1.71438e-05 11.1936 -9.4973e-06 9.83683 1.58655e-07 8.10553V8.01947C-9.4973e-06 6.28817 -1.71438e-05 4.93139 0.14231 3.87278C0.28799 2.78923 0.591995 1.93421 1.2631 1.2631C1.93421 0.591995 2.78923 0.28799 3.87278 0.14231C4.93139 -1.71438e-05 6.28817 -9.4973e-06 8.01947 1.58655e-07ZM11.6404 0.769436C12.6663 -0.256478 14.3296 -0.256478 15.3556 0.769436C16.3815 1.79535 16.3815 3.45869 15.3556 4.4846L10.3695 9.47068C10.091 9.74918 9.9166 9.92364 9.72194 10.0755C9.49266 10.2543 9.24459 10.4076 8.98211 10.5327C8.75926 10.6389 8.52521 10.7169 8.15159 10.8414L5.9732 11.5675C5.57101 11.7016 5.1276 11.5969 4.82783 11.2972C4.52806 10.9974 4.42339 10.554 4.55745 10.1518L5.28358 7.97342C5.40809 7.59979 5.48609 7.36574 5.5923 7.14289C5.71739 6.88041 5.87071 6.63234 6.04953 6.40306C6.20137 6.2084 6.37583 6.03397 6.65433 5.7555L11.6404 0.769436ZM14.5601 1.56493C13.9735 0.978357 13.0225 0.978357 12.4359 1.56493L12.1534 1.8474C12.1705 1.91929 12.1943 2.00495 12.2274 2.1005C12.3349 2.41029 12.5383 2.81829 12.9225 3.2025C13.3067 3.5867 13.7147 3.7901 14.0245 3.89758C14.12 3.93073 14.2057 3.95455 14.2776 3.97157L14.5601 3.68911C15.1466 3.10253 15.1466 2.15151 14.5601 1.56493ZM13.3914 4.85782C13.0044 4.6914 12.5536 4.42459 12.127 3.99799C11.7004 3.57139 11.4336 3.12062 11.2672 2.73364L7.47563 6.52519C7.16325 6.83758 7.04073 6.96147 6.93661 7.09496C6.80803 7.25981 6.6978 7.43817 6.60786 7.62689C6.53502 7.77972 6.47901 7.9447 6.3393 8.36381L6.01538 9.33557L6.78943 10.1096L7.76119 9.7857C8.1803 9.64599 8.34528 9.58997 8.49811 9.51714C8.68683 9.4272 8.86519 9.31697 9.03004 9.18839C9.16353 9.08427 9.28742 8.96176 9.59981 8.64937L13.3914 4.85782Z" />
                  </svg>
               </a>
               <a class="edit-btn" data-bs-toggle="tooltip" data-bs-placement="top" title="Remove"
                  (click)="openDeleteModal(customField.input_option.id)">

                  <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                     <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M5.66952 1.42113e-05H8.2056C8.3679 -8.93219e-05 8.50929 -0.000179489 8.64281 0.0211409C9.17028 0.10537 9.62673 0.43436 9.87344 0.908129C9.93588 1.02805 9.98051 1.16221 10.0317 1.31621L10.1154 1.56738C10.1296 1.6099 10.1337 1.62193 10.1371 1.63141C10.2684 1.9945 10.609 2.23995 10.995 2.24973C11.0051 2.24998 11.0175 2.25003 11.0626 2.25003H13.3126C13.6232 2.25003 13.8751 2.50187 13.8751 2.81253C13.8751 3.12319 13.6232 3.37503 13.3126 3.37503H0.5625C0.25184 3.37503 0 3.12319 0 2.81253C0 2.50187 0.25184 2.25003 0.5625 2.25003H2.81256C2.8576 2.25003 2.87003 2.24999 2.88017 2.24973C3.26616 2.23995 3.60668 1.99452 3.73802 1.63143C3.74147 1.62188 3.74544 1.61011 3.75968 1.56738L3.84339 1.31622C3.89461 1.16223 3.93924 1.02805 4.00169 0.90813C4.2484 0.434361 4.70485 0.10537 5.23232 0.0211409C5.36584 -0.000179489 5.50723 -8.93219e-05 5.66952 1.42113e-05ZM4.69361 2.25003C4.73225 2.17426 4.76648 2.09553 4.79593 2.01411C4.80487 1.98939 4.81365 1.96307 4.82492 1.92925L4.89977 1.70469C4.96815 1.49956 4.98389 1.45772 4.99951 1.42773C5.08174 1.26981 5.23389 1.16014 5.40972 1.13207C5.44311 1.12673 5.48777 1.12503 5.70401 1.12503H8.17112C8.38735 1.12503 8.43201 1.12673 8.46541 1.13207C8.64123 1.16014 8.79338 1.26981 8.87562 1.42773C8.89124 1.45772 8.90698 1.49955 8.97536 1.70469L9.05016 1.92912L9.0792 2.01413C9.10865 2.09554 9.14288 2.17427 9.18151 2.25003H4.69361Z"
                        fill="#E04F5F" />
                     <path
                        d="M2.37382 4.65011C2.35315 4.34014 2.08512 4.10561 1.77515 4.12627C1.46517 4.14694 1.23064 4.41497 1.25131 4.72495L1.5989 9.93875C1.66302 10.9008 1.71481 11.6779 1.83629 12.2877C1.96259 12.9217 2.17741 13.4512 2.6211 13.8663C3.0648 14.2814 3.60746 14.4606 4.24845 14.5444C4.86497 14.6251 5.64378 14.625 6.60795 14.625H7.26713C8.23129 14.625 9.01016 14.6251 9.62668 14.5444C10.2677 14.4606 10.8103 14.2814 11.254 13.8663C11.6977 13.4512 11.9125 12.9217 12.0388 12.2877C12.1603 11.6779 12.2121 10.9008 12.2762 9.93876L12.6238 4.72495C12.6445 4.41497 12.41 4.14694 12.1 4.12627C11.79 4.10561 11.522 4.34014 11.5013 4.65011L11.1564 9.82445C11.089 10.8353 11.0409 11.5387 10.9355 12.0679C10.8333 12.5813 10.6905 12.853 10.4854 13.0448C10.2804 13.2367 9.99976 13.361 9.48076 13.4289C8.94571 13.4989 8.24071 13.5 7.22757 13.5H6.64755C5.63442 13.5 4.92942 13.4989 4.39436 13.4289C3.87536 13.361 3.59474 13.2367 3.38968 13.0448C3.18462 12.853 3.04187 12.5812 2.93961 12.0679C2.83419 11.5387 2.78617 10.8353 2.71877 9.82445L2.37382 4.65011Z"
                        fill="#E04F5F" />
                     <path
                        d="M5.0066 6.00282C5.31572 5.97191 5.59136 6.19744 5.62228 6.50656L5.99728 10.2566C6.02819 10.5657 5.80266 10.8413 5.49354 10.8722C5.18442 10.9031 4.90877 10.6776 4.87786 10.3685L4.50286 6.6185C4.47195 6.30938 4.69748 6.03373 5.0066 6.00282Z"
                        fill="#E04F5F" />
                     <path
                        d="M8.86854 6.00282C9.17766 6.03373 9.40319 6.30938 9.37228 6.6185L8.99728 10.3685C8.96636 10.6776 8.69072 10.9031 8.3816 10.8722C8.07248 10.8413 7.84695 10.5657 7.87786 10.2566L8.25286 6.50656C8.28377 6.19744 8.55942 5.97191 8.86854 6.00282Z"
                        fill="#E04F5F" />
                  </svg>

               </a>
            </div>
         </td>

      </ng-template>

      <ng-template #noCustomField>
         <tr>
            <td colspan="7" class="no-data py-4">
               @if(searchTerm){
               <ng-container>
                  No Custom field match your search.
               </ng-container>
               }
               @else{
               <ng-template>
                  No Custom field Added Yet.
               </ng-template>
               }

            </td>
         </tr>
      </ng-template>
   </div>
</div>

<!--Delete Confirmation Modal-->
<app-popup [title]="'Delete Field'" [paragraph1]="'Are you Sure you want to Delete this field?'"
   [paragraph2]="'This action cannot be undone!'" [isOpen]="isDeleteModalOpen" (close)="closeDeleteModal()">
   <button modal-btn-left class="btn btn-lg btn-danger w-100" (click)="confirmRemove()">
      @if(isLoading){
      <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
      }@else{
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
         <g fill="none" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round"
               d="M5.73 0.687514H8.2681C8.4304 0.687411 8.57179 0.687321 8.70531 0.708641C9.23278 0.79287 9.68923 1.12186 9.93594 1.59563C9.99838 1.71555 10.043 1.84971 10.0942 2.00371L10.1779 2.25488C10.1921 2.2974 10.1962 2.30943 10.1996 2.31891C10.3309 2.682 10.6715 2.92745 11.0575 2.93723C11.0676 2.93748 11.08 2.93753 11.1251 2.93753H13.3751C13.6857 2.93753 13.9376 3.18937 13.9376 3.50003C13.9376 3.81069 13.6857 4.06253 13.3751 4.06253H0.625C0.31434 4.06253 0.0625 3.81069 0.0625 3.50003C0.0625 3.18937 0.31434 2.93753 0.625 2.93753H2.87506C2.9201 2.93753 2.93253 2.93749 2.94267 2.93723C3.32866 2.92745 3.66918 2.68202 3.80052 2.31893C3.80397 2.30938 3.80794 2.29761 3.82218 2.25488L3.90589 2.00372C3.95711 1.84973 4.00174 1.71555 4.06419 1.59563C4.3109 1.12186 4.76735 0.79287 5.29482 0.708641C5.42834 0.687321 5.56973 0.687411 5.73202 0.687514ZM4.75611 2.93753C4.79475 2.86176 4.82898 2.78303 4.85843 2.70161C4.86737 2.67689 4.87615 2.65057 4.88742 2.61675L4.96227 2.39219C5.03065 2.18706 5.04639 2.14522 5.06201 2.11523C5.14424 1.95731 5.29639 1.84764 5.47222 1.81957C5.50561 1.81423 5.55027 1.81253 5.76651 1.81253H8.23362C8.44985 1.81253 8.49451 1.81423 8.52791 1.81957C8.70373 1.84764 8.85588 1.95731 8.93812 2.11523C8.95374 2.14522 8.96948 2.18705 9.03786 2.39219L9.11266 2.61662L9.1417 2.70163C9.17115 2.78304 9.20538 2.86177 9.24401 2.93753H4.75611Z" />
            <path stroke-linecap="round"
               d="M2.43632 5.33761C2.41565 5.02764 2.14762 4.79311 1.83765 4.81377C1.52767 4.83444 1.29314 5.10247 1.31381 5.41245L1.6614 10.6262C1.72552 11.5883 1.77731 12.3654 1.89879 12.9752C2.02509 13.6092 2.23991 14.1387 2.6836 14.5538C3.1273 14.9689 3.66996 15.1481 4.31095 15.2319C4.92747 15.3126 5.70628 15.3125 6.67045 15.3125H7.32963C8.29379 15.3125 9.07266 15.3126 9.68918 15.2319C10.3302 15.1481 10.8728 14.9689 11.3165 14.5538C11.7602 14.1387 11.975 13.6092 12.1013 12.9752C12.2228 12.3654 12.2746 11.5883 12.3387 10.6263L12.6863 5.41245C12.707 5.10247 12.4725 4.83444 12.1625 4.81377C11.8525 4.79311 11.5845 5.02764 11.5638 5.33761L11.2189 10.5119C11.1515 11.5228 11.1034 12.2262 10.998 12.7554C10.8958 13.2688 10.753 13.5405 10.5479 13.7323C10.3429 13.9242 10.0623 14.0485 9.54326 14.1164C9.00821 14.1864 8.30321 14.1875 7.29007 14.1875H6.71005C5.69692 14.1875 4.99192 14.1864 4.45686 14.1164C3.93786 14.0485 3.65724 13.9242 3.45218 13.7323C3.24712 13.5405 3.10437 13.2687 3.00211 12.7554C2.89669 12.2262 2.84867 11.5228 2.78127 10.5119L2.43632 5.33761Z" />
            <path stroke-linecap="round"
               d="M5.0691 6.69032C5.37822 6.65941 5.65386 6.88494 5.68478 7.19406L6.05978 10.9441C6.09069 11.2532 5.86516 11.5288 5.55604 11.5597C5.24692 11.5906 4.97127 11.3651 4.94036 11.056L4.56536 7.306C4.53445 6.99688 4.75998 6.72123 5.0691 6.69032Z" />
            <path stroke-linecap="round"
               d="M8.93104 6.69032C9.24016 6.72123 9.46569 6.99688 9.43478 7.306L9.05978 11.056C9.02886 11.3651 8.75322 11.5906 8.4441 11.5597C8.13498 11.5288 7.90945 11.2532 7.94036 10.9441L8.31536 7.19406C8.34627 6.88494 8.62192 6.65941 8.93104 6.69032Z" />
         </g>
      </svg>
      }
      <span>Delete</span>
   </button>
   <button modal-btn-right class="btn btn-lg btn-outline-dark border-0 w-100" (click)="closeDeleteModal()">
      Close
   </button>
</app-popup>