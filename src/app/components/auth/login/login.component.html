<div class="card-top">
  <div class="row align-items-center g-3">
    <div class="col-8">
      <h2>login</h2>
      <p>Please enter your email and password to log in.</p>
      <p class="link">
        Don't have an account?
        <a href="" routerLink="/auth/register" target="_self">Create Account</a>
      </p>
    </div>
    <div class="col-4">
      <img src="./images/logo_with_slog.png" alt="WDS logo">
    </div>
  </div>
</div>

<div class="card-bottom">
  <!-- step1 -->
  <div class="login-info">
    <div class="row align-items-center g-4">
      <div class="col-6">
        <form [formGroup]="loginForm" class="w-100 d-flex flex-column gap-2">
          <div class="input">
            <label for="email"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <g fill="none" stroke-width="1.5">
                  <path
                    d="M2 12c0-3.771 0-5.657 1.172-6.828S6.229 4 10 4h4c3.771 0 5.657 0 6.828 1.172S22 8.229 22 12s0 5.657-1.172 6.828S17.771 20 14 20h-4c-3.771 0-5.657 0-6.828-1.172S2 15.771 2 12Z" />
                  <path stroke-linecap="round"
                    d="m6 8l2.159 1.8c1.837 1.53 2.755 2.295 3.841 2.295s2.005-.765 3.841-2.296L18 8" />
                </g>
              </svg> Email</label>
            <div class="d-flex align-items-center gap-4">
              <div class="form-outline w-100 position-relative custom-date-wrapper">
                <input formControlName="email" type="email" id="email" class="form-control" placeholder="Input Here" autocomplete = "email" inputmode = "email"
                  [ngClass]="{
          'error-input': loginForm.get('email')?.touched && loginForm.get('email')?.invalid,
          'success-input': loginForm.get('email')?.touched && loginForm.get('email')?.valid
        }">
              </div>
            </div>

            @if (loginForm.get('email')?.touched && loginForm.get('email')?.errors?.['required']) {
            <p class="error-msg">
              Email is required.
            </p>
            }
            @if (loginForm.get('email')?.touched && loginForm.get('email')?.errors?.['email']) {
            <p class="error-msg">
              Please enter a valid email address.
            </p>
            }
          </div>



          <div class="input">
            <label for="password"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <g fill="none">
                  <path stroke-width="1.5"
                    d="M2 16c0-2.828 0-4.243.879-5.121C3.757 10 5.172 10 8 10h8c2.828 0 4.243 0 5.121.879C22 11.757 22 13.172 22 16s0 4.243-.879 5.121C20.243 22 18.828 22 16 22H8c-2.828 0-4.243 0-5.121-.879C2 20.243 2 18.828 2 16Z" />
                  <path stroke-linecap="round" stroke-width="1.5" d="M6 10V8a6 6 0 1 1 12 0v2" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M8 16h.009m3.982 0H12m3.991 0H16" />
                </g>
              </svg> Password</label>
            <div class="d-flex align-items-center gap-4">
              <div class="form-outline w-100 position-relative custom-date-wrapper">
                <input formControlName="password" [type]="isPasswordVisible ? 'text' : 'password'" id="password"
                  class="form-control" placeholder="Input Here" [ngClass]="{
         'error-input': loginForm.get('password')?.touched && loginForm.get('password')?.invalid,
         'success-input': loginForm.get('password')?.touched && loginForm.get('password')?.valid
       }">

                <a type="button"
                  class="btn p-0 border-0 shadow-none position-absolute end-0 top-50 translate-middle-y toggle-password"
                  (click)="togglePassword()">
                  @if(!isPasswordVisible){
                  <svg width="18" height="9" viewBox="0 0 18 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M16.7216 0.732973C17.0071 0.855347 17.1394 1.18603 17.017 1.47157L16.5 1.24999C17.017 1.47157 17.0171 1.47144 17.017 1.47157L17.0165 1.47283L17.0157 1.47469L17.0133 1.48021L17.0053 1.49827C16.9985 1.51337 16.9889 1.53453 16.9765 1.5613C16.9515 1.61481 16.915 1.6908 16.8666 1.78561C16.77 1.97509 16.6257 2.2405 16.4314 2.55234C16.1122 3.06462 15.6543 3.70823 15.0465 4.34763L15.7727 5.07387C15.9924 5.29354 15.9924 5.6497 15.7727 5.86937C15.5531 6.08904 15.1969 6.08904 14.9773 5.86937L14.2268 5.11893C13.7321 5.53345 13.1647 5.92252 12.5213 6.24216L13.2215 7.31821C13.3909 7.5786 13.3172 7.92704 13.0568 8.09647C12.7964 8.2659 12.448 8.19216 12.2785 7.93177L11.4617 6.67635C10.8771 6.86723 10.2443 6.99695 9.5625 7.04346V8.37499C9.5625 8.68565 9.31066 8.93749 9 8.93749C8.68934 8.93749 8.4375 8.68565 8.4375 8.37499V7.04346C7.77673 6.99839 7.16188 6.87515 6.59243 6.69379L5.78687 7.93182C5.61744 8.19221 5.269 8.26595 5.00861 8.09652C4.74822 7.92709 4.67448 7.57865 4.84391 7.31826L5.52822 6.26657C4.87994 5.94998 4.30792 5.56262 3.80887 5.14868L3.08814 5.86942C2.86847 6.08909 2.51231 6.08909 2.29264 5.86942C2.07297 5.64975 2.07297 5.29359 2.29264 5.07392L2.98547 4.3811C2.36705 3.73633 1.9015 3.08491 1.57713 2.56599C1.37994 2.25052 1.2335 1.98173 1.13547 1.78976C1.08642 1.69371 1.04938 1.6167 1.02408 1.56247C1.01143 1.53535 1.0017 1.5139 0.994868 1.4986L0.986773 1.48031L0.984341 1.47473L0.983527 1.47284L0.983221 1.47213C0.983164 1.472 0.982981 1.47157 1.5 1.24999L0.983221 1.47213C0.860846 1.18659 0.992879 0.855348 1.27842 0.732973C1.56373 0.610698 1.8941 0.742653 2.01672 1.02771C2.01667 1.02761 2.01676 1.02781 2.01672 1.02771L2.01743 1.02935L2.02199 1.03964C2.02641 1.04953 2.0336 1.06542 2.0436 1.08685C2.0636 1.12972 2.09478 1.19468 2.13738 1.2781C2.22265 1.44506 2.35327 1.6852 2.5311 1.96969C2.8878 2.54035 3.42873 3.28031 4.16676 3.96619C4.81619 4.56972 5.612 5.12566 6.56379 5.49185C7.27966 5.76726 8.08909 5.93749 9 5.93749C9.93128 5.93749 10.7566 5.75956 11.4844 5.4731C12.4304 5.10074 13.2208 4.54118 13.865 3.93648C14.5922 3.25397 15.1252 2.52136 15.4766 1.95739C15.6518 1.67622 15.7805 1.43919 15.8645 1.27449C15.9064 1.19221 15.9371 1.12817 15.9568 1.08593C15.9667 1.06481 15.9738 1.04916 15.9781 1.03942L15.9826 1.02931L15.983 1.02841C15.9829 1.02849 15.983 1.02834 15.983 1.02841M16.7216 0.732973C16.4361 0.610629 16.1054 0.743023 15.983 1.02841L16.7216 0.732973ZM2.01672 1.02771C2.01667 1.02761 2.01676 1.02781 2.01672 1.02771V1.02771Z"
                      fill="#4A6D97" />
                  </svg>
                  }

                  @if(isPasswordVisible){
                  <svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M9 4.1875C7.4467 4.1875 6.1875 5.4467 6.1875 7C6.1875 8.5533 7.4467 9.8125 9 9.8125C10.5533 9.8125 11.8125 8.5533 11.8125 7C11.8125 5.4467 10.5533 4.1875 9 4.1875ZM7.3125 7C7.3125 6.06802 8.06802 5.3125 9 5.3125C9.93198 5.3125 10.6875 6.06802 10.6875 7C10.6875 7.93198 9.93198 8.6875 9 8.6875C8.06802 8.6875 7.3125 7.93198 7.3125 7Z"
                      fill="#4A6D97" />
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M9 0.4375C5.6144 0.4375 3.33397 2.46565 2.01043 4.18515L1.98656 4.21615C1.68723 4.6049 1.41155 4.96294 1.22452 5.3863C1.02423 5.83965 0.9375 6.33377 0.9375 7C0.9375 7.66623 1.02423 8.16035 1.22452 8.6137C1.41155 9.03706 1.68723 9.3951 1.98656 9.78386L2.01043 9.81485C3.33397 11.5344 5.6144 13.5625 9 13.5625C12.3856 13.5625 14.666 11.5344 15.9896 9.81485L16.0134 9.78387C16.3128 9.39511 16.5885 9.03707 16.7755 8.6137C16.9758 8.16035 17.0625 7.66623 17.0625 7C17.0625 6.33377 16.9758 5.83965 16.7755 5.3863C16.5885 4.96293 16.3128 4.60489 16.0134 4.21613L15.9896 4.18515C14.666 2.46565 12.3856 0.4375 9 0.4375ZM2.90191 4.87135C4.12398 3.28369 6.11277 1.5625 9 1.5625C11.8872 1.5625 13.876 3.28369 15.0981 4.87135C15.427 5.29869 15.6197 5.55404 15.7464 5.84091C15.8649 6.10901 15.9375 6.4367 15.9375 7C15.9375 7.5633 15.8649 7.89099 15.7464 8.15909C15.6197 8.44596 15.427 8.70131 15.0981 9.12865C13.876 10.7163 11.8872 12.4375 9 12.4375C6.11277 12.4375 4.12398 10.7163 2.90191 9.12865C2.57298 8.70131 2.3803 8.44596 2.25357 8.15909C2.13513 7.89099 2.0625 7.5633 2.0625 7C2.0625 6.4367 2.13513 6.10901 2.25357 5.84091C2.3803 5.55404 2.57298 5.29869 2.90191 4.87135Z"
                      fill="#4A6D97" />
                  </svg>
                  }
                </a>

              </div>
            </div>


            @if (loginForm.get('password')?.touched && loginForm.get('password')?.errors?.['required']) {
            <p class="error-msg">
              Password is required.
            </p>
            }
          </div>


          @if (errMsg) {
          <div class="alert alert-danger mb-0 mt-2" role="alert">
            {{errMsg}}
          </div>
          }


          <a href="" class="forgrt-pass ms-auto my-3" routerLink="/auth/reset-password">Forgot password?</a>

          <button class="btn btn-lg btn-primary w-100" (click)="login()" [disabled]="isLoading || !loginForm.valid">
            @if (isLoading) {
            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
            }
            @if (!isLoading) {
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
              <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="M4 12h16m0 0l-6-6m6 6l-6 6" />
            </svg>
            }
            <span>Login</span>
          </button>
        </form>

      </div>
      <div class="d-none d-md-block col-md-6 text-center">
        <img src="./images/verify.svg" alt="WDS logo">
      </div>
    </div>
  </div>
</div>