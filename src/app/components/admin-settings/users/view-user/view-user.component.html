<!-- start page header -->
<app-page-header [breadcrumbs]="[
    { label: 'Admin Settings', link: '/cloud' },
    { label: 'Users',link:'/users' },
    { label: 'User Details' + userId},
  ]" [title]="'User Details ' + userId" [create]="createDate" [update]="updatedDate">
    <!-- [create]="(userInfo.created_at | date:'dd/MM/yyyy') ?? ''" -->
    <!-- [update]="(userInfo.updated_at | date:'dd/MM/yyyy') ?? ''" -->

    @if(userInfo?.status === userStatus.Active || userInfo?.status === userStatus.Inactive || userInfo?.status ===
    userStatus.Pending ){
    @if (!userInfo?.is_active) {
    <button class="btn btn-lg btn-outline-success" (click)="openActivate()">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="1.5"
                d="M12 2v4M8.5 3.706A9.003 9.003 0 0 0 12 21a9 9 0 0 0 3.5-17.294" />
        </svg>
        <span>Activate</span>
    </button>
    }

    @if(userInfo?.is_active){
    <button class="btn btn-lg btn-outline-danger" (click)="openDeactivate()">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="1.5"
                d="M12 2v4M8.5 3.706A9.003 9.003 0 0 0 12 21a9 9 0 0 0 3.5-17.294" />
        </svg>
        <span>Deactivate</span>
    </button>
    }

    <button class="btn btn-lg btn-primary" [routerLink]="['/users/edit-user', userInfo?.id]">
        <svg width="17" height="18" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
                d="M8.70697 0.9375L9.875 0.9375C10.1857 0.9375 10.4375 1.18934 10.4375 1.5C10.4375 1.81066 10.1857 2.0625 9.875 2.0625H8.75C6.96633 2.0625 5.68517 2.06369 4.71018 2.19478C3.75138 2.32369 3.17334 2.56886 2.7461 2.9961C2.31886 3.42334 2.07369 4.00138 1.94478 4.96018C1.81369 5.93517 1.8125 7.21633 1.8125 9C1.8125 10.7837 1.81369 12.0648 1.94478 13.0398C2.07369 13.9986 2.31886 14.5767 2.7461 15.0039C3.17334 15.4311 3.75138 15.6763 4.71018 15.8052C5.68517 15.9363 6.96633 15.9375 8.75 15.9375C10.5337 15.9375 11.8148 15.9363 12.7898 15.8052C13.7486 15.6763 14.3267 15.4311 14.7539 15.0039C15.1811 14.5767 15.4263 13.9986 15.5552 13.0398C15.6863 12.0648 15.6875 10.7837 15.6875 9V7.875C15.6875 7.56434 15.9393 7.3125 16.25 7.3125C16.5607 7.3125 16.8125 7.56434 16.8125 7.875V9.04303C16.8125 10.7743 16.8125 12.1311 16.6702 13.1897C16.5245 14.2733 16.2205 15.1283 15.5494 15.7994C14.8783 16.4705 14.0233 16.7745 12.9397 16.9202C11.8811 17.0625 10.5243 17.0625 8.79303 17.0625H8.70697C6.97567 17.0625 5.6189 17.0625 4.56028 16.9202C3.47673 16.7745 2.62171 16.4705 1.9506 15.7994C1.2795 15.1283 0.97549 14.2733 0.82981 13.1897C0.687483 12.1311 0.687491 10.7743 0.6875 9.04303V8.95697C0.687491 7.22567 0.687483 5.86889 0.82981 4.81028C0.97549 3.72673 1.2795 2.87171 1.9506 2.2006C2.62171 1.5295 3.47673 1.22549 4.56028 1.07981C5.61889 0.937483 6.97567 0.937491 8.70697 0.9375ZM12.3279 1.70694C13.3538 0.681022 15.0171 0.681022 16.0431 1.70694C17.069 2.73285 17.069 4.39619 16.0431 5.4221L11.057 10.4082C10.7785 10.6867 10.6041 10.8611 10.4094 11.013C10.1802 11.1918 9.93209 11.3451 9.66961 11.4702C9.44676 11.5764 9.21271 11.6544 8.83909 11.7789L6.6607 12.505C6.25851 12.6391 5.8151 12.5344 5.51533 12.2347C5.21556 11.9349 5.11089 11.4915 5.24495 11.0893L5.97108 8.91092C6.09559 8.53729 6.17359 8.30324 6.2798 8.08039C6.40489 7.81791 6.55821 7.56984 6.73703 7.34056C6.88887 7.1459 7.06333 6.97147 7.34183 6.693L12.3279 1.70694ZM15.2476 2.50243C14.661 1.91586 13.71 1.91586 13.1234 2.50243L12.8409 2.7849C12.858 2.85679 12.8818 2.94245 12.9149 3.038C13.0224 3.34779 13.2258 3.75579 13.61 4.14C13.9942 4.5242 14.4022 4.7276 14.712 4.83508C14.8075 4.86823 14.8932 4.89205 14.9651 4.90907L15.2476 4.62661C15.8341 4.04003 15.8341 3.08901 15.2476 2.50243ZM14.0789 5.79532C13.6919 5.6289 13.2411 5.36209 12.8145 4.93549C12.3879 4.50889 12.1211 4.05812 11.9547 3.67114L8.16313 7.46269C7.85075 7.77508 7.72823 7.89897 7.62411 8.03246C7.49553 8.19731 7.3853 8.37567 7.29536 8.56439C7.22252 8.71722 7.16651 8.8822 7.0268 9.30131L6.70288 10.2731L7.47693 11.0471L8.44869 10.7232C8.8678 10.5835 9.03278 10.5275 9.18561 10.4546C9.37433 10.3647 9.55269 10.2545 9.71754 10.1259C9.85103 10.0218 9.97492 9.89926 10.2873 9.58687L14.0789 5.79532Z"
                fill="#E0EBFF" />
        </svg>
        <span>Edit</span>
    </button>
    }

    @if (userInfo?.status === userStatus.Expired) {
    <button class="btn btn-lg btn-outline-primary" (click)="resendInvitation()">

        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
                d="M12.8578 1.72312C11.9803 1.87922 10.7973 2.27196 9.13702 2.82538L5.37856 4.0782C4.04354 4.52321 3.07658 4.84601 2.3936 5.1365C1.67954 5.4402 1.42553 5.65189 1.34304 5.7938C1.08893 6.23089 1.08893 6.77072 1.34304 7.2078C1.42553 7.34971 1.67954 7.5614 2.3936 7.8651C3.07658 8.15559 4.04354 8.47839 5.37856 8.9234C5.39964 8.93043 5.42045 8.93735 5.44101 8.94419C5.72573 9.0389 5.96096 9.11714 6.16648 9.22461L10.159 5.27608C10.3853 5.0523 10.7501 5.05433 10.9739 5.2806C11.1977 5.50688 11.1957 5.87172 10.9694 6.0955L6.99445 10.0266C7.11837 10.2455 7.20225 10.4977 7.30581 10.809C7.31265 10.8295 7.31957 10.8504 7.3266 10.8714C7.77161 12.2065 8.09441 13.1734 8.3849 13.8564C8.68859 14.5705 8.90029 14.8245 9.04219 14.907C9.47928 15.1611 10.0191 15.1611 10.4562 14.907C10.5981 14.8245 10.8098 14.5705 11.1135 13.8564C11.404 13.1734 11.7268 12.2065 12.1718 10.8714L13.4246 7.11299C13.978 5.45272 14.3708 4.2697 14.5269 3.39222C14.6837 2.51056 14.5639 2.13605 14.3389 1.91109C14.114 1.68614 13.7394 1.56628 12.8578 1.72312ZM12.6559 0.588477C13.6326 0.41474 14.5122 0.45456 15.1538 1.09618C15.7954 1.73781 15.8353 2.61742 15.6615 3.59406C15.4888 4.56481 15.0677 5.82811 14.5346 7.42752L13.2559 11.2636C12.822 12.5652 12.4849 13.5765 12.174 14.3075C11.8741 15.0125 11.5412 15.6093 11.0354 15.9033C10.2402 16.3656 9.25815 16.3656 8.46297 15.9033C7.95722 15.6093 7.62425 15.0125 7.32437 14.3075C7.01349 13.5765 6.67638 12.5652 6.24253 11.2636L6.23328 11.2359C6.08129 10.7799 6.03495 10.6562 5.96931 10.5582C5.89585 10.4484 5.80159 10.3542 5.69185 10.2807C5.5938 10.215 5.47011 10.1687 5.01412 10.0167L4.98634 10.0075C3.6848 9.57361 2.67347 9.23651 1.94253 8.92562C1.23747 8.62575 0.640731 8.29278 0.346708 7.78702C-0.115569 6.99185 -0.115569 6.00976 0.346708 5.21458C0.640732 4.70882 1.23747 4.37585 1.94254 4.07598C2.67348 3.76509 3.68482 3.42798 4.98639 2.99413L8.8225 1.71542C10.4219 1.18227 11.6852 0.761164 12.6559 0.588477Z"
                fill="#E0EBFF" />
        </svg>


        <span>Resend invite</span>
    </button>
    <button class="btn btn-lg btn-outline-danger" (click)="removeUser()">
        <svg width="15" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
                d="M5.9819 0.687514H8.51798C8.68028 0.687411 8.82167 0.687321 8.95518 0.708641C9.48266 0.79287 9.93911 1.12186 10.1858 1.59563C10.2483 1.71555 10.2929 1.84971 10.3441 2.00371L10.4278 2.25488C10.442 2.2974 10.446 2.30943 10.4495 2.31891C10.5808 2.682 10.9213 2.92745 11.3073 2.93723C11.3175 2.93748 11.3299 2.93753 11.3749 2.93753H13.6249C13.9356 2.93753 14.1874 3.18937 14.1874 3.50003C14.1874 3.81069 13.9356 4.06253 13.6249 4.06253H0.874878C0.564218 4.06253 0.312378 3.81069 0.312378 3.50003C0.312378 3.18937 0.564218 2.93753 0.874878 2.93753H3.12494C3.16997 2.93753 3.1824 2.93749 3.19255 2.93723C3.57854 2.92745 3.91906 2.68202 4.0504 2.31893C4.05385 2.30938 4.05782 2.29761 4.07206 2.25488L4.15577 2.00372C4.20699 1.84973 4.25162 1.71555 4.31407 1.59563C4.56078 1.12186 5.01723 0.79287 5.5447 0.708641C5.67821 0.687321 5.8196 0.687411 5.9819 0.687514ZM5.00599 2.93753C5.04462 2.86176 5.07886 2.78303 5.10831 2.70161C5.11725 2.67689 5.12602 2.65057 5.13729 2.61675L5.21215 2.39219C5.28052 2.18706 5.29627 2.14522 5.31189 2.11523C5.39412 1.95731 5.54627 1.84764 5.7221 1.81957C5.75549 1.81423 5.80015 1.81253 6.01639 1.81253H8.48349C8.69973 1.81253 8.74439 1.81423 8.77779 1.81957C8.95361 1.84764 9.10576 1.95731 9.188 2.11523C9.20362 2.14522 9.21936 2.18705 9.28773 2.39219L9.36254 2.61662L9.39158 2.70163C9.42103 2.78304 9.45526 2.86177 9.49389 2.93753H5.00599Z"
                fill="#E04F5F" />
            <path
                d="M2.6862 5.33761C2.66553 5.02764 2.3975 4.79311 2.08752 4.81377C1.77755 4.83444 1.54302 5.10247 1.56369 5.41245L1.91127 10.6262C1.9754 11.5883 2.02719 12.3654 2.14867 12.9752C2.27497 13.6092 2.48978 14.1387 2.93348 14.5538C3.37718 14.9689 3.91984 15.1481 4.56083 15.2319C5.17735 15.3126 5.95616 15.3125 6.92033 15.3125H7.5795C8.54367 15.3125 9.32254 15.3126 9.93906 15.2319C10.58 15.1481 11.1227 14.9689 11.5664 14.5538C12.0101 14.1387 12.2249 13.6092 12.3512 12.9752C12.4727 12.3654 12.5245 11.5883 12.5886 10.6263L12.9362 5.41245C12.9569 5.10247 12.7223 4.83444 12.4124 4.81377C12.1024 4.79311 11.8344 5.02764 11.8137 5.33761L11.4687 10.5119C11.4013 11.5228 11.3533 12.2262 11.2479 12.7554C11.1456 13.2688 11.0029 13.5405 10.7978 13.7323C10.5928 13.9242 10.3121 14.0485 9.79314 14.1164C9.25809 14.1864 8.55308 14.1875 7.53995 14.1875H6.95993C5.9468 14.1875 5.24179 14.1864 4.70674 14.1164C4.18774 14.0485 3.90712 13.9242 3.70206 13.7323C3.497 13.5405 3.35425 13.2687 3.25199 12.7554C3.14656 12.2262 3.09854 11.5228 3.03115 10.5119L2.6862 5.33761Z"
                fill="#E04F5F" />
            <path
                d="M5.31898 6.69032C5.62809 6.65941 5.90374 6.88494 5.93466 7.19406L6.30966 10.9441C6.34057 11.2532 6.11504 11.5288 5.80592 11.5597C5.4968 11.5906 5.22115 11.3651 5.19024 11.056L4.81524 7.306C4.78433 6.99688 5.00986 6.72123 5.31898 6.69032Z"
                fill="#E04F5F" />
            <path
                d="M9.18092 6.69032C9.49004 6.72123 9.71557 6.99688 9.68466 7.306L9.30966 11.056C9.27874 11.3651 9.00309 11.5906 8.69398 11.5597C8.38486 11.5288 8.15933 11.2532 8.19024 10.9441L8.56524 7.19406C8.59615 6.88494 8.8718 6.65941 9.18092 6.69032Z"
                fill="#E04F5F" />
        </svg>
        <span>Remove User</span>
    </button>
    }



    <!-- *ngIf="jobTitleData.is_active" -->

</app-page-header>


<!-- content -->
<div class="content-hug">
    <div class="content-box d-flex flex-column gap-3">
        <div class="d-flex align-items-center justify-content-between">
            <h2>User Information</h2>
            <div>
                @switch (userInfo?.status) {
                @case (userStatus.Active){<span class="badge-success">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
                        <g fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="12" cy="12" r="10" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="m8.5 12.5l2 2l5-5" />
                        </g>
                    </svg>
                    <span>Active</span>
                </span>}
                @case (userStatus.Inactive){<span class="badge-gray">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
                        <g fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="12" cy="12" r="10" />
                            <path stroke-linecap="round" d="m14.5 9.5l-5 5m0-5l5 5" />
                        </g>
                    </svg>
                    <span>Not Active</span>
                </span>}
                @case (userStatus.Pending){<span class="badge-newjoiner">
                    <svg width="12" height="18" viewBox="0 0 12 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M5.95317 0.9375H6.04679C7.55709 0.937488 8.74903 0.937479 9.6172 1.05195C10.4705 1.16445 11.2372 1.41239 11.6014 2.11939C11.6538 2.22125 11.6981 2.32711 11.7338 2.43596C11.9822 3.19419 11.6146 3.9104 11.0909 4.58827C10.5584 5.27763 9.71518 6.11258 8.64769 7.16968L6.79939 9L8.64769 10.8303C9.71519 11.8874 10.5584 12.7224 11.0909 13.4117C11.6146 14.0896 11.9822 14.8058 11.7338 15.564C11.6981 15.6729 11.6538 15.7787 11.6014 15.8806C11.2372 16.5876 10.4705 16.8355 9.6172 16.9481C8.74903 17.0625 7.55708 17.0625 6.04678 17.0625H5.95318C4.44288 17.0625 3.25093 17.0625 2.38275 16.9481C1.52944 16.8355 0.762726 16.5876 0.398595 15.8806C0.346133 15.7787 0.301852 15.6729 0.266183 15.564C0.0177354 14.8058 0.3854 14.0896 0.909063 13.4117C1.4416 12.7224 2.28477 11.8874 3.35227 10.8303L5.20057 9L3.35227 7.16968C2.28477 6.11258 1.4416 5.27763 0.909063 4.58827C0.3854 3.9104 0.0177353 3.1942 0.266183 2.43597C0.301852 2.32711 0.346132 2.22126 0.398595 2.11939C0.762726 1.41239 1.52944 1.16445 2.38275 1.05195C3.25092 0.937479 4.44287 0.937488 5.95317 0.9375ZM5.99998 8.20836L7.82245 6.40361C8.9309 5.30595 9.7195 4.52329 10.2006 3.90051C10.6962 3.25901 10.7231 2.96439 10.6647 2.78627C10.6476 2.73415 10.6264 2.6834 10.6012 2.6345C10.5137 2.46456 10.2796 2.27402 9.47015 2.16729C8.68447 2.0637 7.56725 2.0625 5.99998 2.0625C4.43271 2.0625 3.31549 2.0637 2.52981 2.16729C1.72033 2.27402 1.48627 2.46456 1.39874 2.6345C1.37355 2.6834 1.35233 2.73415 1.33525 2.78627C1.27689 2.96439 1.30378 3.25901 1.79935 3.90051C2.28046 4.52329 3.06906 5.30595 4.17751 6.40362L5.99998 8.20836ZM5.99998 9.79164L4.1775 11.5964C3.06906 12.694 2.28046 13.4767 1.79935 14.0995C1.30378 14.741 1.27689 15.0356 1.33525 15.2137C1.35233 15.2659 1.37355 15.3166 1.39874 15.3655C1.48627 15.5354 1.72033 15.726 2.52981 15.8327C3.31549 15.9363 4.43271 15.9375 5.99998 15.9375C7.56725 15.9375 8.68447 15.9363 9.47015 15.8327C10.2796 15.726 10.5137 15.5354 10.6012 15.3655C10.6264 15.3166 10.6476 15.2659 10.6647 15.2137C10.7231 15.0356 10.6962 14.741 10.2006 14.0995C9.7195 13.4767 8.93089 12.694 7.82245 11.5964L5.99998 9.79164ZM3.93748 4.125C3.93748 3.81434 4.18932 3.5625 4.49998 3.5625H7.49998C7.81064 3.5625 8.06248 3.81434 8.06248 4.125C8.06248 4.43566 7.81064 4.6875 7.49998 4.6875H4.49998C4.18932 4.6875 3.93748 4.43566 3.93748 4.125ZM3.93748 13.875C3.93748 13.5643 4.18932 13.3125 4.49998 13.3125H7.49998C7.81064 13.3125 8.06248 13.5643 8.06248 13.875C8.06248 14.1857 7.81064 14.4375 7.49998 14.4375H4.49998C4.18932 14.4375 3.93748 14.1857 3.93748 13.875Z"
                            fill="#377AFD" />
                    </svg>

                    <span>Pending</span>
                </span>}
                @case (userStatus.Expired){ <span class="badge-danger">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M9 4.6875C9.31066 4.6875 9.5625 4.93934 9.5625 5.25V9.75C9.5625 10.0607 9.31066 10.3125 9 10.3125C8.68934 10.3125 8.4375 10.0607 8.4375 9.75V5.25C8.4375 4.93934 8.68934 4.6875 9 4.6875Z"
                            fill="#E04F5F" />
                        <path
                            d="M9 12.75C9.41421 12.75 9.75 12.4142 9.75 12C9.75 11.5858 9.41421 11.25 9 11.25C8.58579 11.25 8.25 11.5858 8.25 12C8.25 12.4142 8.58579 12.75 9 12.75Z"
                            fill="#E04F5F" />
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M0.9375 9C0.9375 4.5472 4.5472 0.9375 9 0.9375C13.4528 0.9375 17.0625 4.5472 17.0625 9C17.0625 13.4528 13.4528 17.0625 9 17.0625C4.5472 17.0625 0.9375 13.4528 0.9375 9ZM9 2.0625C5.16852 2.0625 2.0625 5.16852 2.0625 9C2.0625 12.8315 5.16852 15.9375 9 15.9375C12.8315 15.9375 15.9375 12.8315 15.9375 9C15.9375 5.16852 12.8315 2.0625 9 2.0625Z"
                            fill="#E04F5F" />
                    </svg>

                    <span>Expire</span>
                </span>}
                }
            </div>
        </div>





        <div class="info">
            <h6>User ID</h6>
            <span>{{userInfo?.id}}</span>
        </div>
        <div class="info">
            <h6>User Email</h6>
            <span>{{userInfo?.email}}</span>
        </div>
        <div class="info">
            <h6>Full Name</h6>
            <span>{{userInfo?.name}}</span>
        </div>
        <div class="info">
            <h6>Role(s)</h6>
            @for (role of userInfo?.roles; track $index) {
            <span>{{ role.name }}</span>
            <!-- @if (!$last) { <span>, </span> } -->
            }
        </div>
        <div class="info">
            <h6>Date Added</h6>
            <span>{{userInfo?.created_at | date:'dd/MM/yyyy'}}</span>
        </div>

    </div>
</div>





<!-- deactivate popup  -->
<app-popup [title]="'Deactivate User'" [paragraph1]="'Are you sure you want to Deactivate the User “' + 'Name' + '”?'"
    [paragraph2]="'This will only hold any access this title has to the system. You can activate it at any time later.'"
    [isOpen]="deactivateOpen" (close)="closeDeactivate()">
    <button modal-btn-left class="btn btn-lg btn-danger w-100" (click)="confirmDeactivate()">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="1.5"
                d="M12 2v4M8.5 3.706A9.003 9.003 0 0 0 12 21a9 9 0 0 0 3.5-17.294" />
        </svg>
        <span>Deactivate</span>
    </button>
    <button modal-btn-right class="btn btn-lg btn-outline-dark border-0 w-100" (click)="closeDeactivate()">
        Cancel
    </button>
</app-popup>

<!-- activate popup  -->
<app-popup [title]="'Activate User'" [paragraph1]="'Are you sure you want to Activate the User “' + 'Name' + '”?'"
    [paragraph2]="'You can deactivate it at any time later.'" [isOpen]="activateOpen" (close)="closeActivate()">
    <button modal-btn-left class="btn btn-lg btn-success w-100" (click)="confirmActivate()">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="1.5"
                d="M12 2v4M8.5 3.706A9.003 9.003 0 0 0 12 21a9 9 0 0 0 3.5-17.294" />
        </svg>
        <span>Activate</span>
    </button>
    <button modal-btn-right class="btn btn-lg btn-outline-dark border-0 w-100" (click)="closeActivate()">
        Cancel
    </button>
</app-popup>